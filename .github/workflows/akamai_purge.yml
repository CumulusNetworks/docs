name: 'Purge Akamai Cache'
## 
on: workflow_dispatch

jobs:
  purge:
    runs-on: ubuntu-latest
    environment: Prod
    steps:

      - name: Purge Akamai cache tags (production)
        uses: CumulusNetworks/akamai-purge-action@v1
        with:
          client_token: ${{ secrets.AKAMAI_CLIENT_TOKEN }}
          client_secret: ${{ secrets.AKAMAI_CLIENT_SECRET }}
          access_token: ${{ secrets.AKAMAI_ACCESS_TOKEN }}
          hostname: ${{ secrets.AKAMAI_HOSTNAME }}
          ref: 'docs.nvidia.com-networking-ethernet-software-automation-prod'
          type: 'tag'
          network: 'production'
          command: 'delete'
