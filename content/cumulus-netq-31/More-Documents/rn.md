---
title: Cumulus NetQ 3.1 Release Notes
author: Cumulus Networks
weight: 652
product: Cumulus NetQ
version: "3.1"
toc: 1
type: rn
pdfhidden: True
---
<a href="/cumulus-netq-31/rn.xls"><img src={"/images/xls_icon.png" | absURL} height="20px" width="20px" alt="Download 3.1 Release Notes xls" /></a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/cumulus-netq-31/rn.xls">Download all 3.1 release notes as .xls</a>
## 3.1.0 Release Notes
### Open issues in 3.1.0

|  Issue ID 	|   Description	|   Affects	|   Fixed |
|---	        |---	        |---	    |---	                |
| <a name="2555854"></a> [2555854](#2555854) <a name="2555854"></a> <br />NETQ-8245 | If a NetQ Agent is downgraded to the 3.0.0 version from any higher release, the default commands file present in the _/etc/netq/commands/_ also needs to be updated to prevent the NetQ Agent from becoming rotten. | 3.0.0-3.3.1 | |
| <a name="2553453"></a> [2553453](#2553453) <a name="2553453"></a> <br />NETQ-7318 | The <code>netqd</code> daemon logs a traceback to _/var/log/netqd.log_ when the OPTA server is unreachable and <code>netq show</code> commands are run. | 3.1.0-3.3.1 | |
| <a name="2551790"></a> [2551790](#2551790) <a name="2551790"></a> <br />NETQ-6732 | CLI: Upgrade to NetQ 3.1.0 using the CLI fails due to an authentication issue. To work around this issue, run the <code>netq bootstrap master upgrade</code> command as usual, then use the Admin UI to complete the upgrade at _https://\<netq-appl-vm-hostname-or-ipaddr\>:8443_. | 3.1.0-3.1.1 | 3.2.0-3.3.1|
| <a name="2551641"></a> [2551641](#2551641) <a name="2551641"></a> <br />NETQ-6673 | Infra: NetQ VM installation fails if the designated disk size is greater than 2TB. To work around this issue, specify the disk for cloud deployments to be between 256GB and 2TB SSD, and for on-premises deployments to be between 32 GB and 2TB. | 2.4.0-3.1.1 | 3.2.0-3.3.1|
| <a name="2551569"></a> [2551569](#2551569) <a name="2551569"></a> <br />NETQ-6650 | CLI: When a proxy server is configured for NetQ Cloud access and lifecycle management (LCM) is enabled, the associated LCM CLI commands fail due to incorrect port specification. To work around this issue, configure the NetQ Collector to connect directly to NetQ Cloud without a proxy. | 3.1.0-3.1.1 | 3.2.0-3.3.1|
| <a name="2551545"></a> [2551545](#2551545) <a name="2551545"></a> <br />NETQ-6640 | Infra: Rarely, after a node is restarted, Kubernetes pods do not synchronize properly and the output of <code>netq show opta-health</code> shows failures. Node operation is not functionally impacted. You can safely remove the failures by running <code>kubectl get pods \| grep MatchNodeSelector \| cut \-f1 \-d' ' \| xargs kubectl delete pod</code>. To work around the issue, do not label nodes using the API. Instead label nodes through local configuration using <code>kubelet flag "--node-labels"</code>. | 3.1.0-3.3.1 | |
| <a name="2549649"></a> [2549649](#2549649) <a name="2549649"></a> <br />NETQ-5737 | UI: Warnings might appear during the post-upgrade phase for a Cumulus Linux switch upgrade job. They are caused by services that have not yet been restored by the time the job is complete. Cumulus Networks recommend waiting five minutes, creating a network snapshot, then comparing that to the pre-upgrade snapshot. If the comparison shows no differences for the services, the warnings can be ignored. If there are differences, then troubleshooting the relevant service(s) is recommended. | 3.0.0-3.3.1 | |
| <a name="2549344"></a> [2549344](#2549344) <a name="2549344"></a> <br />NETQ-5591 | UI: The lifecycle management feature does not present general alarm or info events; however, errors related to the upgrade process are reported within the NetQ UI. | 3.0.0-3.1.1 | 3.2.0-3.3.1|
| <a name="2549319"></a> [2549319](#2549319) <a name="2549319"></a> <br />NETQ-5571 | UI: The legend and segment colors on Switches and Upgrade History card graphs sometimes do not match. These cards appear on the lifecycle management dashboard (Manage Switch Assets view). Hover over graph to view the correct values. | 3.0.0-3.3.1 | |
| <a name="2549246"></a> [2549246](#2549246) <a name="2549246"></a> <br />NETQ-5529 | UI: Snapshot comparison cards may not render correctly after navigating away from a workbench and then returning to it. If you are viewing the Snapshot comparison card(s) on a custom workbench, refresh the page to reload the data. If you are viewing it on the Cumulus Default workbench, after refreshing the page you must recreate the comparison(s). | 2.4.0-3.2.1 | 3.3.0-3.3.1|
| <a name="2543867"></a> [2543867](#2543867) <a name="2543867"></a> <br />NETQ-3451 | UI: If either the peer_hostname or the peer_asn is invalid, the full screen BGP Service card does not provide the ability to open cards for a selected BGP session. | 2.3.0-2.4.1, 3.0.0-3.3.1 | |

### Fixed Issues in 3.1.0
|  Issue ID 	|   Description	|   Affects	|
|---	        |---	        |---	    |
| <a name="2549842"></a> [2549842](#2549842) <a name="2549842"></a> <br />NETQ-5833 | Switch upgrade of Cumulus Linux in the lifecycle management feature fails when attempted by a user with a standard or sudo user role and custom password credentials. To work around this issue, upgrades should be performed by users with root or sudo user role and an SSH key. Optionally, upgrade using a root user role with custom password.  | 3.0.0-3.0.1 | |
| <a name="2549787"></a> [2549787](#2549787) <a name="2549787"></a> <br />NETQ-5808 | When upgrading to NetQ 3.0.0, if you are using NetQ Agent 2.3.1 or earlier and have MLAG configured, the MLAG service becomes unresponsive. To resolve this issue, upgrade your NetQ Agents to version 3.0.0. | 3.0.0-3.0.1 | |
| <a name="2549721"></a> [2549721](#2549721) <a name="2549721"></a> <br />NETQ-5774 | When installing NetQ on switches running in Cumulus Linux 3.7.x  with management VRF configured, the CLI and Agent server are configured as follows:<br /><pre><br />netq config add cli server \<ipaddr\> vrf mgmt<br />netq config restart cli<br /><br />netq config add agent server \<ipaddr\> vrf mgmt<br />netq config restart agent<br /></pre><br />This results in <code>netqd</code> running in both default and management VRF and the NetQ Agent running in default VRF. In this scenario, the NetQ Agent status is not reported correctly to the management VRF. To workaround this issue: <br /><br /><br />If you have management VRF configured, run the following commands:<br /><pre><br />systemctl stop netqd.service<br />systemctl disable netqd.service<br />systemctl enable netqd&#64;mgmt.service<br />systemctl restart netqd&#64;mgmt.service<br /></pre><br />If you have default VRF configured, run the following commands:<br /><pre><br />systemctl stop netqd&#64;mgmt.service<br />systemctl disable netqd&#64;mgmt.service<br />systemctl enable netqd.service<br />systemctl restart netqd.service<br /></pre><br /> | 3.0.0-3.0.1 | |
| <a name="2549704"></a> [2549704](#2549704) <a name="2549704"></a> <br />NETQ-5768 | When multiple premises are deployed and Cumulus Linux upgrades have been performed on switches using the lifecycle management feature, the Upgrade History card displays history for all premises rather than only those for the selected premises. | 3.0.0-3.0.1 | |
| <a name="2549682"></a> [2549682](#2549682) <a name="2549682"></a> <br />NETQ-5752 | Performing an upgrade using the lifecycle management feature fails intermittently when SSH key switch access authorization is used. To work around this issue, use basic authentication or retry an upgrade job that uses SSH key authorization. | 3.0.0-3.0.1 | |
| <a name="2547642"></a> [2547642](#2547642) <a name="2547642"></a> <br />NETQ-4927 | Admin UI: If the Master Installation phase fails during NetQ installation, refreshing the page causes the error log to be lost. On failure, download the error log, then run <code>netq bootstrap reset</code> followed by <code>netq bootstrap master interface</code> on the node before restarting the installation process. | 2.4.1-3.0.1 | |

