---
title: System Architecture
author: Cumulus Networks
weight: 120
product: SONiC
version: 202012
siteSlug: sonic
---

The SONiC operating system is built around a series of Docker containers, each controlling a specific functional component of the operating system. The containers in turn communicate via a {{<exlink url="https://redis.io/" text="Redis">}} database that also provides persistent data storage, replication and a language-independent interface.

The containers are:

- **bgp**: Runs the {{<exlink url="https://frrouting.org/" text="FRRouting">}} stack. <!-- Despite the container being named for the BGP routing protocol, other protocols are supported, including OSPF, IS-IS and LDP. -->The BGP container runs the following services:
  - `bgpd`: The standard BGP service. The routing state from external parties is received through regular TCP or UDP sockets and pushed down to the forwarding plane through the `zebra`/`fpmsyncd` interface.
  - `zebra`: The traditional IP routing manager. It provides kernel routing table updates, interface lookups and route redistribution services across the various routing protocols. `zebra` also pushes the computed FIB down to the kernel via `netlink` and to southbound components involved in the forwarding process via the Forwarding Plane Manager (FPM).
  - `fpmsyncd`: This service collects the FIB state generated by `zebra` and dumps its contents into the application database (`APPL_DB`) within the `redis` engine.
- **database**: The container where the Redis databases reside. The main databases hosted by the Redis engine are:
  - `APPL_DB`: Stores the state generated by all application containers &mdash; routes, next hops, neighbors and so forth. Any application that needs to interact with other SONiC subsystems does so through `APPL_DB`.
  - `CONFIG_DB`: Stores the configuration state created by SONiC applications, including port configurations, interfaces and VLANs.
  - `STATE_DB`: Stores the essential operational state for elements configured in the operating system. The state resolves dependencies between different SONiC subsystems. For example, a LAG port channel defined in the `teamd` submodule can potentially refer to physical ports that may or may not be present in the system. Another example is a VLAN configured via `vlanmgrd`, which may reference port members whose presence is undetermined in the system.
  - `ASIC_DB`: Stores the necessary state to drive the ASIC configuration and operation. The ASIC state is kept in an ASIC-friendly format to ease the interaction between `syncd` and the ASIC SDKs.
  - `COUNTERS_DB`: Stores counters and statistics associated with each port in the system. This state can be utilized for local CLI requests or to feed a telemetry channel for remote consumption.
- **dhcp-relay**: The DHCP relay agent enables the relaying of DHCP requests from a subnet with no DHCP server to one or more DHCP servers on other subnets.
- **lldp**: The link layer discovery protocol container, in which the following processes run:
  - `lldpd`: The LLDP service, which establishes the LLDP connections with external peers to advertise and receive system capabilities.
  - `lldp_syncd`: This service uploads the LLDP discovered state to the `redis` engine &mdash; the centralized system's message infrastructure &mdash; delivering the LLDP state to applications that require it, such as SNMP.
  - `lldpmgr`: The configuration tool for the `lldpd` service.
- **pmon**: This container is where the `sensord` service runs. `sensord` periodically logs sensor readings from hardware components and alerts when an alarm is triggered. The `pmon` container also hosts the `fancontrol` process, which collects fan-related state from the corresponding platform drivers.
- **radv**: The route advertiser container. <!-- NEED MORE HERE -->
- **snmp**: Hosts SNMP features. There are two relevant processes within this container:
  - `snmpd`: The server handling incoming SNMP polls from external network elements.
  - `snmp-agent`: This is SONiC's implementation of an AgentX SNMP subagent, `sonic_ax_impl`. `The sonic_ax_impl` subagent feeds the master agent (`snmpd`) with information collected from SONiC databases in the centralized Redis engine.
- **swss**: The switch state service (`swss`) container is a suite of tools to coordinate communication among all the SONiC modules and between the modules and the `redis` engine. `swss` also hosts the following services, which interact with the SONiC application layer through `netlink` (except for the processes run in other containers, namely `fpmsyncd`, `teamsyncd` and `lldp_syncd`). The first three services below push state to the `redis` engine while the last three utilize and redistribute state gathered from the engine.
  - `portsyncd`: Listens to port-related `netlink` events. When the switch boots up, `portsyncd` parses the switch's hardware configuration files to obtain physical port information, then pushes the collected state into `APPL_DB`. `portsyncd` transfers port speeds, lanes and MTU, and also injects state into `STATE_DB`.
  - `intfsyncd`: Listens to interface-related `netlink` events and pushes the collected state into `APPL_DB`. `intfsyncd` also manages elements such as new or changed IP addresses associated with an interface.
  - `neighsyncd`: Listens to neighbor-related `netlink` events triggered by newly discovered neighbors as a result of ARP processing and pushes the collected state into `APPL_DB`. `neighsyncd` manages attributes such as the MAC address and neighbor's address family, and will eventually build the adjacency table required in the data plane for L2 rewrite purposes.
  - `orchagent`: The most critical component in the `swss` subsystem. `orchagent` extracts all the relevant state injected by the various `syncd` services, processes and messages this information accordingly, and finally pushes it to `ASIC_DB`. `orchagent` is unique among these services in that it is both a consumer (like getting the state from `APPL_DB`) and a producer (like pushing into `ASIC_DB`).
  - `intfMgrd`: Reacts to state arriving from `APPL_DB`, `CONFIG_DB` and `STATE_DB` to configure interfaces in the Linux kernel, provided there is no conflicting or inconsistent state within any of the databases being monitored.
  - `vlanMgrd`: Reacts to state arriving from `APPL_DB`, `CONFIG_DB` and `STATE_DB` to configure VLANs in the Linux kernel, provided there is no conflicting or inconsistent state within any of the databases being monitored.
- **syncd**: Synchronizes the switch's network state with its ASIC. This includes the initialization, configuration and collection of the ASIC's current status. The primary logical components are:
  - `syncd`: The process that executes the synchronization logic. At compilation time, `syncd` links with the ASIC SDK library and injects state gathered from the interfaces into the ASIC. `syncd` subscribes to `ASIC_DB` to receive state from `swss` actors, and also pushes state coming from the hardware back to `ASIC_DB`.
  - SAI API: The {{<exlink url="https://github.com/opencomputeproject/SAI" text="Switch Abstraction Interface">}} (SAI) defines the API to provide a vendor-independent way of controlling forwarding elements, such as a switching ASIC, an NPU or a software switch in a uniform manner.
  - ASIC SDK: An SAI-compatible implementation of the SDK required to drive the ASIC. The SDK hooks into `syncd`, which is responsible for driving its execution.
- **teamd**: The {{<link url="Port-Channels-Link-Aggregation-LAG" text="link aggregation">}} (LAG) container, which provides the functionality for configuring bonds on SONiC switches. The `teamd` service is a Linux-based open source implementation of the LAG protocol. The `teamsyncd` service manages the interaction between `teamd` and southbound subsystems.
- **telemetry**:  <!-- NEED SOMETHING HERE -->
- **what-just-happened**: The container for the {{<link url="What-Just-Happened" text="Mellanox What Just Happened">}} functionality. This container is not installed in SONiC by default; you must add it manually.

To see which Docker containers are running in SONiC, run `docker ps`:

```
admin@leaf01:~$ docker ps
CONTAINER ID        IMAGE                             COMMAND                  CREATED             STATUS              PORTS  NAMES
7693970157e4        docker-sonic-telemetry:latest     "/usr/bin/supervisord"   36 hours ago        Up 36 hours  telemetry
1346bf47d5aa        docker-snmp-sv2:latest            "/usr/bin/supervisord"   36 hours ago        Up 36 hours  snmp
b4927925be4a        docker-router-advertiser:latest   "/usr/bin/docker-ini…"   37 hours ago        Up 36 hours  radv
fd4006a177d1        docker-dhcp-relay:latest          "/usr/bin/docker_ini…"   37 hours ago        Up 36 hours  dhcp_relay
d90bf65d463f        docker-lldp-sv2:latest            "/usr/bin/docker-lld…"   37 hours ago        Up 36 hours  lldp
7e1c5217eff3        docker-syncd-vs:latest            "/usr/bin/supervisord"   4 days ago          Up 36 hours  syncd
dcede1ab4ac0        docker-teamd:latest               "/usr/bin/supervisord"   4 days ago          Up 36 hours  teamd
8e3c153cafdb        docker-orchagent:latest           "/usr/bin/docker-ini…"   4 days ago          Up 36 hours  swss
cdeb016623c5        docker-fpm-frr:latest             "/usr/bin/supervisord"   8 days ago          Up 36 hours  bgp
2f6ac855e3e1        docker-platform-monitor:latest    "/usr/bin/docker_ini…"   8 days ago          Up 36 hours  pmon
77917d9efb8a        docker-database:latest            "/usr/local/bin/dock…"   8 days ago          Up 37 hours  database
```

To see which Docker images are loaded in SONiC, run `show version`:

```
admin@leaf01:~$ show version

SONiC Software Version: SONiC.201911.202-c453381a
Distribution: Debian 9.13
Kernel: 4.9.0-11-2-amd64
Build commit: c453381a
Build date: Tue Nov 10 07:40:20 UTC 2020
Built by: johnar@jenkins-worker-7

Platform: x86_64-kvm_x86_64-r0
HwSKU: Force10-S6000
ASIC: vs
Serial Number: 000000
Uptime: 06:40:35 up 1 day,  4:51,  1 user,  load average: 1.54, 2.68, 3.07

Docker images:
REPOSITORY                    TAG                   IMAGE ID            SIZE
docker-syncd-vs               201911.202-c453381a   45397cc0e0a1        299MB
docker-syncd-vs               latest                45397cc0e0a1        299MB
docker-platform-monitor       201911.202-c453381a   5ff8a63cfa92        358MB
docker-platform-monitor       latest                5ff8a63cfa92        358MB
docker-router-advertiser      201911.202-c453381a   4134013e6fba        289MB
docker-router-advertiser      latest                4134013e6fba        289MB
docker-fpm-frr                201911.202-c453381a   fa4db4fd55d2        335MB
docker-fpm-frr                latest                fa4db4fd55d2        335MB
docker-sflow                  201911.202-c453381a   28b00e75a932        315MB
docker-sflow                  latest                28b00e75a932        315MB
docker-lldp-sv2               201911.202-c453381a   1112876a3680        312MB
docker-lldp-sv2               latest                1112876a3680        312MB
docker-orchagent              201911.202-c453381a   7a869bd6c138        333MB
docker-orchagent              latest                7a869bd6c138        333MB
docker-dhcp-relay             201911.202-c453381a   e47290a3e4d0        299MB
docker-dhcp-relay             latest                e47290a3e4d0        299MB
docker-database               201911.202-c453381a   be09cc886d87        289MB
docker-database               latest                be09cc886d87        289MB
docker-snmp-sv2               201911.202-c453381a   ff5e78a32d22        348MB
docker-snmp-sv2               latest                ff5e78a32d22        348MB
docker-teamd                  201911.202-c453381a   2c84035ce07d        315MB
docker-teamd                  latest                2c84035ce07d        315MB
docker-nat                    201911.202-c453381a   d55b5ce7e955        316MB
docker-nat                    latest                d55b5ce7e955        316MB
docker-sonic-mgmt-framework   201911.202-c453381a   a299d77074de        431MB
docker-sonic-mgmt-framework   latest                a299d77074de        431MB
docker-sonic-telemetry        201911.202-c453381a   1d63ae9d3976        353MB
docker-sonic-telemetry        latest                1d63ae9d3976        353MB
```

For more details about the architecture, see the {{<exlink url="https://github.com/Azure/SONiC/wiki/Architecture" text="Azure SONiC documentation">}}.
