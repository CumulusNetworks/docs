<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Prescriptive Topology Manager - PTM | Cumulus Networks Documentation</title>

  
  <link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet">

  
  
  
  <link rel="stylesheet" href="/docs.cumulusnetworks.com/book.min.a378d8a2da6f5357a83a43dff33d6f77fb70401e0399d5ba78faf81d7a1ae1a8.css">

  
  <link rel="icon" href="/docs.cumulusnetworks.com/icons/favicon.png" type="image/x-icon">

  
  <!--
  Made with Book Theme
  https://github.com/alex-shpak/hugo-book
  -->

  
  
  <script src = "/docs.cumulusnetworks.com/js/codecopy.js"> </script>

</head>


<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  
  <header id="site-nav">
    <div class="header-wrapper flex">
      <a href="/">
        <img src="/header-logo.png" alt="Cumulus Networks">
        <img src="/cumulus-networks-rt-white.svg" alt="Cumulus Networks" class="header-mobile">
        <span>Docs</span>
      </a>
      <ul class="flex">
        <li><a href="//cumulusnetworks.com">HOME</a></li>
        <li><a href="//support.cumulusnetworks.com/">SUPPORT</a></li>
        <li><a href="//docs.cumulusnetworks.com/">DOCS</a></li>
        <li><a href="//education.cumulusnetworks.com">EDUCATION</a></li>
        <li><a href="//cumulusnetworks.com/blog/">BLOG</a></li>
        <li><a href="//forums.cumulusnetworks.com/">FORUMS</a></li>
      </ul>
      <div class="burger-menu">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </header>
  <div id="product-nav" class="flex">
      
    
    <ul>
    
      <li class = "active" ><a href = docs.cumulusnetworks.com/cumulus-linux/ >
        Cumulus Linux </a> </li>
    
      <li><a href = docs.cumulusnetworks.com/cumulus-netq/ >
        Cumulus NetQ </a> </li>
    
      <li><a href = docs.cumulusnetworks.com/cumulus-vx/ >
        Cumulus VX </a> </li>
    
      <li>
        <div id="products-dropdown" class="dropdown">
            <button class="btn" type="button" id="dropdownMenuButton">
              Products
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <a class="dropdown-item" href="">Cumulus RMP</a>
              <a class="dropdown-item" href="">Cumulus Chassis</a>
              <a class="dropdown-item" href="">Cumulus Host Pack</a>
            </div>
        </div>
      </li>
    </ul>
    <div class="search-container">
      <div id="doc-search-box">
        <input type="text" class="doc-search-input" placeholder="Search" value="">
        <span><button type="submit"><img src="/icons/search_20x20.svg" alt=""></button></span>
      </div>
      <div id="dropdown" class="dropdown">
          <button class="btn" type="button" id="dropdownMenuButton">
            v2.5.12
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/cumulus-linux/"> v3.7.7</a>
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-25esr/"> v2.5.12</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-30/"> v3.0.1</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-31/"> v3.1.2</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-321/"> v3.2.1</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-330/"> v3.3.0</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-332/"> v3.3.2</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-343/"> v3.4.3</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-35/"> v3.5</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-36/"> v3.6</a>
            
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
          </div>
      </div>
    </div>
  </div>
  <main class="flex container">
    <aside class="book-menu fixed">

      <nav role="navigation">
        <h2 class="book-brand">
          <a href="docs.cumulusnetworks.com">Cumulus Networks Documentation</a>
        </h2>
        
        




  <ul class = "cn-book-section-container" id = "top">
    
        
          
            

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/" >
    Cumulus Linux User Guide
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Installation-Upgrading-and-Package-Management/" >
    Installation, Upgrading and Package Management
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Installation-Upgrading-and-Package-Management/Managing-Cumulus-Linux-Disk-Images/" >
    Managing Cumulus Linux Disk Images
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Installation-Upgrading-and-Package-Management/Managing-Cumulus-Linux-Disk-Images/Installing-a-New-Cumulus-Linux-Image/" >
    Installing a New Cumulus Linux Image
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Installation-Upgrading-and-Package-Management/Managing-Cumulus-Linux-Disk-Images/Upgrading-Cumulus-Linux/" >
    Upgrading Cumulus Linux
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Installation-Upgrading-and-Package-Management/Adding-and-Updating-Packages/" >
    Adding and Updating Packages
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Installation-Upgrading-and-Package-Management/Zero-Touch-Provisioning-ZTP/" >
    Zero Touch Provisioning - ZTP
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/System-Management/" >
    System Management
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/System-Management/Authentication-Authorization-and-Accounting/" >
    Authentication, Authorization, and Accounting
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/System-Management/Authentication-Authorization-and-Accounting/SSH-for-Remote-Access/" >
    SSH for Remote Access
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/System-Management/Authentication-Authorization-and-Accounting/User-Accounts/" >
    User Accounts
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/System-Management/Authentication-Authorization-and-Accounting/Using-sudo-to-Delegate-Privileges/" >
    Using sudo to Delegate Privileges
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/System-Management/Authentication-Authorization-and-Accounting/LDAP-Authentication-and-Authorization/" >
    LDAP Authentication and Authorization
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/System-Management/Setting-Date-and-Time/" >
    Setting Date and Time
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/System-Management/Netfilter-ACLs/" >
    Netfilter - ACLs
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/System-Management/Configuring-switchd/" >
    Configuring switchd
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/System-Management/Power-over-Ethernet-PoE/" >
    Power over Ethernet - PoE
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/System-Management/Configuring-a-Global-Proxy/" >
    Configuring a Global Proxy
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Configuring-and-Managing-Network-Interfaces/" >
    Configuring and Managing Network Interfaces
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Configuring-and-Managing-Network-Interfaces/Layer-1-and-Switch-Port-Attributes/" >
    Layer 1 and Switch Port Attributes
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Configuring-and-Managing-Network-Interfaces/Buffer-and-Queue-Management/" >
    Buffer and Queue Management
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/" >
    Layer 1 and Layer 2 Features
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/Ethernet-Bridging-VLANs/" >
    Ethernet Bridging - VLANs
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/Ethernet-Bridging-VLANs/VLAN-Tagging/" >
    VLAN Tagging
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/Ethernet-Bridging-VLANs/VLAN-aware-Bridge-Mode-for-Large-scale-Layer-2-Environments/" >
    VLAN-aware Bridge Mode for Large-scale Layer 2 Environments
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/Network-Virtualization/" >
    Network Virtualization
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/Network-Virtualization/Lightweight-Network-Virtualization-LNV/" >
    Lightweight Network Virtualization - LNV
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/Network-Virtualization/Lightweight-Network-Virtualization-LNV/LNV-VXLAN-Active-Active-Mode/" >
    LNV VXLAN Active-Active Mode
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/Network-Virtualization/Lightweight-Network-Virtualization-LNV/LNV-Full-Example/" >
    LNV Full Example
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/Network-Virtualization/Integrating-with-VMware-NSX/" >
    Integrating with VMware NSX
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/Network-Virtualization/Integrating-Hardware-VTEPs-with-Midokura-MidoNet-and-OpenStack/" >
    Integrating Hardware VTEPs with Midokura MidoNet and OpenStack
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/Network-Virtualization/Static-MAC-Bindings-with-VXLAN/" >
    Static MAC Bindings with VXLAN
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/Spanning-Tree-and-Rapid-Spanning-Tree/" >
    Spanning Tree and Rapid Spanning Tree
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/Link-Layer-Discovery-Protocol/" >
    Link Layer Discovery Protocol
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/Prescriptive-Topology-Manager-PTM/"  class="active" >
    Prescriptive Topology Manager - PTM
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/Bonding-Link-Aggregation/" >
    Bonding - Link Aggregation
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/Multi-Chassis-Link-Aggregation-MLAG/" >
    Multi-Chassis Link Aggregation - MLAG
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/LACP-Bypass/" >
    LACP Bypass
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/Virtual-Router-Redundancy-VRR/" >
    Virtual Router Redundancy - VRR
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/IGMP-and-MLD-Snooping/" >
    IGMP and MLD Snooping
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-3-Features/" >
    Layer 3 Features
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-3-Features/Routing/" >
    Routing
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-3-Features/Introduction-to-Routing-Protocols/" >
    Introduction to Routing Protocols
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-3-Features/Network-Topology/" >
    Network Topology
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-3-Features/Quagga-Overview/" >
    Quagga Overview
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-3-Features/Configuring-Quagga/" >
    Configuring Quagga
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-3-Features/Open-Shortest-Path-First-OSPF-Protocol/" >
    Open Shortest Path First - OSPF - Protocol
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-3-Features/Open-Shortest-Path-First-v3-OSPFv3-Protocol/" >
    Open Shortest Path First v3 - OSPFv3 - Protocol
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-3-Features/Configuring-Border-Gateway-Protocol-BGP/" >
    Configuring Border Gateway Protocol - BGP
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-3-Features/Bidirectional-Forwarding-Detection-BFD/" >
    Bidirectional Forwarding Detection - BFD
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-3-Features/Equal-Cost-Multipath-Load-Sharing-Hardware-ECMP/" >
    Equal Cost Multipath Load Sharing - Hardware ECMP
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Layer-3-Features/Management-VRF/" >
    Management VRF
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Monitoring-and-Troubleshooting/" >
    Monitoring and Troubleshooting
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Monitoring-and-Troubleshooting/Understanding-and-Decoding-the-cl-support-Output-File/" >
    Understanding and Decoding the cl-support Output File
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Monitoring-and-Troubleshooting/Understanding-and-Decoding-the-cl-support-Output-File/Troubleshooting-Log-Files/" >
    Troubleshooting Log Files
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Monitoring-and-Troubleshooting/Understanding-and-Decoding-the-cl-support-Output-File/Troubleshooting-the-etc-Directory/" >
    Troubleshooting the etc Directory
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Monitoring-and-Troubleshooting/Understanding-and-Decoding-the-cl-support-Output-File/Troubleshooting-the-support-Directory/" >
    Troubleshooting the support Directory
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Monitoring-and-Troubleshooting/Single-User-Mode-Boot-Recovery/" >
    Single User Mode - Boot Recovery
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Monitoring-and-Troubleshooting/Using-netshow-to-Troubleshoot-Your-Network-Configuration/" >
    Using netshow to Troubleshoot Your Network Configuration
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Monitoring-and-Troubleshooting/Monitoring-Interfaces-and-Transceivers-Using-ethtool/" >
    Monitoring Interfaces and Transceivers Using ethtool
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Monitoring-and-Troubleshooting/Resource-Diagnostics-Using-cl-resource-query/" >
    Resource Diagnostics Using cl-resource-query
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Monitoring-and-Troubleshooting/Monitoring-System-Hardware/" >
    Monitoring System Hardware
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Monitoring-and-Troubleshooting/Monitoring-System-Statistics-and-Network-Traffic-with-sFlow/" >
    Monitoring System Statistics and Network Traffic with sFlow
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Monitoring-and-Troubleshooting/Monitoring-Virtual-Device-Counters/" >
    Monitoring Virtual Device Counters
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Monitoring-and-Troubleshooting/Managing-Application-Daemons/" >
    Managing Application Daemons
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Monitoring-and-Troubleshooting/Troubleshooting-Network-Interfaces/" >
    Troubleshooting Network Interfaces
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Monitoring-and-Troubleshooting/Network-Troubleshooting/" >
    Network Troubleshooting
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Monitoring-and-Troubleshooting/SNMP-Monitoring/" >
    SNMP Monitoring
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Network-Solutions/" >
    Network Solutions
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Network-Solutions/Data-Center-Host-to-ToR-Architecture/" >
    Data Center Host to ToR Architecture
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Network-Solutions/Cumulus-Networks-Services-Demos/" >
    Cumulus Networks Services Demos
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Quick-Start-Guide/" >
    Quick Start Guide
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-25esr/Cumulus-Linux-Index/" >
    Cumulus Linux Index
  </a>


    </li>
    
  </ul>


  </li>


          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
    
  </ul>









      </nav>

      
      
      
      

      <script src = "/docs.cumulusnetworks.com/js/menuBundle.js"> </script>


    </aside>

    <div class="book-page">

      
      <header class="align-center justify-between book-header">
        <label for="menu-control">
          <img src="/docs.cumulusnetworks.com/svg/menu.svg" alt="Menu" />
        </label>
        <strong>Prescriptive Topology Manager - PTM</strong>
      </header>

      
      
<div class= "notices info" id = "info" >
    This documentation is for an older version of the software. If you are using the current version of Cumulus Linux, this content may not be up to date. The current version of the documentation is available [here](https://docs.cumulusnetworks.com/).
  </div>
<article class="markdown">
<h1>Prescriptive Topology Manager - PTM</h1>

<p>In data center topologies, right cabling is a time-consuming endeavor
and is error prone. Prescriptive Topology Manager (PTM) is a dynamic
cabling verification tool to help detect and eliminate such errors. It
takes a graphviz-DOT specified network cabling plan (something many
operators already generate), stored in a <code>topology.dot</code> file, and
couples it with runtime information derived from LLDP to verify that the
cabling matches the specification. The check is performed on every link
transition on each node in the network.</p>

<p>You can customize the <code>topology.dot</code> file to control <code>ptmd</code> at both the
global/network level and the node/port level.</p>

<p>PTM runs as a daemon, named <code>ptmd</code>.</p>

<p>For more information, see <code>man ptmd(8)</code>.</p>

<h2 id="span-supported-features-span"><span>Supported Features</span></h2>

<ul>
<li><p>Topology verification using LLDP. <code>ptmd</code> creates a client connection
to the LLDP daemon, <code>lldpd</code>, and retrieves the neighbor relationship
between the nodes/ports in the network and compares them against the
prescribed topology specified in the <code>topology.dot</code> file.</p></li>

<li><p>Only physical interfaces, like swp1 or eth0, are currently
supported. Cumulus Linux does not support specifying virtual
interfaces like bonds or subinterfaces like eth0.200 in the topology
file.</p></li>

<li><p>Forwarding path failure detection using <a href="http://tools.ietf.org/html/rfc5880" target="_blank">Bidirectional Forwarding
Detection</a> (BFD); however,
demand mode is not supported. For more information on how BFD
operates in Cumulus Linux, <a href="#src-5116005_PrescriptiveTopologyManager-PTM-bfd">see
below</a> and see
<code>man ptmd(8)</code>.</p></li>

<li><p>Integration with Quagga (PTM to Quagga notification).</p></li>

<li><p>Client management: <code>ptmd</code> creates an abstract named socket
<code>/var/run/ptmd.socket</code> on startup. Other applications can connect to
this socket to receive notifications and send commands.</p></li>

<li><p>Event notifications: see Scripts below.</p></li>

<li><p>User configuration via a <code>topology.dot</code> file; <a href="#src-5116005_PrescriptiveTopologyManager-PTM-configuring">see
below</a>.</p></li>
</ul>

<p><span id="src-5116005_PrescriptiveTopologyManager-PTM-configuring"></span></p>

<h2 id="span-configuring-ptm-span"><span>Configuring PTM</span></h2>

<p><code>ptmd</code> verifies the physical network topology against a DOT-specified
network graph file, <code>/etc/ptm.d/topology.dot</code>.</p>


<div class="notices warning" > <p>This file must be present or else <code>ptmd</code> will not start. You can specify
an alternate file using the <code>-c</code> option.</p>
 </div>


<p>PTM supports <a href="http://en.wikipedia.org/wiki/DOT_%28graph_description_language%29" target="_blank">undirected
graphs</a>.</p>

<p>At startup, <code>ptmd</code> connects to <code>lldpd</code>, the LLDP daemon, over a Unix
socket and retrieves the neighbor name and port information. It then
compares the retrieved port information with the configuration
information that it read from the topology file. If there is a match,
then it is a PASS, else it is a FAIL.</p>


<div class="notices note" > <p>PTM performs its LLDP neighbor check using the PortID ifname TLV
information. Previously, it used the PortID port description TLV
information.</p>
 </div>


<p><span id="src-5116005_PrescriptiveTopologyManager-PTM-example"></span></p>

<h2 id="span-basic-topology-example-span"><span>Basic Topology Example</span></h2>

<p>This is a basic example DOT file and its corresponding topology diagram.
You should use the same <code>topology.dot</code> file on all switches, and don&rsquo;t
split the file per device; this allows for easy automation by
pushing/pulling the same exact file on each device!</p>

<pre><code>graph G {
    &quot;spine1&quot;:&quot;swp1&quot; -- &quot;leaf1&quot;:&quot;swp1&quot;;
    &quot;spine1&quot;:&quot;swp2&quot; -- &quot;leaf2&quot;:&quot;swp1&quot;;
    &quot;spine2&quot;:&quot;swp1&quot; -- &quot;leaf1&quot;:&quot;swp2&quot;;
    &quot;spine2&quot;:&quot;swp2&quot; -- &quot;leaf2&quot;:&quot;swp2&quot;;
    &quot;leaf1&quot;:&quot;swp3&quot; -- &quot;leaf2&quot;:&quot;swp3&quot;;
    &quot;leaf1&quot;:&quot;swp4&quot; -- &quot;leaf2&quot;:&quot;swp4&quot;;
    &quot;leaf1&quot;:&quot;swp5s0&quot; -- &quot;server1&quot;:&quot;eth1&quot;;
    &quot;leaf2&quot;:&quot;swp5s0&quot; -- &quot;server2&quot;:&quot;eth1&quot;;
}
</code></pre>








<img class = "confluence-embedded-image" src = "/images/download/attachments/5116005/2s2l2s_DOT.png" alt = "/images/download/attachments/5116005/2s2l2s_DOT.png"


width = 500

 />


<p><span id="src-5116005_PrescriptiveTopologyManager-PTM-advanced"></span></p>

<h2 id="span-advanced-ptm-configuration-span"><span>Advanced PTM Configuration</span></h2>

<p>PTM allows for more advanced configuration of the topology file using
parameters you specify in the topology file.</p>

<h3 id="span-scripts-span"><span>Scripts</span></h3>

<p><code>ptmd</code> executes scripts at <code>/etc/ptm.d/if-topo-pass</code> and
<code>/etc/ptm.d/if-topo-fail</code>for each interface that goes through a
change, running <code>if-topo-pass</code> when an LLDP or BFD check passes and
running <code>if-topo-fails</code> when the check fails. The scripts receive an
argument string that is the result of the <code>ptmctl</code> command, described in
the <a href="#src-5116005_PrescriptiveTopologyManager-PTM-ptmd_commands"><code>ptmd</code> commands section
below</a>.</p>

<p>You should modify these default scripts as needed.</p>

<h3 id="span-configuration-parameters-span"><span>Configuration Parameters</span></h3>

<p>You can configure <code>ptmd</code> parameters in the topology file. The parameters
are classified as host-only, global, per-port/node and templates.</p>

<h4 id="span-host-only-parameters-span"><span>Host-only Parameters</span></h4>

<p><em>Host-only parameters</em> apply to the entire host on which PTM is running.
You can include the <code>hostnametype</code> host-only parameter, which specifies
whether PTM should use only the host name (<code>hostname</code>) or the
fully-qualified domain name (<code>fqdn</code>) while looking for the <code>self-node</code>
in the graph file. For example, in the graph file below, PTM will ignore
the FQDN and only look for <em>switch04</em>, since that is the host name of
the switch it&rsquo;s running on:</p>


<div class="notices tip" > <p>It’s a good idea to always wrap the hostname in double quotes, like
<em>&ldquo;www.example.com&rdquo;</em>. Otherwise, <code>ptmd</code> can fail if you specify a
fully-qualified domain name as the hostname and do not wrap it in double
quotes.</p>

<p>Further, to avoid errors when starting the <code>ptmd</code> process, make sure
that <code>/etc/hosts</code> and <code>/etc/hostname</code> both reflect the hostname you are
using in the <code>topology.dot</code> file.</p>
 </div>


<pre><code>graph G {
         hostnametype=&quot;hostname&quot;
         BFD=&quot;upMinTx=150,requiredMinRx=250&quot;
         &quot;cumulus&quot;:&quot;swp44&quot; -- &quot;switch04.cumulusnetworks.com&quot;:&quot;swp20&quot;
         &quot;cumulus&quot;:&quot;swp46&quot; -- &quot;switch04.cumulusnetworks.com&quot;:&quot;swp22&quot;
}
</code></pre>

<p>However, in this next example, PTM will compare using the FQDN and look
for <em>switch05.cumulusnetworks.com</em>, which is the FQDN of the switch it’s
running on:</p>

<pre><code>graph G {
         hostnametype=&quot;fqdn&quot;
         &quot;cumulus&quot;:&quot;swp44&quot; -- &quot;switch05.cumulusnetworks.com&quot;:&quot;swp20&quot;
         &quot;cumulus&quot;:&quot;swp46&quot; -- &quot;switch05.cumulusnetworks.com&quot;:&quot;swp22&quot;
}
</code></pre>

<h4 id="span-global-parameters-span"><span>Global Parameters</span></h4>

<p><em>Global parameters</em> apply to every port listed in the topology file.
There are two global parameters: LLDP and BFD. LLDP is enabled by
default; if no keyword is present, default values are used for all
ports. However, BFD is disabled if no keyword is present, unless there
is a per-port override configured. For example:</p>

<pre><code>graph G {
         LLDP=&quot;&quot;
         BFD=&quot;upMinTx=150,requiredMinRx=250,afi=both&quot;
         &quot;cumulus&quot;:&quot;swp44&quot; -- &quot;qct-ly2-04&quot;:&quot;swp20&quot;
         &quot;cumulus&quot;:&quot;swp46&quot; -- &quot;qct-ly2-04&quot;:&quot;swp22&quot;
}
</code></pre>

<h4 id="span-per-port-parameters-span"><span>Per-port Parameters</span></h4>

<p><em>Per-port parameters</em> provide finer-grained control at the port level.
These parameters override any global or compiled defaults. For example:</p>

<pre><code>graph G {
         LLDP=&quot;&quot;
         BFD=&quot;upMinTx=300,requiredMinRx=100&quot;
         &quot;cumulus&quot;:&quot;swp44&quot; -- &quot;qct-ly2-04&quot;:&quot;swp20&quot; [BFD=&quot;upMinTx=150,requiredMinRx=250,afi=both&quot;]
         &quot;cumulus&quot;:&quot;swp46&quot; -- &quot;qct-ly2-04&quot;:&quot;swp22&quot;
}
</code></pre>

<h4 id="span-templates-span"><span>Templates</span></h4>

<p><em>Templates</em> provide flexibility in choosing different parameter
combinations and applying them to a given port. A template instructs
<code>ptmd</code> to reference a named parameter string instead of a default one.
There are two parameter strings <code>ptmd</code> supports:</p>

<ul>
<li><p><code>bfdtmpl</code>, which specifies a custom parameter tuple for BFD.</p></li>

<li><p><code>lldptmpl</code>, which specifies a custom parameter tuple for LLDP.</p></li>
</ul>

<p>For example:</p>

<pre><code>graph G {
         LLDP=&quot;&quot;
         BFD=&quot;upMinTx=300,requiredMinRx=100&quot;
         BFD1=&quot;upMinTx=200,requiredMinRx=200&quot;
         BFD2=&quot;upMinTx=100,requiredMinRx=300&quot;
         LLDP1=&quot;match_type=ifname&quot;
         LLDP2=&quot;match_type=portdescr&quot;
         &quot;cumulus&quot;:&quot;swp44&quot; -- &quot;qct-ly2-04&quot;:&quot;swp20&quot; [BFD=&quot;bfdtmpl=BFD1&quot;, LLDP=&quot;lldptmpl=LLDP1&quot;]
         &quot;cumulus&quot;:&quot;swp46&quot; -- &quot;qct-ly2-04&quot;:&quot;swp22&quot; [BFD=&quot;bfdtmpl=BFD2&quot;, LLDP=&quot;lldptmpl=LLDP2&quot;]
         &quot;cumulus&quot;:&quot;swp46&quot; -- &quot;qct-ly2-04&quot;:&quot;swp22&quot;
}
</code></pre>

<p>In this template, LLDP1 and LLDP2 are templates for LLDP parameters
while BFD1 and BFD2 are templates for BFD parameters.</p>

<h4 id="span-supported-bfd-and-lldp-parameters-span"><span>Supported BFD and LLDP Parameters</span></h4>

<p><code>ptmd</code> supports the following BFD parameters:</p>

<ul>
<li><p><code>upMinTx</code>: the minimum transmit interval, which defaults to <em>300ms</em>,
specified in milliseconds.</p></li>

<li><p><code>requiredMinRx</code>: the minimum interval between received BFD packets,
which defaults to <em>300ms</em>, specified in milliseconds.</p></li>

<li><p><code>detectMult</code>: the detect multiplier, which defaults to <em>3</em>, and can
be any non-zero value.</p></li>

<li><p><code>afi</code>: the address family to be supported for the edge. The address
family must be one of the following:</p>

<ul>
<li><p><em>v4</em>: BFD sessions will be built for only IPv4 connected peer.
This is the default value.</p></li>

<li><p><em>v6</em>: BFD sessions will be built for only IPv6 connected peer.</p></li>

<li><p><em>both</em>: BFD sessions will be built for both IPv4 and IPv6
connected peers.</p></li>
</ul></li>
</ul>

<p>The following is an example of a topology with BFD applied at the port
level:</p>

<pre><code>graph G {
         &quot;cumulus-1&quot;:&quot;swp44&quot; -- &quot;cumulus-2&quot;:&quot;swp20&quot; [BFD=&quot;upMinTx=300,requiredMinRx=100,afi=v6&quot;]
         &quot;cumulus-1&quot;:&quot;swp46&quot; -- &quot;cumulus-2&quot;:&quot;swp22&quot; [BFD=&quot;detectMult=4&quot;]
}
</code></pre>

<p><code>ptmd</code> supports the following LLDP parameters:</p>

<ul>
<li><p><code>match_type</code>, which defaults to the interface name (<code>ifname</code>), but
can accept a port description (<code>portdescr</code>) instead if you want
<code>lldpd</code> to compare the topology against the port description instead
of the interface name. You can set this parameter globally or at the
per-port level.</p></li>

<li><p><code>match_hostname</code>, which defaults to the host name (<code>hostname</code>), but
enables PTM to match the topology using the fully-qualified domain
name (<code>fqdn</code>) supplied by LLDP.</p></li>
</ul>

<p>The following is an example of a topology with LLDP applied at the port
level:</p>

<pre><code>graph G {
         &quot;cumulus-1&quot;:&quot;swp44&quot; -- &quot;cumulus-2&quot;:&quot;swp20&quot; [LLDP=&quot;match_hostname=fqdn&quot;]
         &quot;cumulus-1&quot;:&quot;swp46&quot; -- &quot;cumulus-2&quot;:&quot;swp22&quot; [LLDP=&quot;match_type=portdescr&quot;]
}
</code></pre>


<div class="notices note" > <p>When you specify <code>match_hostname=fqdn</code>, <code>ptmd</code> will match the entire
FQDN, like <em>cumulus-2.domain.com</em> in the example below. If you do not
specify anything for <code>match_hostname</code>, <code>ptmd</code> will match based on
hostname only, like <em>cumulus-3</em> below, and ignore the rest of the URL:</p>

<pre><code>graph G { 
         &quot;cumulus-1&quot;:&quot;swp44&quot; -- &quot;cumulus-2.domain.com&quot;:&quot;swp20&quot; [LLDP=&quot;match_hostname=fqdn&quot;] 
         &quot;cumulus-1&quot;:&quot;swp46&quot; -- &quot;cumulus-3&quot;:&quot;swp22&quot; [LLDP=&quot;match_type=portdescr&quot;] 
}
</code></pre>
 </div>


<p><span id="src-5116005_PrescriptiveTopologyManager-PTM-bfd"></span></p>

<h3 id="span-bidirectional-forwarding-detection-bfd-span"><span>Bidirectional Forwarding Detection (BFD)</span></h3>

<p>BFD provides low overhead and rapid detection of failures in the paths
between two network devices. It provides a unified mechanism for link
detection over all media and protocol layers. Use BFD to detect failures
for IPv4 and IPv6 single or multihop paths between any two network
devices, including unidirectional path failure detection. For more
information, see the <a href="/version/cumulus-linux-25esr/Layer-3-Features/Bidirectional-Forwarding-Detection---BFD">BFD
chapter</a>.</p>


<div class="notices note" > <p>BFD requires an IP address for any interface on which it is configured.
The neighbor IP address for a single hop BFD session must be in the ARP
table before BFD can start sending control packets.</p>
 </div>



<div class="notices note" > <p>You cannot specify BFD multihop sessions in the <code>topology.dot</code> file
since you cannot specify the source and destination IP address pairs in
that file. Use
<a href="/version/cumulus-linux-25esr/Layer-3-Features/Configuring-Quagga">Quagga</a>
to configure multihop sessions.</p>
 </div>


<h4 id="span-configuring-bfd-span"><span>Configuring BFD</span></h4>

<p>You configure BFD one of two ways: by specifying the configuration in
the <code>topology.dot</code> file, or using
<a href="/version/cumulus-linux-25esr/Layer-3-Features/Bidirectional-Forwarding-Detection---BFD">Quagga</a>.
However, the topology file has some limitations:</p>

<ul>
<li><p>The <code>topology.dot</code> file supports creating BFD IPv4 and IPv6 single
hop sessions only; you cannot specify IPv4 or IPv6 multihop sessions
in the topology file.</p></li>

<li><p>The topology file supports BFD sessions for only link-local IPv6
peers; BFD sessions for global IPv6 peers discovered on the link
will not be created.</p></li>
</ul>

<h4 id="span-echo-function-span"><span>Echo Function</span></h4>

<p>Cumulus Linux supports the <em>echo function</em> for IPv4 single hops only,
and with the a synchronous operating mode only (Cumulus Linux does not
support demand mode).</p>

<p>You use the echo function primarily to test the forwarding path on a
remote system. To enable the echo function, set <code>echoSupport</code> to 1 in
the topology file.</p>

<p>Once the echo packets are looped by the remote system, the BFD control
packets can be sent at a much lower rate. You configure this lower rate
by setting the <code>slowMinTx</code> parameter in the topology file to a non-zero
value of milliseconds.</p>

<p>You can use more aggressive detection times for echo packets since the
round-trip time is reduced because they are accessing the forwarding
path. You configure the detection interval by setting the <code>echoMinRx</code>
parameter in the topology file to a non-zero value of milliseconds; the
minimum setting is 50 milliseconds. Once configured, BFD control packets
are sent out at this required minimum echo Rx interval. This indicates
to the peer that the local system can loop back the echo packets. Echo
packets are transmitted if the peer supports receiving echo packets.</p>

<h5 id="span-about-the-echo-packet-span"><span>About the Echo Packet</span></h5>

<p>BFD echo packets are encapsulated into UDP packets over destination and
source UDP port number 3785. The BFD echo packet format is
vendor-specific and has not been defined in the RFC. BFD echo packets
that originate from Cumulus Linux are 8 bytes long and have the
following format:</p>

<table class="confluenceTable">

<thead class=" ">

</thead>

<tfoot class=" ">

</tfoot>

<tbody class=" ">

<tr>

<td class="confluenceTd" rowspan="1" colspan="1">

0

</td>

<td class="confluenceTd" rowspan="1" colspan="1">

1

</td>

<td class="confluenceTd" rowspan="1" colspan="1">

2

</td>

<td class="confluenceTd" rowspan="1" colspan="1">

3

</td>

</tr>

<tr>

<td class="confluenceTd" rowspan="1" colspan="1">

Version

</td>

<td class="confluenceTd" rowspan="1" colspan="1">

Length

</td>

<td class="confluenceTd" rowspan="1" colspan="2">

Reserved

</td>

</tr>

<tr>

<td class="confluenceTd" rowspan="1" colspan="4">

My Discriminator

</td>

</tr>

</tbody>

</table>

<p>Where:</p>

<ul>
<li><p><strong>Version</strong> is the version of the BFD echo packet.</p></li>

<li><p><strong>Length</strong> is the length of the BFD echo packet.</p></li>

<li><p><strong>My Discriminator</strong> is a non-zero value that uniquely identifies a
BFD session on the transmitting side. When the originating node
receives the packet after being looped back by the receiving system,
this value uniquely identifies the BFD session.</p></li>
</ul>

<h5 id="span-transmitting-and-receiving-echo-packets-span"><span>Transmitting and Receiving Echo Packets</span></h5>

<p>BFD echo packets are transmitted for a BFD session only when the peer
has advertised a non-zero value for the required minimum echo Rx
interval (the <code>echoMinRx</code> setting) in the BFD control packet when the
BFD session starts. The transmit rate of the echo packets is based on
the peer advertised echo receive value in the control packet.</p>

<p>BFD echo packets are looped back to the originating node for a BFD
session only if locally the <code>echoMinRx</code> and <code>echoSupport</code> are configured
to a non-zero values.</p>

<h5 id="span-using-echo-function-parameters-span"><span>Using Echo Function Parameters</span></h5>

<p>You configure the echo function by setting the following parameters in
the topology file at the global, template and port level:</p>

<ul>
<li><p><strong>echoSupport:</strong> Enables and disables echo mode. Set to 1 to enable
the echo function. It defaults to 0 (disable).</p></li>

<li><p><strong>echoMinRx:</strong> The minimum interval between echo packets the local
system is capable of receiving. This is advertised in the BFD
control packet. When the echo function is enabled, it defaults to</p>

<ol>
<li>If you disable the echo function, this parameter is
automatically set to 0, which indicates the port or the node cannot
process or receive echo packets.</li>
</ol></li>

<li><p><strong>slowMinTx:</strong> The minimum interval between transmitting BFD control
packets when the echo packets are being exchanged.</p></li>
</ul>

<p><span id="src-5116005_PrescriptiveTopologyManager-PTM-quagga"></span></p>

<h2 id="span-enabling-quagga-to-check-link-state-span"><span>Enabling Quagga to Check Link State</span></h2>

<p>The Quagga routing suite enables additional checks to ensure that
routing adjacencies are formed only on links that have connectivity
conformant to the specification, as determined by <code>ptmd</code>.</p>


<div class="notices note" > <p>You only need to do this to check link state; you don&rsquo;t need to enable
PTM to determine BFD status.</p>
 </div>


<p>To enable the check:</p>

<pre><code>quagga# conf t
quagga(config)# ptm-enable
quagga(config)#
</code></pre>

<p>To disable the checks:</p>

<pre><code>quagga# conf t
quagga(config)# no ptm-enable
quagga(config)#
</code></pre>

<p>When the <code>ptm-enable</code> flag is configured by the user, the <code>zebra</code> daemon
connects to <code>ptmd</code> over a Unix socket. Any time there is a change of
status for an interface, <code>ptmd</code> sends notifications to <code>zebra</code>. Zebra
maintains a <code>ptm-status</code> flag per interface and evaluates routing
adjacency based on this flag. To check the per-interface <code>ptm-status</code>:</p>

<pre><code>quagga# show interface swp1
Interface swp1 is up, line protocol is up
  PTM status: pass
  Description: T1
  index 3 metric 1 mtu 1500
  flags: &lt;UP,BROADCAST,RUNNING,MULTICAST&gt;
  HWaddr: 44:38:39:00:27:1d
  inet 192.0.2.1/31 broadcast 255.255.255.255
  inet6 2001:DB8::271d/64
quagga#
</code></pre>

<p><span id="src-5116005_PrescriptiveTopologyManager-PTM-ptmd_commands"></span></p>

<h2 id="span-using-ptmd-service-commands-span"><span>Using ptmd Service Commands</span></h2>

<p>PTM sends client notifications in CSV format.</p>

<p><code>cumulus@switch:~$ sudo service ptmd start|restart|force-reload</code>: Starts
or restarts the <code>ptmd</code> service. The <code>topology.dot</code> file must be present
in order for the service to start.</p>

<p><code>cumulus@switch:~$ sudo service ptmd reconfig</code>: Instructs <code>ptmd</code> to read
the <code>topology.dot</code> file again without restarting, applying the new
configuration to the running state.</p>

<p><code>cumulus@switch:~$ sudo service ptmd stop</code>: Stops the <code>ptmd</code> service.</p>

<p><code>cumulus@switch:~$ sudo service ptmd status</code>: Retrieves the current
running state of <code>ptmd</code>.</p>

<h2 id="span-using-ptmctl-commands-span"><span>Using ptmctl Commands</span></h2>

<p><code>ptmctl</code> is a client of <code>ptmd</code>; it retrieves the daemon’s operational
state. It connects to <code>ptmd</code> over a Unix socket and listens for
notifications. <code>ptmctl</code> parses the CSV notifications sent by <code>ptmd</code>.</p>

<p>See <code>man ptmctl</code> for more information.</p>

<h3 id="span-ptmctl-examples-span"><span>ptmctl Examples</span></h3>

<p>For basic output, use <code>ptmctl</code> without any options:</p>

<pre><code>cumulus@switch:~$ sudo ptmctl

-------------------------------------------------------------
port  cbl     BFD     BFD                  BFD    BFD       
      status  status  peer                 local  type      
-------------------------------------------------------------
swp1  pass    pass    11.0.0.2             N/A    singlehop 
swp2  pass    N/A     N/A                  N/A    N/A        
swp3  pass    N/A     N/A                  N/A    N/A  
</code></pre>

<p>For more detailed output, use the <code>-d</code> option:</p>

<pre><code>cumulus@switch:~$ sudo ptmctl -d

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
port  cbl    exp     act      sysname  portID  portDescr  match  last    BFD   BFD    BFD   BFD       det_mult  tx_timeout  rx_timeout  echo_tx_timeout  echo_rx_timeout  max_hop_cnt
      status nbr     nbr                                  on     upd     Type  state  peer  DownDiag
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
swp45 pass   h1:swp1 h1:swp1  h1       swp1    swp1       IfName 5m: 5s  N/A   N/A    N/A   N/A       N/A       N/A         N/A         N/A              N/A              N/A
swp46 fail   h2:swp1 h2:swp1  h2       swp1    swp1       IfName 5m: 5s  N/A   N/A    N/A   N/A       N/A       N/A         N/A         N/A              N/A              N/A
</code></pre>

<p>To return information on active BFD sessions <code>ptmd</code> is tracking, use the
<code>-b</code> option:</p>

<pre><code>cumulus@switch:~$ sudo ptmctl -b

----------------------------------------------------------
port  peer        state  local         type       diag 
                                                         
----------------------------------------------------------
swp1  11.0.0.2    Up     N/A           singlehop  N/A  
N/A   12.12.12.1  Up     12.12.12.4    multihop   N/A    
</code></pre>

<p>To return LLDP information, use the <code>-l</code> option. It returns only the
active neighbors currently being tracked by <code>ptmd</code>.</p>

<pre><code>cumulus@switch:~$ sudo ptmctl -l

---------------------------------------------
port  sysname  portID  port   match  last
                       descr  on     upd
---------------------------------------------
swp45 h1       swp1    swp1   IfName 5m:59s
swp46 h2       swp1    swp1   IfName 5m:59s 
</code></pre>

<p>To return detailed information on active BFD sessions <code>ptmd</code> is
tracking, use the <code>-b</code> and <code>-d</code> options (results are for an
IPv6-connected peer):</p>

<pre><code>cumulus@switch:~$ sudo ptmctl -b -d

-------------------------------------------------------------------------------------------------------------------------------------------------------------
port  peer                 state  local  type       diag  det   tx_timeout  rx_timeout  echo        echo        max      rx_ctrl  tx_ctrl  rx_echo  tx_echo 
                                                          mult                          tx_timeout  rx_timeout  hop_cnt                                     
-------------------------------------------------------------------------------------------------------------------------------------------------------------
swp1  fe80::202:ff:fe00:1  Up     N/A    singlehop  N/A   3     300         900         0           0           N/A      187172   185986   0        0       
swp1  3101:abc:bcad::2     Up     N/A    singlehop  N/A   3     300         900         0           0           N/A      501      533      0        0       
</code></pre>

<h3 id="span-ptmctl-error-outputs-span"><span>ptmctl Error Outputs</span></h3>

<p>If there are errors in the topology file or there isn’t a session, PTM
will return appropriate outputs. Typical error strings are:</p>

<pre><code>Topology file error [/etc/ptm.d/topology.dot] [cannot find node cumulus] -
please check /var/log/ptmd.log for more info

Topology file error [/etc/ptm.d/topology.dot] [cannot open file (errno 2)] -
please check /var/log/ptmd.log for more info

No Hostname/MgmtIP found [Check LLDPD daemon status] -
please check /var/log/ptmd.log for more info

No BFD sessions . Check connections

No LLDP ports detected. Check connections

Unsupported command
</code></pre>

<p>For example:</p>

<pre><code>cumulus@switch:~$ sudo ptmctl
-------------------------------------------------------------------------
cmd         error
-------------------------------------------------------------------------
get-status  Topology file error [/etc/ptm.d/topology.dot] [cannot open file (errno 2)] - please check /var/log/ptmd.log for more info
</code></pre>


<div class="notices tip" > <p>If you encounter errors with the <code>topology.dot</code> file, you can use <code>dot</code>
(included in the Graphviz package) to validate the syntax of the
topology file.</p>

<p>By simply opening the topology file with Graphviz, you can ensure that
it is readable and that the file format is correct.</p>

<p>If you edit <code>topology.dot</code> file from a Windows system, be sure to double
check the file formatting; there may be extra characters that keep the
graph from working correctly.</p>
 </div>


<h2 id="span-configuration-files-span"><span>Configuration Files</span></h2>

<ul>
<li><p>/etc/ptm.d/topology.dot</p></li>

<li><p>/etc/ptm.d/if-topo-pass</p></li>

<li><p>/etc/ptm.d/if-topo-fail</p></li>
</ul>

<h2 id="span-useful-links-span"><span>Useful Links</span></h2>

<ul>
<li><p><a href="http://tools.ietf.org/html/rfc5880" target="_blank">Bidirectional Forwarding Detection
(BFD)</a></p></li>

<li><p><a href="http://www.graphviz.org" target="_blank">Graphviz</a></p></li>

<li><p><a href="http://en.wikipedia.org/wiki/Link_Layer_Discovery_Protocol" target="_blank">LLDP on
Wikipedia</a></p></li>

<li><p><a href="https://github.com/CumulusNetworks/ptm" target="_blank">PTMd GitHub repo</a></p></li>
</ul>

<h2 id="span-caveats-and-errata-span"><span>Caveats and Errata</span></h2>

<ul>
<li><p>Prior to version 2.1, Cumulus Linux stored the <code>ptmd</code> configuration
files in <code>/etc/cumulus/ptm.d</code>. When you upgrade to version 2.1 or
later, all the existing <code>ptmd</code> files are copied from their original
location to <code>/etc/ptm.d</code> with a <code>dpkg-old</code> extension, except for
<code>topology.dot</code>, which gets copied to <code>/etc/ptm.d</code>.</p>

<p>If you customized the <code>if-topo-pass</code> and <code>if-topo-fail</code> scripts,
they are also copied to <code>dpkg-old</code>, and you must modify them so they
can parse the CSV output correctly.</p>

<p>Sample <code>if-topo-pass</code> and <code>if-topo-fail</code> scripts are available in
<code>/etc/ptm.d</code>. A sample <code>topology.dot</code> file is available in
<code>/usr/share/doc/ptmd/examples</code>.</p></li>
</ul>

<article id="html-search-results" class="ht-content" style="display: none;">

</article>

<footer id="ht-footer">

</footer>
</article>

      <script src="https://utteranc.es/client.js"
        repo="CumulusNetworks/docs-internal"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
      </script>

    </div>
    

      


  

    <aside class="book-toc fixed">

  
    <div class="toc">
    
      <button>
      <a href="https://github.com/CumulusNetworks/docs/edit/master/content/version/cumulus-linux-25esr/Layer-1-and-Layer-2-Features/Prescriptive-Topology-Manager---PTM.md" target="_blank" rel="noopener"><img src="/docs.cumulusnetworks.com/svg/pencil-circle.svg" alt="Edit" /> Edit this page</a>
      </button>
    
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#span-supported-features-span"><span>Supported Features</span></a></li>
<li><a href="#span-configuring-ptm-span"><span>Configuring PTM</span></a></li>
<li><a href="#span-basic-topology-example-span"><span>Basic Topology Example</span></a></li>
<li><a href="#span-advanced-ptm-configuration-span"><span>Advanced PTM Configuration</span></a>
<ul>
<li><a href="#span-scripts-span"><span>Scripts</span></a></li>
<li><a href="#span-configuration-parameters-span"><span>Configuration Parameters</span></a>
<ul>
<li><a href="#span-host-only-parameters-span"><span>Host-only Parameters</span></a></li>
<li><a href="#span-global-parameters-span"><span>Global Parameters</span></a></li>
<li><a href="#span-per-port-parameters-span"><span>Per-port Parameters</span></a></li>
<li><a href="#span-templates-span"><span>Templates</span></a></li>
<li><a href="#span-supported-bfd-and-lldp-parameters-span"><span>Supported BFD and LLDP Parameters</span></a></li>
</ul></li>
<li><a href="#span-bidirectional-forwarding-detection-bfd-span"><span>Bidirectional Forwarding Detection (BFD)</span></a>
<ul>
<li><a href="#span-configuring-bfd-span"><span>Configuring BFD</span></a></li>
<li><a href="#span-echo-function-span"><span>Echo Function</span></a>
<ul>
<li><a href="#span-about-the-echo-packet-span"><span>About the Echo Packet</span></a></li>
<li><a href="#span-transmitting-and-receiving-echo-packets-span"><span>Transmitting and Receiving Echo Packets</span></a></li>
<li><a href="#span-using-echo-function-parameters-span"><span>Using Echo Function Parameters</span></a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#span-enabling-quagga-to-check-link-state-span"><span>Enabling Quagga to Check Link State</span></a></li>
<li><a href="#span-using-ptmd-service-commands-span"><span>Using ptmd Service Commands</span></a></li>
<li><a href="#span-using-ptmctl-commands-span"><span>Using ptmctl Commands</span></a>
<ul>
<li><a href="#span-ptmctl-examples-span"><span>ptmctl Examples</span></a></li>
<li><a href="#span-ptmctl-error-outputs-span"><span>ptmctl Error Outputs</span></a></li>
</ul></li>
<li><a href="#span-configuration-files-span"><span>Configuration Files</span></a></li>
<li><a href="#span-useful-links-span"><span>Useful Links</span></a></li>
<li><a href="#span-caveats-and-errata-span"><span>Caveats and Errata</span></a></li>
</ul></li>
</ul>
</nav>
    </div>
  

</aside>






  </main>
  <footer class="footer-top">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="footer-content">
            <div class="mb-4">
                <img src="https://static.cumulusnetworks.com/static/images/shared/cumulus-networks-rt-white-trademarked.ff839f1b2570.svg">
                <p>© <script type="text/javascript">document.write(new Date().getFullYear());</script> Cumulus Networks.<br>
                Site by <a href="//unomena.com/" target="_blank">Unomena</a>.</p>
            </div>
            <ul class="mb-4">
              <li><h4>Products</h4></li>
              <li><a href="//cumulusnetworks.com/products/cumulus-linux/">Cumulus Linux</a></li>
              <li><a href="//cumulusnetworks.com/products/netq/">Cumulus NetQ</a></li>
              <li><a href="//cumulusnetworks.com/products/cumulus-express/">Cumulus Express</a></li>
            </ul>
            <ul class="mb-4">
              <li><h4>Learn</h4></li>
              <li><a href="//cumulusnetworks.com/learn/web-scale-networking-education/">Going web-scale</a></li>
              <li><a href="//cumulusnetworks.com/learn/events/">Events</a></li>
              <li><a href="//cumulusnetworks.com/blog/">Blog</a></li>
            </ul>
            <ul class="mb-4">
              <li><h4>About</h4></li>
              <li><a href="//cumulusnetworks.com/about/">Our story</a></li>
              <li><a href="//cumulusnetworks.com/about/careers/">Careers</a></li>
              <li><a href="//cumulusnetworks.com/about/media-coverage/">Media coverage</a></li>
              <li><a href="//docs.cumulusnetworks.com/" target="_blank">Tech docs</a></li>
              <li><a href="//cumulusnetworks.com/community/">Community</a></li>
            </ul>
            <ul>
              <li>
                <a href="//twitter.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M23 6.628l-2-.5 1-2-2.464.7A4.48 4.48 0 0 0 12 8.128v1c-3.539.73-6.634-1.2-9.5-4.5q-.75 4 1.5 6l-3-.5c.405 2.069 1.362 3.7 4 4l-2.5 1c1 2 2.566 2.31 5 2.5a10.748 10.748 0 0 1-6.5 2c12.755 5.669 20-2.664 20-10V8.3z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//www.facebook.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                      .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M17.768 7.5H13.5V5.6a.972.972 0 0 1 1.012-1.1c.418 0 2.988.01 2.988.01V.5h-4.329C9.244.5 8.5 3.474 8.5 5.355V7.5h-3v4h3v12h5v-12h3.851z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//linkedin.com/company/cumulus-networks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                      .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M6.5 22.5h-5v-13h5zm9-9a2 2 0 0 0-2 2v7h-5v-13h5v1.485a6.307 6.307 0 0 1 3.99-1.495c2.962 0 5.01 2.2 5.01 6.355V22.5h-5v-7a2 2 0 0 0-2-2zM6.5 5A2.5 2.5 0 1 1 4 2.5 2.5 2.5 0 0 1 6.5 5z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//vimeo.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M.5 7.393l.933 1.224S3.36 7.1 4 7.859s3.1 9.925 3.915 11.617c.714 1.483 2.684 3.444 4.845 2.042s9.34-7.529 10.626-14.769-8.642-5.723-9.693.583c2.627-1.577 4.03.642 2.686 3.154s-2.569 4.145-3.211 4.145-1.135-1.679-1.868-4.613c-.76-3.035-.755-8.5-3.911-7.882C4.412 2.721.5 7.393.5 7.393z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//www.github.com/cumulusnetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                        <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                        </style>
                    </defs>
                    <path class="a" d="M19.459 17c0-5.969-4.126-3.532-7.5-3.532s-7.5-2.375-7.5 3.532a3.5 3.5 0 0 0 3.5 3.5h8a3.5 3.5 0 0 0 3.5-3.5z"></path>
                    <path class="a" d="M21.489 10.214l.032.023s2.646-4.572-.6-7.237c-2 0-5.058 3.3-5.058 3.3l.022.016A14.152 14.152 0 0 0 8.1 6.3C8.083 6.285 5.037 3 3.042 3c-3.173 2.6-.729 7.012-.614 7.217a8.876 8.876 0 0 0-1.395 5.743c.241 3.126 2.847 6.54 5.982 6.54H16.9c3.135 0 5.742-3.414 5.982-6.54a8.857 8.857 0 0 0-1.393-5.746z"></path>
                    <ellipse class="a" cx="15.48" cy="17" rx="1" ry="1.5"></ellipse>
                    <ellipse class="a" cx="8.48" cy="17" rx="1" ry="1.5"></ellipse>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//slack.cumulusnetworks.com/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                        <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                        </style>
                    </defs>
                    <rect class="a" x=".5" y=".5" width="23" height="23" rx="6" ry="6"></rect>
                    <circle class="a" cx="12" cy="12" r="6"></circle>
                    <circle class="a" cx="19" cy="5" r="1.5"></circle>
                  </svg>
                </a>
              </li>
              <li>
                <p>Cumulus Networks<sup>®</sup> — Data center networking software for the open, modern data center.</p>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <div class="footer-bottom">
      <div class="container">
          <div class="row">
              <div class="col-12">
                  <ul>
                      <li><a href="//cumulusnetworks.com/legal/trademarks/">Trademarks</a></li>
                      <li><a href="//cumulusnetworks.com/legal/privacy/">Privacy</a></li>
                      <li><a href="//cumulusnetworks.com/legal/">Terms of service</a></li>
                  </ul>
              </div>
          </div>
      </div>
  </div>

  
  

</body>

</html>
