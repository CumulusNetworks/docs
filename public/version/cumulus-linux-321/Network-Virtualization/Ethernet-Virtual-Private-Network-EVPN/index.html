<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Ethernet Virtual Private Network - EVPN | Cumulus Networks Documentation</title>

  
  <link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet">

  
  
  
  <link rel="stylesheet" href="/docs.cumulusnetworks.com/book.min.a378d8a2da6f5357a83a43dff33d6f77fb70401e0399d5ba78faf81d7a1ae1a8.css">

  
  <link rel="icon" href="/docs.cumulusnetworks.com/icons/favicon.png" type="image/x-icon">

  
  <!--
  Made with Book Theme
  https://github.com/alex-shpak/hugo-book
  -->

  
  
  <script src = "/docs.cumulusnetworks.com/js/codecopy.js"> </script>

</head>


<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  
  <header id="site-nav">
    <div class="header-wrapper flex">
      <a href="/">
        <img src="/header-logo.png" alt="Cumulus Networks">
        <img src="/cumulus-networks-rt-white.svg" alt="Cumulus Networks" class="header-mobile">
        <span>Docs</span>
      </a>
      <ul class="flex">
        <li><a href="//cumulusnetworks.com">HOME</a></li>
        <li><a href="//support.cumulusnetworks.com/">SUPPORT</a></li>
        <li><a href="//docs.cumulusnetworks.com/">DOCS</a></li>
        <li><a href="//education.cumulusnetworks.com">EDUCATION</a></li>
        <li><a href="//cumulusnetworks.com/blog/">BLOG</a></li>
        <li><a href="//forums.cumulusnetworks.com/">FORUMS</a></li>
      </ul>
      <div class="burger-menu">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </header>
  <div id="product-nav" class="flex">
      
    
    <ul>
    
      <li class = "active" ><a href = docs.cumulusnetworks.com/cumulus-linux/ >
        Cumulus Linux </a> </li>
    
      <li><a href = docs.cumulusnetworks.com/cumulus-netq/ >
        Cumulus NetQ </a> </li>
    
      <li><a href = docs.cumulusnetworks.com/cumulus-vx/ >
        Cumulus VX </a> </li>
    
      <li>
        <div id="products-dropdown" class="dropdown">
            <button class="btn" type="button" id="dropdownMenuButton">
              Products
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <a class="dropdown-item" href="">Cumulus RMP</a>
              <a class="dropdown-item" href="">Cumulus Chassis</a>
              <a class="dropdown-item" href="">Cumulus Host Pack</a>
            </div>
        </div>
      </li>
    </ul>
    <div class="search-container">
      <div id="doc-search-box">
        <input type="text" class="doc-search-input" placeholder="Search" value="">
        <span><button type="submit"><img src="/icons/search_20x20.svg" alt=""></button></span>
      </div>
      <div id="dropdown" class="dropdown">
          <button class="btn" type="button" id="dropdownMenuButton">
            v3.2.1
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/cumulus-linux/"> v3.7.7</a>
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-25esr/"> v2.5.12</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-30/"> v3.0.1</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-31/"> v3.1.2</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-321/"> v3.2.1</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-330/"> v3.3.0</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-332/"> v3.3.2</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-343/"> v3.4.3</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-35/"> v3.5</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-linux-36/"> v3.6</a>
            
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
          </div>
      </div>
    </div>
  </div>
  <main class="flex container">
    <aside class="book-menu fixed">

      <nav role="navigation">
        <h2 class="book-brand">
          <a href="docs.cumulusnetworks.com">Cumulus Networks Documentation</a>
        </h2>
        
        




  <ul class = "cn-book-section-container" id = "top">
    
        
          
      
          
      
          
      
          
            

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/" >
    Cumulus Linux User Guide
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Installation-Management/" >
    Installation Management
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Installation-Management/Managing-Cumulus-Linux-Disk-Images/" >
    Managing Cumulus Linux Disk Images
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Installation-Management/Managing-Cumulus-Linux-Disk-Images/Installing-a-New-Cumulus-Linux-Image/" >
    Installing a New Cumulus Linux Image
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Installation-Management/Managing-Cumulus-Linux-Disk-Images/Upgrading-Cumulus-Linux/" >
    Upgrading Cumulus Linux
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Installation-Management/Managing-Cumulus-Linux-Disk-Images/Using-Snapshots/" >
    Using Snapshots
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Installation-Management/Adding-and-Updating-Packages/" >
    Adding and Updating Packages
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Installation-Management/Zero-Touch-Provisioning-ZTP/" >
    Zero Touch Provisioning - ZTP
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/System-Configuration/" >
    System Configuration
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/System-Configuration/Authentication-Authorization-and-Accounting/" >
    Authentication, Authorization, and Accounting
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/System-Configuration/Authentication-Authorization-and-Accounting/SSH-for-Remote-Access/" >
    SSH for Remote Access
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/System-Configuration/Authentication-Authorization-and-Accounting/User-Accounts/" >
    User Accounts
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/System-Configuration/Authentication-Authorization-and-Accounting/Using-sudo-to-Delegate-Privileges/" >
    Using sudo to Delegate Privileges
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/System-Configuration/Authentication-Authorization-and-Accounting/LDAP-Authentication-and-Authorization/" >
    LDAP Authentication and Authorization
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/System-Configuration/Authentication-Authorization-and-Accounting/TACACS-Plus/" >
    TACACS Plus
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/System-Configuration/Netfilter-ACLs/" >
    Netfilter - ACLs
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/System-Configuration/Netfilter-ACLs/Default-Cumulus-Linux-ACL-Configuration/" >
    Default Cumulus Linux ACL Configuration
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/System-Configuration/Network-Command-Line-Utility/" >
    Network Command Line Utility
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/System-Configuration/Setting-Date-and-Time/" >
    Setting Date and Time
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/System-Configuration/Managing-Application-Daemons/" >
    Managing Application Daemons
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/System-Configuration/Configuring-switchd/" >
    Configuring switchd
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/System-Configuration/Power-over-Ethernet-PoE/" >
    Power over Ethernet - PoE
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/System-Configuration/Configuring-a-Global-Proxy/" >
    Configuring a Global Proxy
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Interface-Configuration-and-Management/" >
    Interface Configuration and Management
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Interface-Configuration-and-Management/Buffer-and-Queue-Management/" >
    Buffer and Queue Management
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Interface-Configuration-and-Management/Buffer-and-Queue-Management/Configuring-Hardware-enabled-DDOS-Protection/" >
    Configuring Hardware-enabled DDOS Protection
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Interface-Configuration-and-Management/Layer-1-and-Switch-Port-Attributes/" >
    Layer 1 and Switch Port Attributes
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Interface-Configuration-and-Management/Configuring-DHCP-Relays/" >
    Configuring DHCP Relays
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Interface-Configuration-and-Management/Configuring-DHCP-Servers/" >
    Configuring DHCP Servers
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-One-and-Two/" >
    Layer One and Two
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-One-and-Two/Ethernet-Bridging-VLANs/" >
    Ethernet Bridging - VLANs
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-One-and-Two/Ethernet-Bridging-VLANs/VLAN-aware-Bridge-Mode-for-Large-scale-Layer-2-Environments/" >
    VLAN-aware Bridge Mode for Large-scale Layer 2 Environments
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-One-and-Two/Ethernet-Bridging-VLANs/Traditional-Mode-Bridges/" >
    Traditional Mode Bridges
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-One-and-Two/Ethernet-Bridging-VLANs/VLAN-Tagging/" >
    VLAN Tagging
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-One-and-Two/Virtual-Router-Redundancy-VRR/" >
    Virtual Router Redundancy - VRR
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-One-and-Two/Virtual-Router-Redundancy-VRR/ifplugd/" >
    ifplugd
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-One-and-Two/Spanning-Tree-and-Rapid-Spanning-Tree/" >
    Spanning Tree and Rapid Spanning Tree
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-One-and-Two/Link-Layer-Discovery-Protocol/" >
    Link Layer Discovery Protocol
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-One-and-Two/Prescriptive-Topology-Manager-PTM/" >
    Prescriptive Topology Manager - PTM
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-One-and-Two/Bonding-Link-Aggregation/" >
    Bonding - Link Aggregation
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-One-and-Two/Multi-Chassis-Link-Aggregation-MLAG/" >
    Multi-Chassis Link Aggregation - MLAG
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-One-and-Two/LACP-Bypass/" >
    LACP Bypass
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-One-and-Two/IGMP-and-MLD-Snooping/" >
    IGMP and MLD Snooping
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Network-Virtualization/" >
    Network Virtualization
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Network-Virtualization/Lightweight-Network-Virtualization-LNV-Overview/" >
    Lightweight Network Virtualization - LNV Overview
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Network-Virtualization/Lightweight-Network-Virtualization-LNV-Overview/LNV-VXLAN-Active-Active-Mode/" >
    LNV VXLAN Active-Active Mode
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Network-Virtualization/Lightweight-Network-Virtualization-LNV-Overview/LNV-Full-Example/" >
    LNV Full Example
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Network-Virtualization/Integrating-with-VMware-NSX/" >
    Integrating with VMware NSX
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Network-Virtualization/Integrating-Hardware-VTEPs-with-Midokura-MidoNet-and-OpenStack/" >
    Integrating Hardware VTEPs with Midokura MidoNet and OpenStack
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Network-Virtualization/Static-MAC-Bindings-with-VXLAN/" >
    Static MAC Bindings with VXLAN
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Network-Virtualization/Ethernet-Virtual-Private-Network-EVPN/"  class="active" >
    Ethernet Virtual Private Network - EVPN
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Network-Virtualization/VXLAN-Hyperloop/" >
    VXLAN Hyperloop
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Network-Virtualization/Static-VXLAN-Tunnels/" >
    Static VXLAN Tunnels
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-Three/" >
    Layer Three
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-Three/Configuring-Quagga/" >
    Configuring Quagga
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-Three/Configuring-Quagga/Comparing-NCLU-and-vtysh-Commands/" >
    Comparing NCLU and vtysh Commands
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-Three/Routing/" >
    Routing
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-Three/Introduction-to-Routing-Protocols/" >
    Introduction to Routing Protocols
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-Three/Network-Topology/" >
    Network Topology
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-Three/Quagga-Overview/" >
    Quagga Overview
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-Three/Open-Shortest-Path-First-OSPF-Protocol/" >
    Open Shortest Path First - OSPF - Protocol
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-Three/Open-Shortest-Path-First-v3-OSPFv3-Protocol/" >
    Open Shortest Path First v3 - OSPFv3 - Protocol
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-Three/Border-Gateway-Protocol-BGP/" >
    Border Gateway Protocol - BGP
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-Three/Bidirectional-Forwarding-Detection-BFD/" >
    Bidirectional Forwarding Detection - BFD
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-Three/Equal-Cost-Multipath-Load-Sharing-Hardware-ECMP/" >
    Equal Cost Multipath Load Sharing - Hardware ECMP
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-Three/Redistribute-Neighbor/" >
    Redistribute Neighbor
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-Three/Virtual-Routing-and-Forwarding-VRF/" >
    Virtual Routing and Forwarding - VRF
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-Three/Management-VRF/" >
    Management VRF
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Layer-Three/Protocol-Independent-Multicast-PIM/" >
    Protocol Independent Multicast - PIM
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/" >
    Monitoring and Troubleshooting
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/Monitoring-System-Hardware/" >
    Monitoring System Hardware
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/Monitoring-System-Hardware/Network-Switch-Port-LED-and-Status-LED-Guidelines/" >
    Network Switch Port LED and Status LED Guidelines
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/Understanding-the-cl-support-Output-File/" >
    Understanding the cl-support Output File
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/Understanding-the-cl-support-Output-File/Troubleshooting-Log-Files/" >
    Troubleshooting Log Files
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/Understanding-the-cl-support-Output-File/Troubleshooting-the-etc-Directory/" >
    Troubleshooting the etc Directory
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/Troubleshooting-Network-Interfaces/" >
    Troubleshooting Network Interfaces
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/Troubleshooting-Network-Interfaces/Monitoring-Interfaces-and-Transceivers-Using-ethtool/" >
    Monitoring Interfaces and Transceivers Using ethtool
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/Network-Troubleshooting/" >
    Network Troubleshooting
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/Network-Troubleshooting/Using-NCLU-to-Troubleshoot-Your-Network-Configuration/" >
    Using NCLU to Troubleshoot Your Network Configuration
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/Network-Troubleshooting/Monitoring-System-Statistics-and-Network-Traffic-with-sFlow/" >
    Monitoring System Statistics and Network Traffic with sFlow
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/Network-Troubleshooting/Using-netq-to-Troubleshoot-the-Network/" >
    Using netq to Troubleshoot the Network
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/SNMP-Monitoring/" >
    SNMP Monitoring
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/SNMP-Monitoring/Using-Nutanix-Prism-as-a-Monitoring-Tool/" >
    Using Nutanix Prism as a Monitoring Tool
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/Single-User-Mode-Boot-Recovery/" >
    Single User Mode - Boot Recovery
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/Resource-Diagnostics-Using-cl-resource-query/" >
    Resource Diagnostics Using cl-resource-query
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/Monitoring-Virtual-Device-Counters/" >
    Monitoring Virtual Device Counters
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Monitoring-and-Troubleshooting/Monitoring-Best-Practices/" >
    Monitoring Best Practices
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Network-Solutions/" >
    Network Solutions
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Network-Solutions/Data-Center-Host-to-ToR-Architecture/" >
    Data Center Host to ToR Architecture
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Network-Solutions/Cumulus-Networks-Services-Demos/" >
    Cumulus Networks Services Demos
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Network-Solutions/Docker-on-Cumulus-Linux/" >
    Docker on Cumulus Linux
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Network-Solutions/OpenStack-Neutron-ML2-and-Cumulus-Linux/" >
    OpenStack Neutron ML2 and Cumulus Linux
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Network-Solutions/Anycast-Design-Guide/" >
    Anycast Design Guide
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Quick-Start-Guide/" >
    Quick Start Guide
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-linux-321/Cumulus-Linux-Index/" >
    Cumulus Linux Index
  </a>


    </li>
    
  </ul>


  </li>


          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
    
  </ul>









      </nav>

      
      
      
      

      <script src = "/docs.cumulusnetworks.com/js/menuBundle.js"> </script>


    </aside>

    <div class="book-page">

      
      <header class="align-center justify-between book-header">
        <label for="menu-control">
          <img src="/docs.cumulusnetworks.com/svg/menu.svg" alt="Menu" />
        </label>
        <strong>Ethernet Virtual Private Network - EVPN</strong>
      </header>

      
      
<div class= "notices info" id = "info" >
    This documentation is for an older version of the software. If you are using the current version of Cumulus Linux, this content may not be up to date. The current version of the documentation is available [here](https://docs.cumulusnetworks.com/).
  </div>
<article class="markdown">
<h1>Ethernet Virtual Private Network - EVPN</h1>


<div class="notices note" > <p>EVPN requires Cumulus Linux version 3.2.1 or newer.</p>
 </div>



<div class="notices warning" > <p>Only VNI values less than 65535 are supported.</p>
 </div>


<p>Ethernet Virtual Private Network (EVPN) provides a control plane for
<a href="/version/cumulus-linux-321/Network-Virtualization/">VXLANs</a> in Cumulus
Linux, with the following functionality:</p>

<ul>
<li><p>VNI membership exchange between VTEPs using the EVPN type-3
(Inclusive Multicast Ethernet Tag) route.</p></li>

<li><p>Exchange of MACs learned on local bridge ports using the EVPN type-2
(MAC/IP Advertisement) route.</p></li>

<li><p>Support for MAC mobility through exchange of the MAC Mobility
Extended community.</p></li>

<li><p>Support for dual-attached hosts via VXLAN active-active mode; note
that MAC synchronization between the peer switches is done using
<a href="/version/cumulus-linux-321/Layer-One-and-Two/Multi-Chassis-Link-Aggregation---MLAG">MLAG</a>.</p></li>
</ul>

<h2 id="span-installing-the-evpn-package-span"><span>Installing the EVPN Package</span></h2>


<div class="notices note" > <p>Any existing EVPN configuration on the system should be deleted prior to
installing this version of EVPN.</p>
 </div>



<div class="notices note" > <p>Before proceeding, ensure the version of Cumulus Linux is 3.2.1 or
higher.</p>
 </div>


<p>To install EVPN on a switch:</p>

<ol>
<li><p>Open the <code>/etc/apt/sources.list</code> file in a text editor.</p></li>

<li><p>Uncomment the early access repo lines and save the file:</p>

<pre><code>#deb        http://repo3.cumulusnetworks.com/repo CumulusLinux-3-early-access cumulus
#deb-src    http://repo3.cumulusnetworks.com/repo CumulusLinuz-3-early-access cumulus
</code></pre>


<div class="notices info" > <pre><code>EVPN has been engineered and tested to be production-ready. However,
as EVPN was made Generally Available (GA) post Cumulus Linux 3.2.1
release, the packages have been left in the Early Access (EA)
repository to create minimal end-user disruption, and to ease
deployment and upgrade processes. These packages will be moved to
the main repository in an upcoming release, and will ship as part of
the base image.
</code></pre>
 </div>
</li>

<li><p>Run the following commands to install the EVPN package in Cumulus
Linux:</p>

<pre><code>cumulus@switch:~$ sudo apt-get update
cumulus@switch:~$ sudo apt-get install cumulus-evpn
cumulus@switch:~$ sudo apt-get upgrade
</code></pre></li>

<li><p>Check your Quagga version using the <code>dpkg -l quagga</code> command. Please
make sure you are running version 1.0.0+cl3eau8 or newer.</p>

<pre><code>cumulus@leaf01:~$ dpkg -l quagga
Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)
||/ Name                     Version           Architecture      Description
+++-========================-=================-=================-=====================================================
ii  quagga                    1.0.0+cl3eau8    amd64             BGP/OSPF/RIP routing daemon
</code></pre></li>
</ol>

<h2 id="span-enabling-quagga-span"><span>Enabling Quagga</span></h2>

<p><a href="/version/cumulus-linux-321/Layer-Three/Configuring-Quagga/">Quagga</a>
needs to be enabled prior to using EVPN.</p>

<ol>
<li><p>Open <code>/etc/quagga/daemons</code> file in a text editor:</p>

<pre><code>cumulus@switch:~$ sudo nano /etc/quagga/daemons
</code></pre></li>

<li><p>Change the <em>no</em> to <em>yes</em> for <code>zebra</code> and <code>bgpd</code>, then save the file:</p>

<pre><code>zebra=yes
bgpd=yes
</code></pre></li>

<li><p>Enable and start Quagga using the <code>systemctl</code> commands:</p>

<pre><code>cumulus@switch:~$ sudo systemctl enable quagga.service
cumulus@switch:~$ sudo systemctl start quagga.service
</code></pre></li>
</ol>

<h2 id="span-configuring-evpn-span"><span>Configuring EVPN</span></h2>

<h3 id="span-enabling-evpn-between-bgp-neighbors-span"><span>Enabling EVPN between BGP Neighbors</span></h3>

<p>You enable EVPN between
<a href="/version/cumulus-linux-321/Layer-Three/Border-Gateway-Protocol---BGP">BGP</a>
neighbors by adding the address family <em>evpn</em> to the existing neighbor
address-family activation command.</p>

<p>For a non-VTEP device, such as a spine switch, that is merely
participating in EVPN route exchange (as in, the network deployment uses
hop-by-hop eBGP or the switch is acting as an iBGP route reflector),
activating the interface for the EVPN address family is the only
configuration needed.</p>

<p>This command does not result in BGP knowing about the local VNIs defined
on the system and advertising them to peers. This requires additional
configuration, as described below.</p>

<p>EVPN supports the configuration of only these two BGP neighbor
address-family-specific configurations: <code>allowas-in</code> and
<code>route-reflector-client</code>.</p>

<p>To configure an EVPN route exchange with a BGP peer, the peer or
peer-group must be activated within the EVPN address-family in Quagga:</p>

<pre><code>router bgp 65000
 address-family evpn
  neighbor swp1 activate
</code></pre>

<h3 id="span-enabling-evpn-in-an-ibgp-environment-with-an-ospf-underlay-span"><span>Enabling EVPN in an iBGP Environment with an OSPF Underlay</span></h3>

<p>EVPN can be deployed with an
<a href="/version/cumulus-linux-321/Layer-Three/Open-Shortest-Path-First---OSPF---Protocol">OSPF</a>
or static route underlay if needed. This is a more complex configuration
than using eBGP. In this case, iBGP advertises EVPN routes directly
between VTEPs, and the spines are unaware of EVPN or BGP.</p>

<p>The leaf switches peer with each other in a full mesh within the EVPN
address family without using route reflectors. The leafs generally peer
to their loopback addresses, which are advertised in OSPF. The receiving
VTEP imports routes into a specific VNI with a matching route target
community.</p>

<pre><code>interface lo
 ip ospf area 0.0.0.0
!
interface swp50
 ip ospf area 0.0.0.0
 ip ospf network point-to-point
 
interface swp51
 ip ospf area 0.0.0.0
 ip ospf network point-to-point
!
router bgp 65020
 neighbor 10.1.1.2 remote-as internal
 neighbor 10.1.1.3 remote-as internal
 neighbor 10.1.1.4 remote-as internal
 !
 address-family evpn
  neighbor 10.1.1.2 activate
  neighbor 10.1.1.3 activate
  neighbor 10.1.1.4 activate
  advertise-all-vni
 exit-address-family
 !
Router ospf
    Ospf router-id 10.1.1.1
    Passive-interface lo
</code></pre>

<h3 id="span-advertising-all-vnis-span"><span>Advertising All VNIs</span></h3>

<p>A single configuration variable enables the BGP control plane for all
VNIs configured on the switch. Set the variable <code>advertise-all-vni</code> to
provision all locally configured VNIs to be advertised by the BGP
control plane. Quagga is not aware of any local VNIs and MACs associated
with that VNI until <code>advertise-all-vni</code> is configured.</p>


<div class="notices note" > <p>This configuration is only needed on leaf switches that are VTEPs.</p>
 </div>


<pre><code>router bgp 65000
 address-family evpn
  neighbor swp1 activate
  advertise-all-vni
</code></pre>


<div class="notices note" > <p>EVPN routes received from a BGP peer do get accepted, even without
<code>advertise-all-vni</code> configured. These routes are maintained in the
global EVPN routing table. However, they only become effective (that is,
imported into the per-VNI routing table and appropriate entries
installed in the kernel) when the VNI corresponding to the received
route is locally known.</p>
 </div>


<h3 id="span-enabling-evpn-with-route-distinguishers-rds-and-route-targets-rts-span"><span>Enabling EVPN with Route Distinguishers (RDs) and Route Targets (RTs)</span></h3>

<p>EVPN can be provisioned with RDs and RTs either by automatically
configuring them, or by manually defining them. In each case, the
<code>advertise-vni</code> option is used on each VTEP (as shown in the example
configuration section described later in this chapter).</p>

<p>VNIs can be configured in Quagga either prior to or after enabling EVPN
to advertise all VNIs (through <code>advertise-all-vni</code>, as described above).
When a local VNI is learned and there is no explicit configuration for
that VNI, the route distinguisher (RD) and import and export route
targets (RTs) for this VNI are automatically derived — the RD uses
“RouterId:VNI” and both RTs use “AS:VNI”.</p>

<p>For eBGP EVPN peering, since the peers are in a different AS, using an
automatic RT of &ldquo;AS:VNI&rdquo; does not work for route import. Thus, the
import RT is actually treated as &ldquo;*:VNI&rdquo; for determining which received
routes are applicable to a particular VNI. This only applies when the
import RT is auto-derived and not configured.</p>

<h4 id="span-enabling-evpn-with-automatic-rds-and-rts-span"><span>Enabling EVPN with Automatic RDs and RTs</span></h4>

<p>The <code>advertise-all-vni</code> option is sufficient for provisioning EVPN with
RDs and RTs:</p>

<pre><code>router bgp 65000
 address-family evpn
  neighbor swp1 activate
  advertise-all-vni
</code></pre>

<h4 id="span-enabling-evpn-with-user-defined-rds-and-rts-for-some-vnis-span"><span>Enabling EVPN with User-defined RDs and RTs for Some VNIs</span></h4>

<p>To manually define RDs and RTs, use the <code>vni</code> option to configure the
switch:</p>

<pre><code>router bgp 65100
 address-family evpn
  neighbor SPINE activate
  advertise-vni
  vni 10200
   rd 172.16.10.1:20
   route-target import 65100:20
</code></pre>


<div class="notices note" > <p>These commands are per VNI and must be specified under <code>address-family
evpn</code> in BGP.</p>
 </div>



<div class="notices note" > <p>If you delete the RD or RT later, it reverts back to its corresponding
default value.</p>
 </div>


<h3 id="span-disabling-data-plane-mac-learning-over-vxlan-tunnels-span"><span>Disabling Data Plane MAC Learning over VXLAN Tunnels</span></h3>

<p>When EVPN is provisioned, data plane MAC learning should be disabled for
VxLAN interfaces to avoid race conditions between control plane learning
and data plane learning. In the <code>/etc/network/interfaces</code> file,
configure the <code>bridge-learning</code> value to <em>off</em>:</p>

<pre><code>auto vxlan200
iface vxlan200
    vxlan-id 10200
    vxlan-local-tunnelip 10.0.0.1
    bridge-learning off
    bridge-access 200
</code></pre>

<h2 id="span-handling-bum-traffic-span"><span>Handling BUM Traffic</span></h2>

<p>With EVPN, the only method of handling BUM traffic is <a href="Lightweight-Network-Virtualization---LNV-Overview.html#src-5126910_LightweightNetworkVirtualization-LNVOverview-head-end" target="_blank">Head End
Replication
(HER)</a>.
HER is enabled by default, as it is when <a href="/display/CL321/Lightweight+Network+Virtualization+-+LNV+Overview">Lightweight Network
Virtualization
(LNV)</a>
is used.</p>

<h2 id="span-evpn-and-vxlan-active-active-mode-span"><span>EVPN and VXLAN Active-Active Mode</span></h2>

<p>There is no specific configuration to enable EVPN to work with VXLAN
active-active mode. Both switches in the MLAG pair establish EVPN
peering with other EVPN speakers (for example, with spine switches, if
using hop-by-hop eBGP) and inform about their locally known VNIs and
MACs. When MLAG is active, both switches announce this information with
the shared anycast IP address.</p>

<p>MLAG syncs information between the two switches in the MLAG pair, EVPN
does not synchronize. Therefore, Cumulus Networks recommends you do not
configure EVPN peering between the MLAG switches over the peerlink.</p>

<h2 id="span-example-configuration-span"><span>Example Configuration</span></h2>

<p>The following configurations are used throughout this chapter. You can
find the flat-file configurations for the network devices in the Cumulus
Networks <a href="https://github.com/CumulusNetworks/cldemo-evpn/tree/master/config" target="_blank">GitHub
repository</a>.
Only a subset is shown here for brevity (not shown are configurations
for leaf03, leaf04, server03, server04). Here is the topology diagram:</p>








<img class = "confluence-embedded-image" src = "/images/download/attachments/5126939/evpn.png" alt = "/images/download/attachments/5126939/evpn.png"

height = 250


 />


<h3 id="span-leaf01-and-leaf02-configurations-span"><span>leaf01 and leaf02 Configurations</span></h3>

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><details>
<summary>leaf01 /etc/network/interfaces </summary>
<pre><code>auto lo
iface lo inet loopback
    alias loopback
    address 10.0.0.11/32
    clagd-vxlan-anycast-ip 10.10.10.20
 
auto eth0
iface eth0 inet dhcp
 
# uplinks
auto swp51
iface swp51
 
auto swp52
iface swp52
 
#host connections
auto swp1
iface swp1
 
auto server01
iface server01
  alias server01 MLAG bond
  bond-slaves swp1
  clag-id 1
 
auto peerlink
iface peerlink
  alias MLAG peerlink bond
  bond-slaves swp49 swp50
 
auto peerlink.4094
iface peerlink.4094
  address 169.254.1.1/30
  clagd-peer-ip 169.254.1.2
  clagd-backup-ip 192.168.200.12
  clagd-sys-mac 44:38:39:FF:40:94
 
auto bridge
iface bridge
    bridge-ports server01 peerlink vxlan10001 vxlan10100 vxlan10200
    bridge-vlan-aware yes
    bridge-vids 1 100 200
    bridge-pvid 1
 
auto vxlan10001
iface vxlan10001
    vxlan-id 10001
    vxlan-local-tunnelip 10.0.0.11
    bridge-access 1
    bridge-learning off
 
auto vxlan10100
iface vxlan10100
     vxlan-id 10100
     vxlan-local-tunnelip 10.0.0.11
     bridge-access 100
     bridge-learning off
 
auto vxlan10200
iface vxlan10200
     vxlan-id 10200
     vxlan-local-tunnelip 10.0.0.11
     bridge-access 200
     bridge-learning off</code></pre>
</details></td>
<td><details>
<summary>leaf02 /etc/network/interfaces </summary>
<pre><code>auto lo
iface lo inet loopback
    alias loopback
    address 10.0.0.12/32
    clagd-vxlan-anycast-ip 10.10.10.20
 
auto eth0
iface eth0 inet dhcp
 
# uplinks
auto swp51
iface swp51
 
auto swp52
iface swp52
 
#host connections
auto swp1
iface swp1
 
auto server01
iface server01
  alias server01 MLAG bond
  bond-slaves swp1
  clag-id 1
 
auto peerlink
iface peerlink
  alias MLAG peerlink bond
  bond-slaves swp49 swp50
 
auto peerlink.4094
iface peerlink.4094
  address 169.254.1.2/30
  clagd-peer-ip 169.254.1.1
  clagd-backup-ip 192.168.200.11
  clagd-sys-mac 44:38:39:FF:40:94
 
auto bridge
iface bridge
    bridge-ports server01 peerlink vxlan10001 vxlan10100 vxlan10200
    bridge-vlan-aware yes
    bridge-vids 1 100 200
    bridge-pvid 1
 
auto vxlan10001
iface vxlan10001
    vxlan-id 10001
    vxlan-local-tunnelip 10.0.0.12
    bridge-access 1
    bridge-learning off
 
auto vxlan10100
iface vxlan10100
     vxlan-id 10100
     vxlan-local-tunnelip 10.0.0.12
     bridge-access 100
     bridge-learning off
 
auto vxlan10200
iface vxlan10200
     vxlan-id 10200
     vxlan-local-tunnelip 10.0.0.12
     bridge-access 200
     bridge-learning off</code></pre>
</details></td>
</tr>
<tr class="even">
<td><details>
<summary>leaf01 /etc/quagga/Quagga.conf </summary>
<pre><code>!
interface swp51
 ipv6 nd ra-interval 10
 no ipv6 nd suppress-ra
!
interface swp52
 ipv6 nd ra-interval 10
 no ipv6 nd suppress-ra
!
router bgp 65011
 bgp router-id 10.0.0.11
 bgp bestpath as-path multipath-relax
 neighbor FABRIC peer-group
 neighbor FABRIC remote-as external
 neighbor FABRIC description Internal FABRIC Network
 neighbor FABRIC capability extended-nexthop
 neighbor swp51 interface peer-group FABRIC
 neighbor swp52 interface peer-group FABRIC
 !
 address-family ipv4 unicast
  network 10.0.0.11/32
  network 10.10.10.20/32
 exit-address-family
 !
!
 address-family ipv6 unicast
  neighbor FABRIC activate
 exit-address-family
 !
 address-family evpn
  neighbor FABRIC activate
  advertise-all-vni
 exit-address-family
 exit
!
line vty
!
end</code></pre>
</details></td>
<td><details>
<summary>leaf02 /etc/quagga/Quagga.conf </summary>
<pre><code>!
interface swp51
 ipv6 nd ra-interval 10
 no ipv6 nd suppress-ra
!
interface swp52
 ipv6 nd ra-interval 10
 no ipv6 nd suppress-ra
!
router bgp 65012
 bgp router-id 10.0.0.12
 bgp bestpath as-path multipath-relax
 neighbor FABRIC peer-group
 neighbor FABRIC remote-as external
 neighbor FABRIC description Internal FABRIC Network
 neighbor FABRIC capability extended-nexthop
 neighbor swp51 interface peer-group FABRIC
 neighbor swp52 interface peer-group FABRIC
 !
 address-family ipv4 unicast
  network 10.0.0.12/32
  network 10.10.10.20/32
 exit-address-family
 !
!
 address-family ipv6 unicast
  neighbor FABRIC activate
 exit-address-family
 !
 address-family evpn
  neighbor FABRIC activate
  advertise-all-vni
 exit-address-family
 exit
!
line vty
!
end</code></pre>
</details></td>
</tr>
</tbody>
</table>

<h3 id="span-spine01-and-spine02-configurations-span"><span>spine01 and spine02 Configurations</span></h3>

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><details>
<summary>spine01 /etc/network/interfaces </summary>
<pre><code>auto lo
iface lo inet loopback
    address 10.0.0.21/32
 
auto eth0
iface eth0 inet dhcp
 
# downlinks
auto swp1
iface swp1
 
auto swp2
iface swp2
 
auto swp3
iface swp3
 
auto swp4
iface swp4</code></pre>
</details></td>
<td><details>
<summary>spine02 /etc/network/interfaces </summary>
<pre><code>auto lo
iface lo inet loopback
    address 10.0.0.22/32
 
auto eth0
iface eth0 inet dhcp
 
# downlinks
auto swp1
iface swp1
 
auto swp2
iface swp2
 
auto swp3
iface swp3
 
auto swp4
iface swp4</code></pre>
</details></td>
</tr>
<tr class="even">
<td><details>
<summary>spine01 /etc/quagga/Quagga.conf </summary>
<pre><code>!
log syslog
!
interface swp1
 ipv6 nd ra-interval 10
 no ipv6 nd suppress-ra
!
interface swp2
 ipv6 nd ra-interval 10
 no ipv6 nd suppress-ra
!
interface swp3
 ipv6 nd ra-interval 10
 no ipv6 nd suppress-ra
!
interface swp4
 ipv6 nd ra-interval 10
 no ipv6 nd suppress-ra
!
router bgp 65020
 bgp router-id 10.0.0.21
 bgp bestpath as-path multipath-relax
 neighbor fabric peer-group
 neighbor fabric remote-as external
 neighbor fabric description Internal Fabric Network
 neighbor fabric capability extended-nexthop
 neighbor swp1 interface peer-group fabric
 neighbor swp2 interface peer-group fabric
 neighbor swp3 interface peer-group fabric
 neighbor swp4 interface peer-group fabric
 !
 address-family ipv4 unicast
  network 10.0.0.21/32
 exit-address-family
 !
!
 address-family ipv6 unicast
  neighbor fabric activate
 exit-address-family
 !
 address-family evpn
  neighbor fabric activate
 exit-address-family
 exit
!
line vty
!
end</code></pre>
</details></td>
<td><details>
<summary>spine02 /etc/quagga/Quagga.conf </summary>
<pre><code>!
log syslog
!
interface swp1
 ipv6 nd ra-interval 10
 no ipv6 nd suppress-ra
!
interface swp2
 ipv6 nd ra-interval 10
 no ipv6 nd suppress-ra
!
interface swp3
 ipv6 nd ra-interval 10
 no ipv6 nd suppress-ra
!
interface swp4
 ipv6 nd ra-interval 10
 no ipv6 nd suppress-ra
!
router bgp 65020
 bgp router-id 10.0.0.22
 bgp bestpath as-path multipath-relax
 neighbor fabric peer-group
 neighbor fabric remote-as external
 neighbor fabric description Internal Fabric Network
 neighbor fabric capability extended-nexthop
 neighbor swp1 interface peer-group fabric
 neighbor swp2 interface peer-group fabric
 neighbor swp3 interface peer-group fabric
 neighbor swp4 interface peer-group fabric
 !
 address-family ipv4 unicast
  network 10.0.0.22/32
 exit-address-family
 !
!
 address-family ipv6 unicast
  neighbor fabric activate
 exit-address-family
 !
 address-family evpn
  neighbor fabric activate
 exit-address-family
 exit
!
line vty
!
end</code></pre>
</details></td>
</tr>
</tbody>
</table>

<h3 id="span-server01-and-server02-configurations-span"><span>server01 and server02 Configurations</span></h3>

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><details>
<summary>server01 /etc/network/interfaces </summary>
<pre><code>auto eth0
iface eth0 inet dhcp
 
auto bond0
iface bond0
    bond-slaves eth1 eth2
    address 172.16.1.101/24
 
auto bond0.100
iface bond0.100
    address 172.16.100.101/24
 
auto bond0.200
iface bond0.200
    address 172.16.200.101/24</code></pre>
</details></td>
<td><details>
<summary>server02 /etc/network/interfaces </summary>
<pre><code>auto eth0
iface eth0 inet dhcp
 
auto eth2
iface eth2
    address 172.16.1.102/24
 
auto eth2.100
iface eth2.100
    address 172.16.100.102/24
 
auto eth2.200
iface eth2.200
    address 172.16.200.102/24</code></pre>
</details></td>
</tr>
</tbody>
</table>

<h2 id="span-testing-connectivity-between-servers-span"><span>Testing Connectivity between Servers</span></h2>

<p>SSH to server01 and ping the VLAN1 IP address on server02:</p>

<pre><code>user@server01:~$ ping 172.16.1.102
PING 172.16.1.102 (172.16.1.102) 56(84) bytes of data.
64 bytes from 172.16.1.102: icmp_seq=1 ttl=64 time=2.52 ms
64 bytes from 172.16.1.102: icmp_seq=2 ttl=64 time=2.74 ms
^C
--- 172.16.1.102 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1001ms
rtt min/avg/max/mdev = 2.528/2.638/2.749/0.121 ms
</code></pre>

<p>The following table lists all the servers IP addresses to test
connectivity across the L3 fabric:</p>

<table>
<thead>
<tr>
<th></th>
<th>server01</th>
<th>server02</th>
<th>server03</th>
<th>server04</th>
</tr>
</thead>

<tbody>
<tr>
<td>VLAN1</td>
<td>172.16.1.101</td>
<td>172.16.1.102</td>
<td>172.16.1.103</td>
<td>172.16.1.104</td>
</tr>

<tr>
<td>VLAN100</td>
<td>172.16.100.101</td>
<td>172.16.100.102</td>
<td>172.16.100.103</td>
<td>172.16.100.104</td>
</tr>

<tr>
<td>VLAN200</td>
<td>172.16.200.101</td>
<td>172.16.200.102</td>
<td>172.16.200.103</td>
<td>172.16.200.104</td>
</tr>
</tbody>
</table>

<h2 id="span-cumulus-linux-output-commands-span"><span>Cumulus Linux Output Commands</span></h2>

<p>You can use various <code>iproute2</code> commands to examine links, VLAN mappings
and displaying bridge FDB data:</p>

<ul>
<li><p>ip [-d] link show</p></li>

<li><p>bridge link show</p></li>

<li><p>bridge vlan show</p></li>

<li><p>bridge [-s] fdb show</p></li>
</ul>

<p>For example, the output from the following <code>bridge fdb show</code> command
reveals information relevant only for a VTEP.</p>

<ul>
<li><p>3 remote VTEPs (10.0.0.5, 10.0.0.6 and 80.80.80.2) for each of the 2
VNIs.</p></li>

<li><p>MAC address 00:02:00:00:00:03 is a local MAC learned over a bond
interface while MAC address 00:02:00:00:00:08 is a remote MAC from
VTEP 80.80.80.2 for VNI 10100 (vtep100).</p></li>

<li><p>The entries with MAC “00:00:00:00:00:00” are for BUM traffic
replication.</p></li>
</ul>

<!-- end list -->

<pre><code>cumulus@switch:~$ bridge fdb show
00:02:00:00:00:0f dev swp3 master bridge permanent
00:02:00:00:00:01 dev swp3 vlan 1 master bridge 
00:02:00:00:00:04 dev peerlink vlan 1 master bridge 
00:02:00:00:00:12 dev peerlink master bridge permanent
92:b0:8f:b6:82:7b dev vtep100 master bridge permanent
00:02:00:00:00:08 dev vtep100 vlan 100 master bridge 
00:00:00:00:00:00 dev vtep100 dst 10.0.0.5 self permanent
00:00:00:00:00:00 dev vtep100 dst 10.0.0.6 self permanent
00:00:00:00:00:00 dev vtep100 dst 80.80.80.2 self permanent
00:02:00:00:00:08 dev vtep100 dst 80.80.80.2 self 
5e:75:42:b8:47:e6 dev vtep200 master bridge permanent
00:00:00:00:00:00 dev vtep200 dst 10.0.0.5 self permanent
00:00:00:00:00:00 dev vtep200 dst 10.0.0.6 self permanent
00:00:00:00:00:00 dev vtep200 dst 80.80.80.2 self permanent
00:02:00:00:00:10 dev bond0 master bridge permanent
02:02:00:00:00:03 dev bond0 vlan 1 master bridge 
02:02:00:00:00:02 dev bond0 vlan 1 master bridge 
00:02:00:00:00:03 dev bond0 vlan 100 master bridge 
</code></pre>

<h2 id="span-bgp-output-commands-span"><span>BGP Output Commands</span></h2>

<p>The following commands are not unique to EVPN but help troubleshoot
connectivity and route propagation. You can display the L3 fabric by
running the Quagga <code>show ip bgp summary</code> command on one of the spines:</p>

<pre><code>cumulus@spine01:~$ sudo vtysh
spine01# show ip bgp sum
BGP router identifier 10.0.0.21, local AS number 65020 vrf-id 0
BGP table version 7
RIB entries 9, using 1152 bytes of memory
Peers 4, using 83 KiB of memory
Peer groups 1, using 72 bytes of memory
Neighbor        V         AS MsgRcvd MsgSent   TblVer  InQ OutQ Up/Down  State/PfxRcd
leaf01(swp1)    4 65011    1038    1012        0    0    0 00:49:11        1
leaf02(swp2)    4 65012    1042    1018        0    0    0 00:49:30        1
leaf03(swp3)    4 65013    1013     995        0    0    0 00:41:20        1
leaf04(swp4)    4 65014    1026    1012        0    0    0 00:49:10        1
Total number of neighbors 4
</code></pre>

<p>You can see the loopback addresses for all the network devices
participating in BGP by running the <code>show ip bgp</code> command:</p>

<pre><code>cumulus@spine01:~$ sudo vtysh
spine01# show ip bgp
BGP table version is 7, local router ID is 10.0.0.21
Status codes: s suppressed, d damped, h history, * valid, &gt; best, = multipath,
              i internal, r RIB-failure, S Stale, R Removed
Origin codes: i - IGP, e - EGP, ? - incomplete
   Network          Next Hop            Metric LocPrf Weight Path
*&gt; 10.0.0.11/32     swp1            0              0 65011 i
*&gt; 10.0.0.12/32     swp2            0              0 65012 i
*&gt; 10.0.0.13/32     swp3            0              0 65013 i
*&gt; 10.0.0.14/32     swp4            0              0 65014 i
*&gt; 10.0.0.21/32     0.0.0.0                  0          32768 i
Displayed  5 out of 5 total prefixes
</code></pre>

<h2 id="span-evpn-output-commands-span"><span>EVPN Output Commands</span></h2>

<p>The following commands are unique to EVPN address-families and VXLAN.
Note that just because two network nodes are BGP peers does not mean
they are EVPN address-family peers or are exchanging VXLAN information.</p>

<h3 id="span-displaying-evpn-address-family-peers-span"><span>Displaying EVPN address-family Peers</span></h3>

<p>The network device participating in BGP EVPN address-family can be shown
using the <code>show bgp evpn summary</code>command</p>

<pre><code>cumulus@leaf01:~$ sudo vtysh
leaf01# show bgp evpn summary
BGP router identifier 10.0.0.1, local AS number 65001 vrf-id 0
BGP table version 0
RIB entries 15, using 1920 bytes of memory
Peers 2, using 42 KiB of memory
Peer groups 1, using 72 bytes of memory
 
Neighbor        V         AS MsgRcvd MsgSent   TblVer  InQ OutQ Up/Down  State/PfxRcd
s1(swp1)        4 65100      16      22        0    0    0 00:01:29        6
s2(swp2)        4 65100      16      22        0    0    0 00:01:28        6
 
Total number of neighbors 2
</code></pre>


<div class="notices note" > <p>You cannot configure EVPN address families within a
<a href="/version/cumulus-linux-321/Layer-Three/Virtual-Routing-and-Forwarding---VRF">VRF</a>.</p>
 </div>


<h3 id="span-displaying-vnis-span"><span>Displaying VNIs</span></h3>

<p>You can display the configured VNIs on a network device participating in
BGP EVPN by running the <code>show bgp evpn vni</code> command. This command works
only when run on a VTEP.</p>

<p>The following example examines leaf01, where 3 VNIs are configured; VNIs
10100 and 10200 are purely system-defined in <code>/etc/network/interfaces</code>.
The RD and RT values for these VNIs have been automatically derived as
described earlier. The <strong>*</strong> indicates that both VNIs exist in the
kernel, whereas VNI 20100 is user-configured in BGP with a non-default
RD and export RT, but does not yet exist in the kernel:</p>

<pre><code>cumulus@leaf01:~$ sudo vtysh
leaf01# show bgp evpn vni
Advertise All VNI flag: Enabled
Number of VNIs: 3
Flags: * - Kernel 
  VNI        Orig IP         RD                    Import RT             Export RT            
* 10200      80.80.80.1      10.0.0.1:10200        65001:10200           65001:10200          
  20100      10.0.0.1        65001:20100           65001:20100           1:20100              
* 10100      80.80.80.1      10.0.0.1:10100        65001:10100           65001:10100
 

leaf01# show bgp evpn vni 10100
VNI: 10100 (known to the kernel)
  RD: 10.0.0.1:10100
  Originator IP: 80.80.80.1
  Import Route Target:
    65001:10100
  Export Route Target:
    65001:10100

leaf01# show bgp evpn vni 20100
VNI: 20100
  RD: 65001:20100
  Originator IP: 10.0.0.1
  Import Route Target:
    65001:20100
  Export Route Target:
    1:20100
</code></pre>

<p>The corresponding BGP configuration for VNI 20100 is follows (only the
EVPN section is shown):</p>

<pre><code> address-family evpn
  neighbor SPINE activate
  advertise-all-vni
  vni 20100
   rd 65001:20100
   route-target export 1:20100
  exit-vni
 exit-address-family
</code></pre>

<h3 id="span-displaying-evpn-vxlans-span"><span>Displaying EVPN VXLANs</span></h3>

<p>Run the <code>show evpn vni [&lt;vni&gt;]</code> command to list all local configured
VXLANs and remote VTEPs. This command only works when run on a VTEP.</p>

<p>The following output indicates that VNI 10100 is present on 3 remote
VTEPs (10.0.0.5, 10.0.0.6 and 80.80.80.2) while VNI 10200 is present on
2 remote VTEPs (10.0.0.6 and 80.80.80.2):</p>

<pre><code>cumulus@leaf01:~$ sudo vtysh
leaf01# show evpn vni
Number of VNIs: 2
VNI        VxLAN IF              VTEP IP         # MACs   Remote VTEPs   
10200      vtep200               80.80.80.1      2        80.80.80.2     
                                                          10.0.0.6       
10100      vtep100               80.80.80.1      2        80.80.80.2     
                                                          10.0.0.6       
                                                          10.0.0.5       
</code></pre>

<p>To see the EVPN configuration for a single VXLAN:</p>

<pre><code>cumulus@leaf01:~$ sudo vtysh
leaf01# show evpn vni 10100
VNI: 10100
 VxLAN interface: vtep100 ifIndex: 11 VTEP IP: 80.80.80.1
 Remote VTEPs for this VNI:
  80.80.80.2
  10.0.0.6
  10.0.0.5
 Number of MACs (local and remote) known for this VNI: 2
</code></pre>

<h3 id="span-examining-local-and-remote-mac-addresses-for-a-vni-in-quagga-span"><span>Examining Local and Remote MAC Addresses for a VNI in Quagga</span></h3>

<p>You can examine all local and remote MAC addresses for a VNI by running
<code>show evpn mac vni &lt;vni&gt;</code>.</p>

<pre><code>cumulus@leaf01:~$ sudo vtysh
leaf01# show evpn mac vni 10100
Number of MACs (local and remote) known for this VNI: 2
 
 
MAC               Type   Intf/Remote VTEP      VLAN 
00:02:00:00:00:03 local  bond0                 100  
00:02:00:00:00:08 remote 80.80.80.2  
</code></pre>

<p>You can examine MAC addresses across VNIs using <code>show evpn mac vni all</code>:</p>

<pre><code>cumulus@leaf01:~$ sudo vtysh
leaf01# show evpn mac vni all
VNI 10200 #MACs (local and remote) 2
 
 
MAC               Type   Intf/Remote VTEP      VLAN 
00:02:00:00:00:01 local  swp3                  200  
00:02:00:00:00:0b remote 10.0.0.6             
 
 
VNI 10100 #MACs (local and remote) 2
 
 
MAC               Type   Intf/Remote VTEP      VLAN 
00:02:00:00:00:03 local  bond0                 100  
00:02:00:00:00:08 remote 80.80.80.2    
</code></pre>

<p>You can examine MAC addresses for a remote VTEP and/or query a specific
MAC address. This command only works when run on a VTEP:</p>

<pre><code>cumulus@leaf01:~$ sudo vtysh
leaf01# show evpn mac vni 10100 mac 00:02:00:00:00:08
MAC: 00:02:00:00:00:08
 Remote VTEP: 80.80.80.2
 
leadf01# show evpn mac vni 10100 vtep 80.80.80.2
MAC               Type   Intf/Remote VTEP      VLAN 
00:02:00:00:00:08 remote 80.80.80.2 
</code></pre>

<h3 id="span-displaying-the-global-bgp-evpn-routing-table-span"><span>Displaying the Global BGP EVPN Routing Table</span></h3>

<p>Run the <code>show bgp evpn route [type &lt;multicast | macip&gt;]</code> command to
display all EVPN routes at the same time:</p>

<pre><code>cumulus@leaf01:~$ sudo vtysh
leaf01# show bgp evpn route
BGP table version is 0, local router ID is 10.0.0.1
Status codes: s suppressed, d damped, h history, * valid, &gt; best, i - internal
Origin codes: i - IGP, e - EGP, ? - incomplete
EVPN type-2 prefix: [2]:[ESI]:[EthTag]:[MAClen]:[MAC]
EVPN type-3 prefix: [3]:[EthTag]:[IPlen]:[OrigIP]
   Network          Next Hop            Metric LocPrf Weight Path
Route Distinguisher: 10.0.0.1:10100
*&gt; [2]:[0]:[0]:[48]:[00:02:00:00:00:03]
                    80.80.80.1                         32768 i
*&gt; [3]:[0]:[32]:[80.80.80.1]
                    80.80.80.1                         32768 i
Route Distinguisher: 10.0.0.1:10200
*&gt; [2]:[0]:[0]:[48]:[00:02:00:00:00:01]
                    80.80.80.1                         32768 i
*&gt; [3]:[0]:[32]:[80.80.80.1]
                    80.80.80.1                         32768 i
Route Distinguisher: 10.0.0.3:10100
*&gt; [2]:[0]:[0]:[48]:[00:02:00:00:00:08]
                    80.80.80.2                             0 65100 65003 i
*  [2]:[0]:[0]:[48]:[00:02:00:00:00:08]
                    80.80.80.2                             0 65100 65003 i
*  [3]:[0]:[32]:[80.80.80.2]
                    80.80.80.2                             0 65100 65003 i
*&gt; [3]:[0]:[32]:[80.80.80.2]
                    80.80.80.2                             0 65100 65003 i
Route Distinguisher: 10.0.0.3:10200
*  [3]:[0]:[32]:[80.80.80.2]
                    80.80.80.2                             0 65100 65003 i
*&gt; [3]:[0]:[32]:[80.80.80.2]
                    80.80.80.2                             0 65100 65003 i
Route Distinguisher: 10.0.0.4:10100
*&gt; [2]:[0]:[0]:[48]:[00:02:00:00:00:08]
                    80.80.80.2                             0 65100 65004 i
*  [2]:[0]:[0]:[48]:[00:02:00:00:00:08]
                    80.80.80.2                             0 65100 65004 i
*  [3]:[0]:[32]:[80.80.80.2]
                    80.80.80.2                             0 65100 65004 i
*&gt; [3]:[0]:[32]:[80.80.80.2]
                    80.80.80.2                             0 65100 65004 i
 
(truncated)
 
Displayed 15 prefixes (26 paths)
</code></pre>

<h4 id="span-output-explained-span"><span>Output Explained</span></h4>

<ul>
<li><p>The output <code>*&gt; [3]:[0]:[32]:[10.0.0.14]</code>is explained as follows:</p>

<table>
<thead>
<tr>
<th>Output</th>
<th>Explanation</th>
</tr>
</thead>

<tbody>
<tr>
<td>[3]</td>
<td>Type 3 EVPN route</td>
</tr>

<tr>
<td>[0]</td>
<td>Ethernet tag</td>
</tr>

<tr>
<td>[32]</td>
<td>IP address length of 32 bits</td>
</tr>

<tr>
<td>10.0.0.14</td>
<td>IPv4 address originating this route</td>
</tr>
</tbody>
</table></li>
</ul>

<h3 id="span-displaying-evpn-type-2-mac-ip-routes-span"><span>Displaying EVPN Type-2 (MAC/IP) Routes</span></h3>

<p>To display only EVPN type-2 (MAC/IP) routes, run <code>show bgp evpn route
type macip</code>. The output displays the EVPN route-type fields followed by
type-specific fields:</p>

<ul>
<li><p>Type 2 route: [type]:[ESI]:[ET]:[MAC length]:[MAC]</p></li>

<li><p>Type 2 route with ARP suppression: [type]:[ESI]:[ET]:[MAC
length]:[MAC]:[IP length]:[IP]</p>

<ul>
<li>The Ethernet Segment Id (ESI) and Ethernet Tag (ET) are always
0.</li>
</ul></li>

<li><p>Type 3 route: [type]:[ET]:[Originating Router IP]</p>

<ul>
<li><p>The Ethernet Tag (ET) is always 0.</p></li>

<li><p>The &ldquo;Originating Router IP&rdquo; is the VTEP local IP for the
corresponding VNI.</p></li>
</ul></li>
</ul>

<!-- end list -->

<pre><code>cumulus@leaf01:~$ sudo vtysh
leaf01# show bgp evpn route type macip
BGP table version is 0, local router ID is 10.0.0.1
Status codes: s suppressed, d damped, h history, * valid, &gt; best, i - internal
Origin codes: i - IGP, e - EGP, ? - incomplete
EVPN type-2 prefix: [2]:[ESI]:[EthTag]:[MAClen]:[MAC]
EVPN type-3 prefix: [3]:[EthTag]:[IPlen]:[OrigIP]
   Network          Next Hop            Metric LocPrf Weight Path
Route Distinguisher: 10.0.0.1:10100
*&gt; [2]:[0]:[0]:[48]:[00:02:00:00:00:03]
                    80.80.80.1                         32768 i
Route Distinguisher: 10.0.0.1:10200
*&gt; [2]:[0]:[0]:[48]:[00:02:00:00:00:01]
                    80.80.80.1                         32768 i
Route Distinguisher: 10.0.0.3:10100
*&gt; [2]:[0]:[0]:[48]:[00:02:00:00:00:08]
                    80.80.80.2                             0 65100 65003 i
*  [2]:[0]:[0]:[48]:[00:02:00:00:00:08]
                    80.80.80.2                             0 65100 65003 i
Route Distinguisher: 10.0.0.4:10100
*&gt; [2]:[0]:[0]:[48]:[00:02:00:00:00:08]
                    80.80.80.2                             0 65100 65004 i
*  [2]:[0]:[0]:[48]:[00:02:00:00:00:08]
                    80.80.80.2                             0 65100 65004 i
Route Distinguisher: 10.0.0.6:10200
*&gt; [2]:[0]:[0]:[48]:[00:02:00:00:00:0b]
                    10.0.0.6                               0 65100 65006 i
*  [2]:[0]:[0]:[48]:[00:02:00:00:00:0b]
                    10.0.0.6                               0 65100 65006 i
Displayed 5 prefixes (8 paths) (of requested type)
</code></pre>

<h3 id="span-displaying-a-specific-evpn-route-span"><span>Displaying a Specific EVPN Route</span></h3>

<p>To drill down on a specific route for more information, run the <code>show
bgp evpn route rd &lt;VTEP:VXLAN&gt;</code> command. The following example shows
leaf01 receiving a type-2 route and a type-3 route from two spine
switches (s1 and s2). The actual remote VTEP is 80.80.80.2, specified in
the next hop of the route. Both routes contain the BGP Encapsulation
extended community (ET) with value 8 (VxLAN); the type-2 route also
carries the VNI (10100).</p>

<pre><code>cumulus@leaf01:~$ sudo vtysh
leaf01# show bgp evpn route rd 10.0.0.4:10100
EVPN type-2 prefix: [2]:[ESI]:[EthTag]:[MAClen]:[MAC]
EVPN type-3 prefix: [3]:[EthTag]:[IPlen]:[OrigIP]
 
 
BGP routing table entry for 10.0.0.4:10100:[2]:[0]:[0]:[48]:[00:02:00:00:00:08]
Paths: (2 available, best #1)
  Advertised to non peer-group peers:
  s1(swp1) s2(swp2)
  Route [2]:[0]:[0]:[48]:[00:02:00:00:00:08] VNI 10100
  65100 65004
    80.80.80.2 from s1(swp1) (20.0.0.1)
      Origin IGP, localpref 100, valid, external, bestpath-from-AS 65100, best
      Extended Community: RT:65004:10100 ET:8
      AddPath ID: RX 0, TX 45
      Last update: Thu Jan 12 19:42:58 2017
  Route [2]:[0]:[0]:[48]:[00:02:00:00:00:08] VNI 10100
  65100 65004
    80.80.80.2 from s2(swp2) (20.0.0.2)
      Origin IGP, localpref 100, valid, external
      Extended Community: RT:65004:10100 ET:8
      AddPath ID: RX 0, TX 44
      Last update: Thu Jan 12 19:42:58 2017
 
 
BGP routing table entry for 10.0.0.4:10100:[3]:[0]:[32]:[80.80.80.2]
Paths: (2 available, best #2)
  Advertised to non peer-group peers:
  s1(swp1) s2(swp2)
  Route [3]:[0]:[32]:[80.80.80.2]
  65100 65004
    80.80.80.2 from s2(swp2) (20.0.0.2)
      Origin IGP, localpref 100, valid, external
      Extended Community: RT:65004:10100 ET:8
      AddPath ID: RX 0, TX 31
      Last update: Thu Jan 12 19:04:36 2017
  Route [3]:[0]:[32]:[80.80.80.2]
  65100 65004
    80.80.80.2 from s1(swp1) (20.0.0.1)
      Origin IGP, localpref 100, valid, external, bestpath-from-AS 65100, best
      Extended Community: RT:65004:10100 ET:8
      AddPath ID: RX 0, TX 28
      Last update: Thu Jan 12 19:04:35 2017
 
Displayed 2 prefixes (4 paths) with this RD
</code></pre>


<div class="notices note" > <ul>
<li><p>Though the local VNI is included in the type-2 route, the receiver
does not use it. It uses the received RT to match the route to an
appropriate local VNI and then assumes the remote VTEP uses the same
VNI value — that is, global VNIs are in use.</p></li>

<li><p>If MAC mobility extended community is exchanged, it gets shown in
the above output.</p></li>

<li><p>If the remote MAC is dual attached, the next hop for the EVPN route
is the anycast IP address of the remote
<a href="/version/cumulus-linux-321/Layer-One-and-Two/Multi-Chassis-Link-Aggregation---MLAG">MLAG</a>
pair (when MLAG is active). You can see this in the above example,
where 80.80.80.2 is actually the anycast IP of the MLAG pair.</p></li>
</ul>
 </div>


<h3 id="span-displaying-the-per-vni-evpn-routing-table-span"><span>Displaying the per-VNI EVPN Routing Table</span></h3>

<p>Received EVPN routes are maintained in the global EVPN routing table
(described above), even if there are no appropriate local VNIs to
<strong>import</strong> them into. For example, a spine switch maintains the global
EVPN routing table even though there are no VNIs present on it. When
local VNIs are present, received EVPN routes are imported into the
per-VNI routing tables based on the route target attributes. The per-VNI
routing table can be examined using <code>show bgp evpn route vni &lt;vni&gt; [type
&lt;multicast | macip&gt;]</code>:</p>

<pre><code>cumulus@leaf01:~$ sudo vtysh
leaf01# show bgp evpn route vni 10200
BGP table version is 0, local router ID is 10.0.0.1
Status codes: s suppressed, d damped, h history, * valid, &gt; best, i - internal
Origin codes: i - IGP, e - EGP, ? - incomplete
EVPN type-2 prefix: [2]:[ESI]:[EthTag]:[MAClen]:[MAC]
EVPN type-3 prefix: [3]:[ESI]:[EthTag]:[IPlen]:[OrigIP]
   Network          Next Hop            Metric LocPrf Weight Path
*&gt; [2]:[0]:[0]:[48]:[00:02:00:00:00:02]
                    10.0.0.1                           32768 i
*  [2]:[0]:[0]:[48]:[00:02:00:00:00:08]
                    10.0.0.4                               0 121000 120004 i
*&gt; [2]:[0]:[0]:[48]:[00:02:00:00:00:08]
                    10.0.0.4                               0 121000 120004 i
*&gt; [3]:[0]:[32]:[10.0.0.1]
                    10.0.0.1                           32768 i
*  [3]:[0]:[32]:[10.0.0.2]
                    10.0.0.2                               0 121000 120002 i
...
 
Displayed 6 prefixes (10 paths)
</code></pre>

<h3 id="span-displaying-a-specific-mac-or-remote-vtep-span"><span>Displaying a Specific MAC or Remote VTEP</span></h3>

<p>You can examine a specific MAC or IP (remote VTEP):</p>

<pre><code>cumulus@leaf01:~$ sudo vtysh
leaf01# show bgp evpn route vni 10100 mac 00:02:00:00:00:05
BGP routing table entry for [2]:[0]:[0]:[48]:[00:02:00:00:00:05]
Paths: (2 available, best #2)
  Not advertised to any peer
  Route [2]:[0]:[0]:[48]:[00:02:00:00:00:05] VNI 10100
  Imported from 10.0.0.3:10100:[2]:[0]:[0]:[48]:[00:02:00:00:00:05]
  121000 120003
    10.0.0.3 from s2(swp2) (20.0.0.2)
      Origin IGP, localpref 100, valid, external
      Extended Community: RT:120003:10100 ET:8
      AddPath ID: RX 0, TX 44
      Last update: Thu Feb  9 08:16:57 2017
 
  Route [2]:[0]:[0]:[48]:[00:02:00:00:00:05] VNI 10100
  Imported from 10.0.0.3:10100:[2]:[0]:[0]:[48]:[00:02:00:00:00:05]
  121000 120003
    10.0.0.3 from s1(swp1) (20.0.0.1)
      Origin IGP, localpref 100, valid, external, bestpath-from-AS 121000, best
      Extended Community: RT:120003:10100 ET:8
      AddPath ID: RX 0, TX 42
      Last update: Thu Feb  9 08:16:57 2017
 
Displayed 2 paths for requested prefix
</code></pre>

<p>To display the VNI routing table for all VNIs, run <code>show bgp evpn route
vni all</code>:</p>

<pre><code>cumulus@leaf01:~$ sudo vtysh
leaf01# show bgp evpn route vni all
VNI: 10200
BGP table version is 0, local router ID is 10.0.0.1
Status codes: s suppressed, d damped, h history, * valid, &gt; best, i - internal
Origin codes: i - IGP, e - EGP, ? - incomplete
EVPN type-2 prefix: [2]:[ESI]:[EthTag]:[MAClen]:[MAC]
EVPN type-3 prefix: [3]:[EthTag]:[IPlen]:[OrigIP]
   Network          Next Hop            Metric LocPrf Weight Path
*&gt; [2]:[0]:[0]:[48]:[00:02:00:00:00:02]
                    10.0.0.1                           32768 i
*  [2]:[0]:[0]:[48]:[00:02:00:00:00:08]
                    10.0.0.4                               0 65100 65004 i
*&gt; [2]:[0]:[0]:[48]:[00:02:00:00:00:08]
                    10.0.0.4                               0 65100 65004 i
*&gt; [3]:[0]:[32]:[10.0.0.1]
                    10.0.0.1                           32768 i
*  [3]:[0]:[32]:[10.0.0.2]
                    10.0.0.2                               0 65100 65002 i
...
 
Displayed 6 prefixes (10 paths)
 
 
VNI: 10100
BGP table version is 0, local router ID is 10.0.0.1
Status codes: s suppressed, d damped, h history, * valid, &gt; best, i - internal
Origin codes: i - IGP, e - EGP, ? - incomplete
EVPN type-2 prefix: [2]:[ESI]:[EthTag]:[MAClen]:[MAC]
EVPN type-3 prefix: [3]:[EthTag]:[IPlen]:[OrigIP]
   Network          Next Hop            Metric LocPrf Weight Path
*&gt; [2]:[0]:[0]:[48]:[00:02:00:00:00:01]
                    10.0.0.1                           32768 i
*  [2]:[0]:[0]:[48]:[00:02:00:00:00:07]
                    10.0.0.4                               0 65100 65004 i
...
 
 
*&gt; [3]:[0]:[32]:[10.0.0.4]
                    10.0.0.4                               0 65100 65004 i
 
 
Displayed 6 prefixes (10 paths)
</code></pre>

<h2 id="span-troubleshooting-evpn-span"><span>Troubleshooting EVPN</span></h2>

<p>The primary way to troubleshoot EVPN is by enabling Quagga debug logs.
The relevant debug options are:</p>

<ul>
<li><p><code>debug zebra vxlan</code> — which traces VNI addition and deletion (local
and remote) as well as MAC and neighbor addition and deletion (local
and remote).</p></li>

<li><p><code>debug zebra kernel</code> — which traces actual netlink messages
exchanged with the kernel, which includes everything, not just EVPN.</p></li>

<li><p><code>debug bgp updates</code> — which traces BGP update exchanges, including
all updates. Output is extended to show EVPN specific information.</p></li>

<li><p><code>debug bgp zebra</code> - which traces interactions between BGP and zebra
for EVPN (and other) routes.</p></li>
</ul>

<h2 id="span-caveats-span"><span>Caveats</span></h2>

<p>The following caveat applies to EVPN in Cumulus Linux 3.2.x:</p>

<ul>
<li><p>Only VNI values less than 65535 are supported.</p></li>

<li><p>EVPN in Cumulus Linux does not support the ability to only announce
certain VNIs. It supports either all locally defined VNIs (using the
configuration specified here) or none of them. Provisioning options
to advertise only specific VNIs will be introduced in a future
release.</p></li>

<li><p>Only one import or export RT is allowed for a VNI. Support for
additional RTs (for import) will be introduced in a future release.</p></li>

<li><p>Support for one shot configuration of import and export RTs, using
<code>route-target both &lt;rt&gt;</code> will be added in a future release.</p></li>
</ul>

<article id="html-search-results" class="ht-content" style="display: none;">

</article>

<footer id="ht-footer">

</footer>
</article>

      <script src="https://utteranc.es/client.js"
        repo="CumulusNetworks/docs-internal"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
      </script>

    </div>
    

      


  

    <aside class="book-toc fixed">

  
    <div class="toc">
    
      <button>
      <a href="https://github.com/CumulusNetworks/docs/edit/master/content/version/cumulus-linux-321/Network-Virtualization/Ethernet-Virtual-Private-Network---EVPN.md" target="_blank" rel="noopener"><img src="/docs.cumulusnetworks.com/svg/pencil-circle.svg" alt="Edit" /> Edit this page</a>
      </button>
    
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#span-installing-the-evpn-package-span"><span>Installing the EVPN Package</span></a></li>
<li><a href="#span-enabling-quagga-span"><span>Enabling Quagga</span></a></li>
<li><a href="#span-configuring-evpn-span"><span>Configuring EVPN</span></a>
<ul>
<li><a href="#span-enabling-evpn-between-bgp-neighbors-span"><span>Enabling EVPN between BGP Neighbors</span></a></li>
<li><a href="#span-enabling-evpn-in-an-ibgp-environment-with-an-ospf-underlay-span"><span>Enabling EVPN in an iBGP Environment with an OSPF Underlay</span></a></li>
<li><a href="#span-advertising-all-vnis-span"><span>Advertising All VNIs</span></a></li>
<li><a href="#span-enabling-evpn-with-route-distinguishers-rds-and-route-targets-rts-span"><span>Enabling EVPN with Route Distinguishers (RDs) and Route Targets (RTs)</span></a>
<ul>
<li><a href="#span-enabling-evpn-with-automatic-rds-and-rts-span"><span>Enabling EVPN with Automatic RDs and RTs</span></a></li>
<li><a href="#span-enabling-evpn-with-user-defined-rds-and-rts-for-some-vnis-span"><span>Enabling EVPN with User-defined RDs and RTs for Some VNIs</span></a></li>
</ul></li>
<li><a href="#span-disabling-data-plane-mac-learning-over-vxlan-tunnels-span"><span>Disabling Data Plane MAC Learning over VXLAN Tunnels</span></a></li>
</ul></li>
<li><a href="#span-handling-bum-traffic-span"><span>Handling BUM Traffic</span></a></li>
<li><a href="#span-evpn-and-vxlan-active-active-mode-span"><span>EVPN and VXLAN Active-Active Mode</span></a></li>
<li><a href="#span-example-configuration-span"><span>Example Configuration</span></a>
<ul>
<li><a href="#span-leaf01-and-leaf02-configurations-span"><span>leaf01 and leaf02 Configurations</span></a></li>
<li><a href="#span-spine01-and-spine02-configurations-span"><span>spine01 and spine02 Configurations</span></a></li>
<li><a href="#span-server01-and-server02-configurations-span"><span>server01 and server02 Configurations</span></a></li>
</ul></li>
<li><a href="#span-testing-connectivity-between-servers-span"><span>Testing Connectivity between Servers</span></a></li>
<li><a href="#span-cumulus-linux-output-commands-span"><span>Cumulus Linux Output Commands</span></a></li>
<li><a href="#span-bgp-output-commands-span"><span>BGP Output Commands</span></a></li>
<li><a href="#span-evpn-output-commands-span"><span>EVPN Output Commands</span></a>
<ul>
<li><a href="#span-displaying-evpn-address-family-peers-span"><span>Displaying EVPN address-family Peers</span></a></li>
<li><a href="#span-displaying-vnis-span"><span>Displaying VNIs</span></a></li>
<li><a href="#span-displaying-evpn-vxlans-span"><span>Displaying EVPN VXLANs</span></a></li>
<li><a href="#span-examining-local-and-remote-mac-addresses-for-a-vni-in-quagga-span"><span>Examining Local and Remote MAC Addresses for a VNI in Quagga</span></a></li>
<li><a href="#span-displaying-the-global-bgp-evpn-routing-table-span"><span>Displaying the Global BGP EVPN Routing Table</span></a>
<ul>
<li><a href="#span-output-explained-span"><span>Output Explained</span></a></li>
</ul></li>
<li><a href="#span-displaying-evpn-type-2-mac-ip-routes-span"><span>Displaying EVPN Type-2 (MAC/IP) Routes</span></a></li>
<li><a href="#span-displaying-a-specific-evpn-route-span"><span>Displaying a Specific EVPN Route</span></a></li>
<li><a href="#span-displaying-the-per-vni-evpn-routing-table-span"><span>Displaying the per-VNI EVPN Routing Table</span></a></li>
<li><a href="#span-displaying-a-specific-mac-or-remote-vtep-span"><span>Displaying a Specific MAC or Remote VTEP</span></a></li>
</ul></li>
<li><a href="#span-troubleshooting-evpn-span"><span>Troubleshooting EVPN</span></a></li>
<li><a href="#span-caveats-span"><span>Caveats</span></a></li>
</ul></li>
</ul>
</nav>
    </div>
  

</aside>






  </main>
  <footer class="footer-top">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="footer-content">
            <div class="mb-4">
                <img src="https://static.cumulusnetworks.com/static/images/shared/cumulus-networks-rt-white-trademarked.ff839f1b2570.svg">
                <p>© <script type="text/javascript">document.write(new Date().getFullYear());</script> Cumulus Networks.<br>
                Site by <a href="//unomena.com/" target="_blank">Unomena</a>.</p>
            </div>
            <ul class="mb-4">
              <li><h4>Products</h4></li>
              <li><a href="//cumulusnetworks.com/products/cumulus-linux/">Cumulus Linux</a></li>
              <li><a href="//cumulusnetworks.com/products/netq/">Cumulus NetQ</a></li>
              <li><a href="//cumulusnetworks.com/products/cumulus-express/">Cumulus Express</a></li>
            </ul>
            <ul class="mb-4">
              <li><h4>Learn</h4></li>
              <li><a href="//cumulusnetworks.com/learn/web-scale-networking-education/">Going web-scale</a></li>
              <li><a href="//cumulusnetworks.com/learn/events/">Events</a></li>
              <li><a href="//cumulusnetworks.com/blog/">Blog</a></li>
            </ul>
            <ul class="mb-4">
              <li><h4>About</h4></li>
              <li><a href="//cumulusnetworks.com/about/">Our story</a></li>
              <li><a href="//cumulusnetworks.com/about/careers/">Careers</a></li>
              <li><a href="//cumulusnetworks.com/about/media-coverage/">Media coverage</a></li>
              <li><a href="//docs.cumulusnetworks.com/" target="_blank">Tech docs</a></li>
              <li><a href="//cumulusnetworks.com/community/">Community</a></li>
            </ul>
            <ul>
              <li>
                <a href="//twitter.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M23 6.628l-2-.5 1-2-2.464.7A4.48 4.48 0 0 0 12 8.128v1c-3.539.73-6.634-1.2-9.5-4.5q-.75 4 1.5 6l-3-.5c.405 2.069 1.362 3.7 4 4l-2.5 1c1 2 2.566 2.31 5 2.5a10.748 10.748 0 0 1-6.5 2c12.755 5.669 20-2.664 20-10V8.3z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//www.facebook.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                      .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M17.768 7.5H13.5V5.6a.972.972 0 0 1 1.012-1.1c.418 0 2.988.01 2.988.01V.5h-4.329C9.244.5 8.5 3.474 8.5 5.355V7.5h-3v4h3v12h5v-12h3.851z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//linkedin.com/company/cumulus-networks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                      .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M6.5 22.5h-5v-13h5zm9-9a2 2 0 0 0-2 2v7h-5v-13h5v1.485a6.307 6.307 0 0 1 3.99-1.495c2.962 0 5.01 2.2 5.01 6.355V22.5h-5v-7a2 2 0 0 0-2-2zM6.5 5A2.5 2.5 0 1 1 4 2.5 2.5 2.5 0 0 1 6.5 5z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//vimeo.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M.5 7.393l.933 1.224S3.36 7.1 4 7.859s3.1 9.925 3.915 11.617c.714 1.483 2.684 3.444 4.845 2.042s9.34-7.529 10.626-14.769-8.642-5.723-9.693.583c2.627-1.577 4.03.642 2.686 3.154s-2.569 4.145-3.211 4.145-1.135-1.679-1.868-4.613c-.76-3.035-.755-8.5-3.911-7.882C4.412 2.721.5 7.393.5 7.393z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//www.github.com/cumulusnetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                        <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                        </style>
                    </defs>
                    <path class="a" d="M19.459 17c0-5.969-4.126-3.532-7.5-3.532s-7.5-2.375-7.5 3.532a3.5 3.5 0 0 0 3.5 3.5h8a3.5 3.5 0 0 0 3.5-3.5z"></path>
                    <path class="a" d="M21.489 10.214l.032.023s2.646-4.572-.6-7.237c-2 0-5.058 3.3-5.058 3.3l.022.016A14.152 14.152 0 0 0 8.1 6.3C8.083 6.285 5.037 3 3.042 3c-3.173 2.6-.729 7.012-.614 7.217a8.876 8.876 0 0 0-1.395 5.743c.241 3.126 2.847 6.54 5.982 6.54H16.9c3.135 0 5.742-3.414 5.982-6.54a8.857 8.857 0 0 0-1.393-5.746z"></path>
                    <ellipse class="a" cx="15.48" cy="17" rx="1" ry="1.5"></ellipse>
                    <ellipse class="a" cx="8.48" cy="17" rx="1" ry="1.5"></ellipse>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//slack.cumulusnetworks.com/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                        <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                        </style>
                    </defs>
                    <rect class="a" x=".5" y=".5" width="23" height="23" rx="6" ry="6"></rect>
                    <circle class="a" cx="12" cy="12" r="6"></circle>
                    <circle class="a" cx="19" cy="5" r="1.5"></circle>
                  </svg>
                </a>
              </li>
              <li>
                <p>Cumulus Networks<sup>®</sup> — Data center networking software for the open, modern data center.</p>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <div class="footer-bottom">
      <div class="container">
          <div class="row">
              <div class="col-12">
                  <ul>
                      <li><a href="//cumulusnetworks.com/legal/trademarks/">Trademarks</a></li>
                      <li><a href="//cumulusnetworks.com/legal/privacy/">Privacy</a></li>
                      <li><a href="//cumulusnetworks.com/legal/">Terms of service</a></li>
                  </ul>
              </div>
          </div>
      </div>
  </div>

  
  

</body>

</html>
