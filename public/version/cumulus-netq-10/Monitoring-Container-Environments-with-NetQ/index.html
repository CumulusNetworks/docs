<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Monitoring Container Environments with NetQ | Cumulus Networks Documentation</title>

  
  <link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet">

  
  
  
  <link rel="stylesheet" href="/docs.cumulusnetworks.com/book.min.a378d8a2da6f5357a83a43dff33d6f77fb70401e0399d5ba78faf81d7a1ae1a8.css">

  
  <link rel="icon" href="/docs.cumulusnetworks.com/icons/favicon.png" type="image/x-icon">

  
  <!--
  Made with Book Theme
  https://github.com/alex-shpak/hugo-book
  -->

  
  
  <script src = "/docs.cumulusnetworks.com/js/codecopy.js"> </script>

</head>


<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  
  <header id="site-nav">
    <div class="header-wrapper flex">
      <a href="/">
        <img src="/header-logo.png" alt="Cumulus Networks">
        <img src="/cumulus-networks-rt-white.svg" alt="Cumulus Networks" class="header-mobile">
        <span>Docs</span>
      </a>
      <ul class="flex">
        <li><a href="//cumulusnetworks.com">HOME</a></li>
        <li><a href="//support.cumulusnetworks.com/">SUPPORT</a></li>
        <li><a href="//docs.cumulusnetworks.com/">DOCS</a></li>
        <li><a href="//education.cumulusnetworks.com">EDUCATION</a></li>
        <li><a href="//cumulusnetworks.com/blog/">BLOG</a></li>
        <li><a href="//forums.cumulusnetworks.com/">FORUMS</a></li>
      </ul>
      <div class="burger-menu">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </header>
  <div id="product-nav" class="flex">
      
    
    <ul>
    
      <li><a href = docs.cumulusnetworks.com/cumulus-linux/ >
        Cumulus Linux </a> </li>
    
      <li class = "active" ><a href = docs.cumulusnetworks.com/cumulus-netq/ >
        Cumulus NetQ </a> </li>
    
      <li><a href = docs.cumulusnetworks.com/cumulus-vx/ >
        Cumulus VX </a> </li>
    
      <li>
        <div id="products-dropdown" class="dropdown">
            <button class="btn" type="button" id="dropdownMenuButton">
              Products
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <a class="dropdown-item" href="">Cumulus RMP</a>
              <a class="dropdown-item" href="">Cumulus Chassis</a>
              <a class="dropdown-item" href="">Cumulus Host Pack</a>
            </div>
        </div>
      </li>
    </ul>
    <div class="search-container">
      <div id="doc-search-box">
        <input type="text" class="doc-search-input" placeholder="Search" value="">
        <span><button type="submit"><img src="/icons/search_20x20.svg" alt=""></button></span>
      </div>
      <div id="dropdown" class="dropdown">
          <button class="btn" type="button" id="dropdownMenuButton">
            v1.0.0
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/cumulus-netq/"> v2.2.0</a>
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-netq-10/"> v1.0.0</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-netq-110/"> v1.1.0</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-netq-121/"> v1.2.1</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-netq-141/"> v1.4.1</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-netq-21/"> v2.1</a>
            
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
          </div>
      </div>
    </div>
  </div>
  <main class="flex container">
    <aside class="book-menu fixed">

      <nav role="navigation">
        <h2 class="book-brand">
          <a href="docs.cumulusnetworks.com">Cumulus Networks Documentation</a>
        </h2>
        
        




  <ul class = "cn-book-section-container" id = "top">
    
        
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
            

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-10/" >
    Cumulus NetQ
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-10/Proactively-Monitoring-the-Network-Fabric/" >
    Proactively Monitoring the Network Fabric
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-10/Proactively-Monitoring-the-Network-Fabric/MLAG-Troubleshooting-with-NetQ/" >
    MLAG Troubleshooting with NetQ
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-10/Getting-Started-with-NetQ/" >
    Getting Started with NetQ
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-10/Getting-to-Know-NetQ/" >
    Getting to Know NetQ
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-10/Taking-Preventative-Steps-with-Your-Network/" >
    Taking Preventative Steps with Your Network
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-10/Performing-Network-Diagnostics/" >
    Performing Network Diagnostics
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-10/NetQ-Service-Console/" >
    NetQ Service Console
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-10/Monitoring-Linux-Hosts-with-NetQ/" >
    Monitoring Linux Hosts with NetQ
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-10/Monitoring-Container-Environments-with-NetQ/"  class="active" >
    Monitoring Container Environments with NetQ
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-10/Configuring-the-NetQ-Virtual-Environment/" >
    Configuring the NetQ Virtual Environment
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-10/Restoring-from-Backups-with-NetQ/" >
    Restoring from Backups with NetQ
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-10/Troubleshooting-NetQ/" >
    Troubleshooting NetQ
  </a>


    </li>
    
  </ul>


  </li>


          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
    
  </ul>









      </nav>

      
      
      
      

      <script src = "/docs.cumulusnetworks.com/js/menuBundle.js"> </script>


    </aside>

    <div class="book-page">

      
      <header class="align-center justify-between book-header">
        <label for="menu-control">
          <img src="/docs.cumulusnetworks.com/svg/menu.svg" alt="Menu" />
        </label>
        <strong>Monitoring Container Environments with NetQ</strong>
      </header>

      
      
<div class= "notices info" id = "info" >
    This documentation is for an older version of the software. If you are using the current version of Cumulus Linux, this content may not be up to date. The current version of the documentation is available [here](https://docs.cumulusnetworks.com/).
  </div>
<article class="markdown">
<h1>Monitoring Container Environments with NetQ</h1>

<p>The NetQ Agent monitors Docker containers the same way it monitors
<a href="/version/cumulus-netq-10/Monitoring-Linux-Hosts-with-NetQ">physical
servers</a>.
There is no special implementation. The NetQ Agent pulls Docker data
from the container as it would pull data from a Cumulus Linux switch or
Linux host.</p>

<p>NetQ monitors many aspects of containers on your network, including
their:</p>

<ul>
<li><p><strong>Identity</strong>: The NetQ agent tracks every container&rsquo;s IP and MAC
address, name, image, and more. NetQ can locate containers across
the fabric based on a container&rsquo;s name, image, IP or MAC address,
and protocol and port pair.</p></li>

<li><p><strong>Port mapping on a network</strong>: The NetQ agent tracks protocol and
ports exposed by a container. NetQ can identify containers exposing
a specific protocol and port pair on a network.</p></li>

<li><p><strong>Connectivity</strong>: NetQ can provide information on network
connectivity for a container, including adjacency, and can identify
containers that can be affected by a top of rack switch.</p></li>
</ul>

<h2 id="span-netq-container-support-span"><span>NetQ Container Support</span></h2>

<p>The NetQ Agent supports Docker version 1.13 (Jan 2017), 17.04.0-ce
(April 2017).</p>

<p>The NetQ Agent parses the following Docker events:</p>

<ul>
<li><p>Image: pull and delete</p></li>

<li><p>Container: run, stop, start, restart, attach and detach</p></li>

<li><p>Network: create, connect, disconnect and destroy</p></li>
</ul>

<p>Currently, the NetQ Agent does not support:</p>

<ul>
<li><p>Monitoring Docker volume mount and unmount events</p></li>

<li><p>Plugin install and deletes</p></li>

<li><p>Third party network configuration through plugins like Calico</p></li>

<li><p>Docker Swarm service</p></li>
</ul>

<h3 id="span-telemetry-server-memory-requirement-span"><span>Telemetry Server Memory Requirement</span></h3>

<p>Due to the higher memory requirements to run containers, Cumulus
Networks recommends you run the NetQ Telemetry Server on a host with at
least 32G RAM. For more information, read the <a href="Performing-Network-Diagnostics.html#src-6488212_PerformingNetworkDiagnostics-matrix" target="_blank">Performing Network
Diagnostics</a>
chapter.</p>

<h2 id="span-id-src-6488224-monitoringcontainerenvironmentswithnetq-enable-class-confluence-anchor-link-span-span-configuring-the-container-host-span"><span id="src-6488224_MonitoringContainerEnvironmentswithNetQ-enable" class="confluence-anchor-link"></span><span>Configuring the Container Host</span></h2>

<p>In order for NetQ to be able to monitor the containers on a host, you
need to do three things:</p>

<ul>
<li><p>Configure the host to point to the telemetry server by its IP
address</p></li>

<li><p>Enable Docker in the NetQ configuration file</p></li>

<li><p>Restart the agent</p></li>
</ul>

<p>See the section on <a href="Getting-Started-with-NetQ.html#src-6488202_GettingStartedwithNetQ-nodeconfig" target="_blank">configuring the NetQ agent on a
node</a>
for details. In the following example <code>/etc/netq/netq.yml</code> file on the
server, the last three lines enable Docker:</p>

<pre><code>cumulus@server01:~$ sudo vi /etc/netq/netq.yml
# See /usr/share/doc/netq/examples for full configuration file
backend:
  port: 6379
  server: 192.168.0.10
  vrf: default
user-commands:
- commands:
  - command: /bin/cat /etc/network/interfaces
    key: config-interfaces
    period: '60'
  - command: /bin/cat /etc/ntp.conf
    key: config-ntp
    period: '60'
  service: misc
- commands:
  - command:
    - /usr/bin/vtysh
    - -c
    - show running-config
    key: config-quagga
    period: '60'
  service: zebra
view-commands:
- commands:
  - command: /bin/cat /etc/network/interfaces
    key: config-interfaces
    period: '60'
  - command: /bin/cat /etc/ntp.conf
    key: config-ntp
    period: '60'
  service: misc
- commands:
  - command:
    - /usr/bin/vtysh
    - -c
    - show running-config
    key: config-quagga
    period: '60'
  service: zebra
 
docker:
  enable: true
  poll_period: 15
</code></pre>

<h2 id="span-starting-and-stopping-containers-span"><span>Starting and Stopping Containers</span></h2>

<p>If you need to start or stop a single container on a host, use the
<code>docker-compose</code> command. In the example below, the container is called
<em>netq_cont_a</em>:</p>

<pre><code>cumulus@server01:~$ sudo docker-compose -f /appliance/cfg/docker/netq-base-compose.yml -p netq_cont_a stop netq-notifier
cumulus@server01:~$ sudo docker-compose -f /appliance/cfg/docker/netq-base-compose.yml -p netq_cont_a start netq-notifier
</code></pre>

<h2 id="span-showing-container-summary-information-span"><span>Showing Container Summary Information</span></h2>

<p>To see a high level view of the network, including the number of
containers installed and running on the network, run <code>netq show docker
summary</code>:</p>

<pre><code>cumulus@server01:~$ netq show docker summary 
Node        Version       Installed    Running    Images  Swarm Cluster    Networks
----------  ----------  -----------  ---------  --------  ---------------  ----------
exit01      17.03.1-ce           26         26         1                   3
exit02      17.03.1-ce            1          0         3                   3
server01    17.03.1-ce            0          0         0                   3
server02    17.03.1-ce            0          0         0                   3
server03    17.03.1-ce            0          0         0                   3
server04    17.03.1-ce            0          0         0                   3
server01    17.03.1-ce           13         13         1                   3
server02    17.03.1-ce            0          0         0                   3
</code></pre>

<h2 id="span-identifying-containers-on-the-network-span"><span>Identifying Containers on the Network</span></h2>

<p>To view the different container networks and the containers in them, run
<code>netq show docker network</code>:</p>

<pre><code>cumulus@server01:~$ netq show docker network
Network Name     Node       subnet          gateway         ipv6      ip masq. encrypted
---------------- ---------- --------------- --------------- --------- -------- ---------
bridge           exit01     172.17.0.0/16                   Disabled  True     False
bridge           exit02     172.17.0.0/16                   Disabled  True     False
bridge           server01   172.17.0.0/16                   Disabled  True     False
bridge           server02   172.17.0.0/16                   Disabled  True     False
bridge           server03   172.17.0.0/16                   Disabled  True     False
bridge           server04   172.17.0.0/16                   Disabled  True     False
bridge           server01   172.17.0.0/16                   Disabled  True     False
bridge           server02   172.17.0.0/16                   Disabled  True     False
bridge           server03   172.17.0.0/16                   Disabled  True     False
bridge           server04   172.17.0.0/16                   Disabled  True     False
host             exit01                                     Disabled  False    False
host             exit02                                     Disabled  False    False
host             server01                                   Disabled  False    False
host             server02                                   Disabled  False    False
host             server03                                   Disabled  False    False
host             server04                                   Disabled  False    False
host             server01                                   Disabled  False    False
host             server02                                   Disabled  False    False
host             server03                                   Disabled  False    False
host             server04                                   Disabled  False    False
none             exit01                                     Disabled  False    False
none             exit02                                     Disabled  False    False
none             server01                                   Disabled  False    False
none             server02                                   Disabled  False    False
none             server03                                   Disabled  False    False
none             server04                                   Disabled  False    False
none             server01                                   Disabled  False    False
none             server02                                   Disabled  False    False
none             server03                                   Disabled  False    False
none             server04                                   Disabled  False    False
</code></pre>

<p>To view all the hosts using a specific container network driver, use
<code>netq show docker network driver NAME</code>. Use the <code>brief</code> keyword for a
shorter summary. Docker supports many network drivers.</p>

<pre><code>cumulus@server01:~$ netq show docker network driver bridge brief 
Network Name     Node       Driver    subnet          gateway         ipv6      ip masq. encrypted Containers
---------------- ---------- --------- --------------- --------------- --------- -------- --------- -------------------------
bridge           exit01     bridge    172.17.0.0/16                   Disabled  True     False     Name:netcat-8085 IPv4:172
                                                                                                   .17.0.7/16,
                                                                                                   Name:netcat-8082 IPv4:172
                                                                                                   .17.0.4/16,
                                                                                                   Name:netcat-8083 IPv4:172
                                                                                                   .17.0.5/16,
                                                                                                   Name:netcat-8089 IPv4:172
                                                                                                   .17.0.11/16,
                                                                                                   Name:netcat-8081 IPv4:172
                                                                                                   .17.0.3/16,
                                                                                                   Name:netcat-8084 IPv4:172
                                                                                                   .17.0.6/16,
                                                                                                   Name:netcat-8090 IPv4:172
                                                                                                   .17.0.12/16,
                                                                                                   Name:netcat-8080 IPv4:172
                                                                                                   .17.0.2/16,
                                                                                                   Name:netcat-8091 IPv4:172
                                                                                                   .17.0.13/16,
                                                                                                   Name:netcat-8092 IPv4:172
                                                                                                   .17.0.14/16,
                                                                                                   Name:netcat-8088 IPv4:172
                                                                                                   .17.0.10/16,
                                                                                                   Name:netcat-8087 IPv4:172
                                                                                                   .17.0.9/16,
                                                                                                   Name:netcat-8086 IPv4:172
                                                                                                   .17.0.8/16
bridge           exit02     bridge    172.17.0.0/16                   Disabled  True     False
bridge           server01   bridge    172.17.0.0/16                   Disabled  True     False
bridge           server02   bridge    172.17.0.0/16                   Disabled  True     False
bridge           server03   bridge    172.17.0.0/16                   Disabled  True     False
bridge           server04   bridge    172.17.0.0/16                   Disabled  True     False
bridge           server01   bridge    172.17.0.0/16                   Disabled  True     False     Name:netcat-8082 IPv4:172
                                                                                                   .17.0.4/16,
                                                                                                   Name:netcat-8085 IPv4:172
                                                                                                   .17.0.7/16,
                                                                                                   Name:netcat-8083 IPv4:172
                                                                                                   .17.0.5/16,
                                                                                                   Name:netcat-8086 IPv4:172
                                                                                                   .17.0.8/16,
                                                                                                   Name:netcat-8089 IPv4:172
                                                                                                   .17.0.11/16,
                                                                                                   Name:netcat-8084 IPv4:172
                                                                                                   .17.0.6/16,
                                                                                                   Name:netcat-8092 IPv4:172
                                                                                                   .17.0.14/16,
                                                                                                   Name:netcat-8087 IPv4:172
                                                                                                   .17.0.9/16,
                                                                                                   Name:netcat-8080 IPv4:172
                                                                                                   .17.0.2/16,
                                                                                                   Name:netcat-8081 IPv4:172
                                                                                                   .17.0.3/16,
                                                                                                   Name:netcat-8090 IPv4:172
                                                                                                   .17.0.12/16,
                                                                                                   Name:netcat-8091 IPv4:172
                                                                                                   .17.0.13/16,
                                                                                                   Name:netcat-8088 IPv4:172
                                                                                                   .17.0.10/16
bridge           server02   bridge    172.17.0.0/16                   Disabled  True     False
bridge           server03   bridge    172.17.0.0/16                   Disabled  True     False
bridge           server04   bridge    172.17.0.0/16                   Disabled  True     False
</code></pre>

<p>To see all the containers on a given container network, run the
following command, where the container network is named <em>host</em>:</p>

<pre><code>cumulus@server01:~$ netq show docker container network host 
Name                 Node       IP                IP Masq. Network        Service Name    Up time
-------------------- ---------- ----------------- -------- -------------- --------------- ---------------
netcat-9080          exit01     45.0.0.17/26,     False    host                           0:29:42
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9081          exit01     45.0.0.17/26,     False    host                           0:29:41
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9082          exit01     45.0.0.17/26,     False    host                           0:29:42
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9083          exit01     45.0.0.17/26,     False    host                           0:29:39
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9084          exit01     45.0.0.17/26,     False    host                           0:29:40
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9085          exit01     45.0.0.17/26,     False    host                           0:29:40
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9086          exit01     45.0.0.17/26,     False    host                           0:29:39
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9087          exit01     45.0.0.17/26,     False    host                           0:29:38
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9088          exit01     45.0.0.17/26,     False    host                           0:29:37
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9089          exit01     45.0.0.17/26,     False    host                           0:29:38
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9090          exit01     45.0.0.17/26,     False    host                           0:29:36
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9091          exit01     45.0.0.17/26,     False    host                           0:29:37
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9092          exit01     45.0.0.17/26,     False    host                           0:29:38
                                27.0.0.3/32,
                                192.168.0.15/24
</code></pre>

<h2 id="span-showing-container-adjacency-span"><span>Showing Container Adjacency</span></h2>

<p>NetQ can list all the containers running on hosts adjacent to a top of
rack switch. This helps in analyzing what impact the ToR switch can have
on an application</p>

<p>To identify all the containers that may have been launched on hosts that
are adjacent to a given node, run <code>netq NODE show docker container
adjacent</code>:</p>

<pre><code>cumulus@leaf01:~$ netq leaf01 show docker container adjacent
Interface            Peer Node  Peer Interface        Container Name       IP                   Network    Service Name
-------------------- ---------- --------------------- -------------------- -------------------- ---------- ---------------
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9090                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9082                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9091                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9086                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9081                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9083                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9087                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9088                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9085                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9080                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9084                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9089                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9092                               host
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8089          172.17.0.11          bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8084          172.17.0.6           bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8092          172.17.0.14          bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8083          172.17.0.5           bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8085          172.17.0.7           bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8081          172.17.0.3           bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8080          172.17.0.2           bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8086          172.17.0.8           bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8088          172.17.0.10          bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8082          172.17.0.4           bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8091          172.17.0.13          bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8090          172.17.0.12          bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8087          172.17.0.9           bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8091          172.17.0.13          bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8083          172.17.0.5           bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8087          172.17.0.9           bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8082          172.17.0.4           bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8080          172.17.0.2           bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8092          172.17.0.14          bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8086          172.17.0.8           bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8084          172.17.0.6           bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8088          172.17.0.10          bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8090          172.17.0.12          bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8085          172.17.0.7           bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8089          172.17.0.11          bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8081          172.17.0.3           bridge
</code></pre>

<p>You can filter this output for a given interface:</p>

<pre><code>cumulus@leaf01:~$ netq leaf01 show docker container adjacent interfaces swp6
Interface            Peer Node  Peer Interface        Container Name       IP                   Network    Service Name
-------------------- ---------- --------------------- -------------------- -------------------- ---------- ---------------
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9090                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9082                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9091                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9086                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9081                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9083                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9087                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9088                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9085                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9080                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9084                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9089                               host                                7
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9092                               host
</code></pre>

<p>And you can go back in time to check adjacency around a given moment:</p>

<pre><code>cumulus@leaf01:~$ netq leaf01 show docker container adjacent around 1h
Interface            Peer Node  Peer Interface        Container Name       IP                   Network    Service Name
-------------------- ---------- --------------------- -------------------- -------------------- ---------- ---------------
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9090                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9082                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9091                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9086                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9081                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9083                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9087                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9088                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9085                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9080                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9084                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9089                               host
swp6:VlanA-1         server01   mac:00:02:00:00:00:27 netcat-9092                               host
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8089          172.17.0.11          bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8084          172.17.0.6           bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8092          172.17.0.14          bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8083          172.17.0.5           bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8085          172.17.0.7           bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8081          172.17.0.3           bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8080          172.17.0.2           bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8086          172.17.0.8           bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8088          172.17.0.10          bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8082          172.17.0.4           bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8091          172.17.0.13          bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8090          172.17.0.12          bridge
swp7:VlanA-1         server02   mac:00:02:00:00:00:2a netcat-8087          172.17.0.9           bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8091          172.17.0.13          bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8083          172.17.0.5           bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8087          172.17.0.9           bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8082          172.17.0.4           bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8080          172.17.0.2           bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8092          172.17.0.14          bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8086          172.17.0.8           bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8084          172.17.0.6           bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8088          172.17.0.10          bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8090          172.17.0.12          bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8085          172.17.0.7           bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8089          172.17.0.11          bridge
swp8:VlanA-1         server03   mac:00:02:00:00:00:2d netcat-8081          172.17.0.3           bridge
</code></pre>

<h2 id="span-showing-container-specific-information-span"><span>Showing Container-specific Information</span></h2>

<p>You can see information about a given container by running <code>netq show
docker container name NAME</code>:</p>

<pre><code>cumulus@server01:~$ netq show docker container name netcat-9092
Name                 Node       IP                IP Masq. Network        Service Name    Up time
-------------------- ---------- ----------------- -------- -------------- --------------- ---------------
netcat-9092          exit01     45.0.0.17/26,     False    host                           0:34:15
                                27.0.0.3/32,
                                192.168.0.15/24
</code></pre>

<h2 id="span-showing-containers-with-a-specific-image-span"><span>Showing Containers with a Specific Image</span></h2>

<p>To search for all the containers on the network with a specific Docker
image, run <code>netq show docker container image IMAGE_NAME</code>:</p>

<pre><code>cumulus@server01:~$ netq show docker container image chilcano/netcat:jessie 
Name                 Node       IP                IP Masq. Network        Service Name    Up time
-------------------- ---------- ----------------- -------- -------------- --------------- ---------------
netcat-8080          exit01     172.17.0.2        True     bridge                         0:32:09
netcat-8080          server01   172.17.0.2        True     bridge                         0:23:11
netcat-8081          exit01     172.17.0.3        True     bridge                         0:32:07
netcat-8081          server01   172.17.0.3        True     bridge                         0:23:10
netcat-8082          exit01     172.17.0.4        True     bridge                         0:32:08
netcat-8082          server01   172.17.0.4        True     bridge                         0:23:08
netcat-8083          exit01     172.17.0.5        True     bridge                         0:32:07
netcat-8083          server01   172.17.0.5        True     bridge                         0:23:07
netcat-8084          exit01     172.17.0.6        True     bridge                         0:32:07
netcat-8084          server01   172.17.0.6        True     bridge                         0:23:09
netcat-8085          exit01     172.17.0.7        True     bridge                         0:32:05
netcat-8085          server01   172.17.0.7        True     bridge                         0:23:06
netcat-8086          exit01     172.17.0.8        True     bridge                         0:32:06
netcat-8086          server01   172.17.0.8        True     bridge                         0:23:06
netcat-8087          exit01     172.17.0.9        True     bridge                         0:32:05
netcat-8087          server01   172.17.0.9        True     bridge                         0:23:06
netcat-8088          exit01     172.17.0.10       True     bridge                         0:32:04
netcat-8088          server01   172.17.0.10       True     bridge                         0:23:06
netcat-8089          exit01     172.17.0.11       True     bridge                         0:32:02
netcat-8089          server01   172.17.0.11       True     bridge                         0:23:03
netcat-8090          exit01     172.17.0.12       True     bridge                         0:32:01
netcat-8090          server01   172.17.0.12       True     bridge                         0:23:05
netcat-8091          exit01     172.17.0.13       True     bridge                         0:32:03
netcat-8091          server01   172.17.0.13       True     bridge                         0:23:04
netcat-8092          exit01     172.17.0.14       True     bridge                         0:31:59
netcat-8092          server01   172.17.0.14       True     bridge                         0:23:03
netcat-9080          exit01     45.0.0.17/26,     False    host                           0:31:51
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9081          exit01     45.0.0.17/26,     False    host                           0:31:51
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9082          exit01     45.0.0.17/26,     False    host                           0:31:52
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9083          exit01     45.0.0.17/26,     False    host                           0:31:49
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9084          exit01     45.0.0.17/26,     False    host                           0:31:50
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9085          exit01     45.0.0.17/26,     False    host                           0:31:50
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9086          exit01     45.0.0.17/26,     False    host                           0:31:48
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9087          exit01     45.0.0.17/26,     False    host                           0:31:48
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9088          exit01     45.0.0.17/26,     False    host                           0:31:47
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9089          exit01     45.0.0.17/26,     False    host                           0:31:48
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9090          exit01     45.0.0.17/26,     False    host                           0:31:46
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9091          exit01     45.0.0.17/26,     False    host                           0:31:47
                                27.0.0.3/32,
                                192.168.0.15/24
netcat-9092          exit01     45.0.0.17/26,     False    host                           0:31:47
                                27.0.0.3/32,
                                192.168.0.15/24
</code></pre>

<h2 id="span-showing-container-connectivity-span"><span>Showing Container Connectivity</span></h2>

<p>To determine how a particular container is attached to a network, run
<code>netq HOST show docker container network NAME connectivity</code>. The output
tells you what host it&rsquo;s launched on, adjacent nodes, adjacent ports.</p>

<pre><code>cumulus@leaf01:~$ netq server01 show docker container network host connectivity 
Name            Swarm Service Cont IP         Network    Node       Port                 Peer Node  Peer Port
--------------- ------------- --------------- ---------- ---------- -------------------- ---------- --------------------
netcat-9080                                   host       server01   swp2:NetQBond-1      noc-pr     swp21:NetQBond-19
netcat-9080                                   host       server01   swp3:NetQBond-1      noc-se     swp21:NetQBond-19
netcat-9080                                   host       server01   swp1:swp1            tor-1      Local Node tor-1 and
                                                                                                    Ports swp6 &lt;==&gt; Remo
                                                                                                    te  Node/s hosts-11
                                                                                                    and Ports swp1
netcat-9081                                   host       server01   swp2:NetQBond-1      noc-pr     swp21:NetQBond-19
netcat-9081                                   host       server01   swp3:NetQBond-1      noc-se     swp21:NetQBond-19
netcat-9081                                   host       server01   swp1:swp1            tor-1      Local Node tor-1 and
                                                                                                    Ports swp6 &lt;==&gt; Remo
                                                                                                    te  Node/s hosts-11
                                                                                                    and Ports swp1
netcat-9082                                   host       server01   swp2:NetQBond-1      noc-pr     swp21:NetQBond-19
netcat-9082                                   host       server01   swp3:NetQBond-1      noc-se     swp21:NetQBond-19
netcat-9082                                   host       server01   swp1:swp1            tor-1      Local Node tor-1 and
                                                                                                    Ports swp6 &lt;==&gt; Remo
                                                                                                    te  Node/s hosts-11
                                                                                                    and Ports swp1
netcat-9083                                   host       server01   swp2:NetQBond-1      noc-pr     swp21:NetQBond-19
netcat-9083                                   host       server01   swp3:NetQBond-1      noc-se     swp21:NetQBond-19
netcat-9083                                   host       server01   swp1:swp1            tor-1      Local Node tor-1 and
                                                                                                    Ports swp6 &lt;==&gt; Remo
                                                                                                    te  Node/s hosts-11
                                                                                                    and Ports swp1
netcat-9084                                   host       server01   swp2:NetQBond-1      noc-pr     swp21:NetQBond-19
netcat-9084                                   host       server01   swp3:NetQBond-1      noc-se     swp21:NetQBond-19
netcat-9084                                   host       server01   swp1:swp1            tor-1      Local Node tor-1 and
                                                                                                    Ports swp6 &lt;==&gt; Remo
                                                                                                    te  Node/s hosts-11
                                                                                                    and Ports swp1
netcat-9085                                   host       server01   swp2:NetQBond-1      noc-pr     swp21:NetQBond-19
netcat-9085                                   host       server01   swp3:NetQBond-1      noc-se     swp21:NetQBond-19
netcat-9085                                   host       server01   swp1:swp1            tor-1      Local Node tor-1 and
                                                                                                    Ports swp6 &lt;==&gt; Remo
                                                                                                    te  Node/s hosts-11
                                                                                                    and Ports swp1
netcat-9086                                   host       server01   swp2:NetQBond-1      noc-pr     swp21:NetQBond-19
netcat-9086                                   host       server01   swp3:NetQBond-1      noc-se     swp21:NetQBond-19
netcat-9086                                   host       server01   swp1:swp1            tor-1      Local Node tor-1 and
                                                                                                    Ports swp6 &lt;==&gt; Remo
                                                                                                    te  Node/s hosts-11
                                                                                                    and Ports swp1
netcat-9087                                   host       server01   swp2:NetQBond-1      noc-pr     swp21:NetQBond-19
netcat-9087                                   host       server01   swp3:NetQBond-1      noc-se     swp21:NetQBond-19
netcat-9087                                   host       server01   swp1:swp1            tor-1      Local Node tor-1 and
                                                                                                    Ports swp6 &lt;==&gt; Remo
                                                                                                    te  Node/s hosts-11
                                                                                                    and Ports swp1
netcat-9088                                   host       server01   swp2:NetQBond-1      noc-pr     swp21:NetQBond-19
netcat-9088                                   host       server01   swp3:NetQBond-1      noc-se     swp21:NetQBond-19
netcat-9088                                   host       server01   swp1:swp1            tor-1      Local Node tor-1 and
                                                                                                    Ports swp6 &lt;==&gt; Remo
                                                                                                    te  Node/s hosts-11
                                                                                                    and Ports swp1
netcat-9089                                   host       server01   swp2:NetQBond-1      noc-pr     swp21:NetQBond-19
netcat-9089                                   host       server01   swp3:NetQBond-1      noc-se     swp21:NetQBond-19
netcat-9089                                   host       server01   swp1:swp1            tor-1      Local Node tor-1 and
                                                                                                    Ports swp6 &lt;==&gt; Remo
                                                                                                    te  Node/s hosts-11
                                                                                                    and Ports swp1
netcat-9090                                   host       server01   swp2:NetQBond-1      noc-pr     swp21:NetQBond-19
netcat-9090                                   host       server01   swp3:NetQBond-1      noc-se     swp21:NetQBond-19
netcat-9090                                   host       server01   swp1:swp1            tor-1      Local Node tor-1 and
                                                                                                    Ports swp6 &lt;==&gt; Remo
                                                                                                    te  Node/s hosts-11
                                                                                                    and Ports swp1
netcat-9091                                   host       server01   swp2:NetQBond-1      noc-pr     swp21:NetQBond-19
netcat-9091                                   host       server01   swp3:NetQBond-1      noc-se     swp21:NetQBond-19
netcat-9091                                   host       server01   swp1:swp1            tor-1      Local Node tor-1 and
                                                                                                    Ports swp6 &lt;==&gt; Remo
                                                                                                    te  Node/s hosts-11
                                                                                                    and Ports swp1
netcat-9092                                   host       server01   swp2:NetQBond-1      noc-pr     swp21:NetQBond-19
netcat-9092                                   host       server01   swp3:NetQBond-1      noc-se     swp21:NetQBond-19
netcat-9092                                   host       server01   swp1:swp1            tor-1      Local Node tor-1 and
                                                                                                    Ports swp6 &lt;==&gt; Remo
                                                                                                    te  Node/s hosts-11
                                                                                                    and Ports swp1
</code></pre>

<h2 id="span-checking-network-traffic-over-a-given-protocol-span"><span>Checking Network Traffic over a Given Protocol</span></h2>

<p>You can include the protocol when you observe a given flow of traffic on
the network and want to identify which container sent or received
traffic using that protocol from a given port.</p>

<pre><code>cumulus@tor-1:mgmt-vrf:~$ netq hosts-11 show docker container 6.0.1.5 tcp 
Container Name       Node       Proto  Port     Cont IP           Network        Host IP               Host Port
-------------------- ---------- ------ -------- ----------------- -------------- --------------------- ------------
netcat-9080          server01   tcp    9192                       host           6.0.1.5/26:swp1.1004  9192
netcat-9080          server01   tcp    8182                       host           6.0.1.5/26:swp1.1004  8182
netcat-9081          server01   tcp    9192                       host           6.0.1.5/26:swp1.1004  9192
netcat-9081          server01   tcp    8182                       host           6.0.1.5/26:swp1.1004  8182
netcat-9082          server01   tcp    8182                       host           6.0.1.5/26:swp1.1004  8182
netcat-9082          server01   tcp    9192                       host           6.0.1.5/26:swp1.1004  9192
netcat-9083          server01   tcp    8182                       host           6.0.1.5/26:swp1.1004  8182
netcat-9083          server01   tcp    9192                       host           6.0.1.5/26:swp1.1004  9192
netcat-9084          server01   tcp    9192                       host           6.0.1.5/26:swp1.1004  9192
netcat-9084          server01   tcp    8182                       host           6.0.1.5/26:swp1.1004  8182
netcat-9085          server01   tcp    8182                       host           6.0.1.5/26:swp1.1004  8182
netcat-9085          server01   tcp    9192                       host           6.0.1.5/26:swp1.1004  9192
netcat-9086          server01   tcp    9192                       host           6.0.1.5/26:swp1.1004  9192
netcat-9086          server01   tcp    8182                       host           6.0.1.5/26:swp1.1004  8182
netcat-9087          server01   tcp    9192                       host           6.0.1.5/26:swp1.1004  9192
netcat-9087          server01   tcp    8182                       host           6.0.1.5/26:swp1.1004  8182
netcat-9088          server01   tcp    9192                       host           6.0.1.5/26:swp1.1004  9192
netcat-9088          server01   tcp    8182                       host           6.0.1.5/26:swp1.1004  8182
netcat-9089          server01   tcp    8182                       host           6.0.1.5/26:swp1.1004  8182
netcat-9089          server01   tcp    9192                       host           6.0.1.5/26:swp1.1004  9192
netcat-9090          server01   tcp    8182                       host           6.0.1.5/26:swp1.1004  8182
netcat-9090          server01   tcp    9192                       host           6.0.1.5/26:swp1.1004  9192
netcat-9091          server01   tcp    9192                       host           6.0.1.5/26:swp1.1004  9192
netcat-9091          server01   tcp    8182                       host           6.0.1.5/26:swp1.1004  8182
netcat-9092          server01   tcp    9192                       host           6.0.1.5/26:swp1.1004  9192
netcat-9092          server01   tcp    8182                       host           6.0.1.5/26:swp1.1004  8182
</code></pre>

<article id="html-search-results" class="ht-content" style="display: none;">

</article>

<footer id="ht-footer">

</footer>

<script src="js/lunr.js"></script>

<script src="js/lunr-extras.js"></script>

<script src="assets/js/scroll-search.js"></script>
</article>

      <script src="https://utteranc.es/client.js"
        repo="CumulusNetworks/docs-internal"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
      </script>

    </div>
    

      


  

    <aside class="book-toc fixed">

  
    <div class="toc">
    
      <button>
      <a href="https://github.com/CumulusNetworks/docs/edit/master/content/version/cumulus-netq-10/Monitoring-Container-Environments-with-NetQ.md" target="_blank" rel="noopener"><img src="/docs.cumulusnetworks.com/svg/pencil-circle.svg" alt="Edit" /> Edit this page</a>
      </button>
    
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#span-netq-container-support-span"><span>NetQ Container Support</span></a>
<ul>
<li><a href="#span-telemetry-server-memory-requirement-span"><span>Telemetry Server Memory Requirement</span></a></li>
</ul></li>
<li><a href="#span-id-src-6488224-monitoringcontainerenvironmentswithnetq-enable-class-confluence-anchor-link-span-span-configuring-the-container-host-span"><span id="src-6488224_MonitoringContainerEnvironmentswithNetQ-enable" class="confluence-anchor-link"></span><span>Configuring the Container Host</span></a></li>
<li><a href="#span-starting-and-stopping-containers-span"><span>Starting and Stopping Containers</span></a></li>
<li><a href="#span-showing-container-summary-information-span"><span>Showing Container Summary Information</span></a></li>
<li><a href="#span-identifying-containers-on-the-network-span"><span>Identifying Containers on the Network</span></a></li>
<li><a href="#span-showing-container-adjacency-span"><span>Showing Container Adjacency</span></a></li>
<li><a href="#span-showing-container-specific-information-span"><span>Showing Container-specific Information</span></a></li>
<li><a href="#span-showing-containers-with-a-specific-image-span"><span>Showing Containers with a Specific Image</span></a></li>
<li><a href="#span-showing-container-connectivity-span"><span>Showing Container Connectivity</span></a></li>
<li><a href="#span-checking-network-traffic-over-a-given-protocol-span"><span>Checking Network Traffic over a Given Protocol</span></a></li>
</ul></li>
</ul>
</nav>
    </div>
  

</aside>






  </main>
  <footer class="footer-top">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="footer-content">
            <div class="mb-4">
                <img src="https://static.cumulusnetworks.com/static/images/shared/cumulus-networks-rt-white-trademarked.ff839f1b2570.svg">
                <p>© <script type="text/javascript">document.write(new Date().getFullYear());</script> Cumulus Networks.<br>
                Site by <a href="//unomena.com/" target="_blank">Unomena</a>.</p>
            </div>
            <ul class="mb-4">
              <li><h4>Products</h4></li>
              <li><a href="//cumulusnetworks.com/products/cumulus-linux/">Cumulus Linux</a></li>
              <li><a href="//cumulusnetworks.com/products/netq/">Cumulus NetQ</a></li>
              <li><a href="//cumulusnetworks.com/products/cumulus-express/">Cumulus Express</a></li>
            </ul>
            <ul class="mb-4">
              <li><h4>Learn</h4></li>
              <li><a href="//cumulusnetworks.com/learn/web-scale-networking-education/">Going web-scale</a></li>
              <li><a href="//cumulusnetworks.com/learn/events/">Events</a></li>
              <li><a href="//cumulusnetworks.com/blog/">Blog</a></li>
            </ul>
            <ul class="mb-4">
              <li><h4>About</h4></li>
              <li><a href="//cumulusnetworks.com/about/">Our story</a></li>
              <li><a href="//cumulusnetworks.com/about/careers/">Careers</a></li>
              <li><a href="//cumulusnetworks.com/about/media-coverage/">Media coverage</a></li>
              <li><a href="//docs.cumulusnetworks.com/" target="_blank">Tech docs</a></li>
              <li><a href="//cumulusnetworks.com/community/">Community</a></li>
            </ul>
            <ul>
              <li>
                <a href="//twitter.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M23 6.628l-2-.5 1-2-2.464.7A4.48 4.48 0 0 0 12 8.128v1c-3.539.73-6.634-1.2-9.5-4.5q-.75 4 1.5 6l-3-.5c.405 2.069 1.362 3.7 4 4l-2.5 1c1 2 2.566 2.31 5 2.5a10.748 10.748 0 0 1-6.5 2c12.755 5.669 20-2.664 20-10V8.3z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//www.facebook.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                      .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M17.768 7.5H13.5V5.6a.972.972 0 0 1 1.012-1.1c.418 0 2.988.01 2.988.01V.5h-4.329C9.244.5 8.5 3.474 8.5 5.355V7.5h-3v4h3v12h5v-12h3.851z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//linkedin.com/company/cumulus-networks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                      .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M6.5 22.5h-5v-13h5zm9-9a2 2 0 0 0-2 2v7h-5v-13h5v1.485a6.307 6.307 0 0 1 3.99-1.495c2.962 0 5.01 2.2 5.01 6.355V22.5h-5v-7a2 2 0 0 0-2-2zM6.5 5A2.5 2.5 0 1 1 4 2.5 2.5 2.5 0 0 1 6.5 5z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//vimeo.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M.5 7.393l.933 1.224S3.36 7.1 4 7.859s3.1 9.925 3.915 11.617c.714 1.483 2.684 3.444 4.845 2.042s9.34-7.529 10.626-14.769-8.642-5.723-9.693.583c2.627-1.577 4.03.642 2.686 3.154s-2.569 4.145-3.211 4.145-1.135-1.679-1.868-4.613c-.76-3.035-.755-8.5-3.911-7.882C4.412 2.721.5 7.393.5 7.393z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//www.github.com/cumulusnetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                        <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                        </style>
                    </defs>
                    <path class="a" d="M19.459 17c0-5.969-4.126-3.532-7.5-3.532s-7.5-2.375-7.5 3.532a3.5 3.5 0 0 0 3.5 3.5h8a3.5 3.5 0 0 0 3.5-3.5z"></path>
                    <path class="a" d="M21.489 10.214l.032.023s2.646-4.572-.6-7.237c-2 0-5.058 3.3-5.058 3.3l.022.016A14.152 14.152 0 0 0 8.1 6.3C8.083 6.285 5.037 3 3.042 3c-3.173 2.6-.729 7.012-.614 7.217a8.876 8.876 0 0 0-1.395 5.743c.241 3.126 2.847 6.54 5.982 6.54H16.9c3.135 0 5.742-3.414 5.982-6.54a8.857 8.857 0 0 0-1.393-5.746z"></path>
                    <ellipse class="a" cx="15.48" cy="17" rx="1" ry="1.5"></ellipse>
                    <ellipse class="a" cx="8.48" cy="17" rx="1" ry="1.5"></ellipse>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//slack.cumulusnetworks.com/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                        <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                        </style>
                    </defs>
                    <rect class="a" x=".5" y=".5" width="23" height="23" rx="6" ry="6"></rect>
                    <circle class="a" cx="12" cy="12" r="6"></circle>
                    <circle class="a" cx="19" cy="5" r="1.5"></circle>
                  </svg>
                </a>
              </li>
              <li>
                <p>Cumulus Networks<sup>®</sup> — Data center networking software for the open, modern data center.</p>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <div class="footer-bottom">
      <div class="container">
          <div class="row">
              <div class="col-12">
                  <ul>
                      <li><a href="//cumulusnetworks.com/legal/trademarks/">Trademarks</a></li>
                      <li><a href="//cumulusnetworks.com/legal/privacy/">Privacy</a></li>
                      <li><a href="//cumulusnetworks.com/legal/">Terms of service</a></li>
                  </ul>
              </div>
          </div>
      </div>
  </div>

  
  

</body>

</html>
