<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Querying the NetQ Database | Cumulus Networks Documentation</title>

  
  <link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet">

  
  
  
  <link rel="stylesheet" href="/docs.cumulusnetworks.com/book.min.a378d8a2da6f5357a83a43dff33d6f77fb70401e0399d5ba78faf81d7a1ae1a8.css">

  
  <link rel="icon" href="/docs.cumulusnetworks.com/icons/favicon.png" type="image/x-icon">

  
  <!--
  Made with Book Theme
  https://github.com/alex-shpak/hugo-book
  -->

  
  
  <script src = "/docs.cumulusnetworks.com/js/codecopy.js"> </script>

</head>


<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  
  <header id="site-nav">
    <div class="header-wrapper flex">
      <a href="/">
        <img src="/header-logo.png" alt="Cumulus Networks">
        <img src="/cumulus-networks-rt-white.svg" alt="Cumulus Networks" class="header-mobile">
        <span>Docs</span>
      </a>
      <ul class="flex">
        <li><a href="//cumulusnetworks.com">HOME</a></li>
        <li><a href="//support.cumulusnetworks.com/">SUPPORT</a></li>
        <li><a href="//docs.cumulusnetworks.com/">DOCS</a></li>
        <li><a href="//education.cumulusnetworks.com">EDUCATION</a></li>
        <li><a href="//cumulusnetworks.com/blog/">BLOG</a></li>
        <li><a href="//forums.cumulusnetworks.com/">FORUMS</a></li>
      </ul>
      <div class="burger-menu">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </header>
  <div id="product-nav" class="flex">
      
    
    <ul>
    
      <li><a href = docs.cumulusnetworks.com/cumulus-linux/ >
        Cumulus Linux </a> </li>
    
      <li class = "active" ><a href = docs.cumulusnetworks.com/cumulus-netq/ >
        Cumulus NetQ </a> </li>
    
      <li><a href = docs.cumulusnetworks.com/cumulus-vx/ >
        Cumulus VX </a> </li>
    
      <li>
        <div id="products-dropdown" class="dropdown">
            <button class="btn" type="button" id="dropdownMenuButton">
              Products
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <a class="dropdown-item" href="">Cumulus RMP</a>
              <a class="dropdown-item" href="">Cumulus Chassis</a>
              <a class="dropdown-item" href="">Cumulus Host Pack</a>
            </div>
        </div>
      </li>
    </ul>
    <div class="search-container">
      <div id="doc-search-box">
        <input type="text" class="doc-search-input" placeholder="Search" value="">
        <span><button type="submit"><img src="/icons/search_20x20.svg" alt=""></button></span>
      </div>
      <div id="dropdown" class="dropdown">
          <button class="btn" type="button" id="dropdownMenuButton">
            v1.2.1
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/cumulus-netq/"> v2.2.0</a>
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-netq-10/"> v1.0.0</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-netq-110/"> v1.1.0</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-netq-121/"> v1.2.1</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-netq-141/"> v1.4.1</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-netq-21/"> v2.1</a>
            
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
          </div>
      </div>
    </div>
  </div>
  <main class="flex container">
    <aside class="book-menu fixed">

      <nav role="navigation">
        <h2 class="book-brand">
          <a href="docs.cumulusnetworks.com">Cumulus Networks Documentation</a>
        </h2>
        
        




  <ul class = "cn-book-section-container" id = "top">
    
        
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
            

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/" >
    Cumulus NetQ
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Getting-Started-with-NetQ/" >
    Getting Started with NetQ
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Getting-Started-with-NetQ/Configuring-High-Availability-Mode/" >
    Configuring High Availability Mode
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Getting-Started-with-NetQ/Upgrading-NetQ/" >
    Upgrading NetQ
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Proactively-Monitoring-the-Network-Fabric/" >
    Proactively Monitoring the Network Fabric
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Proactively-Monitoring-the-Network-Fabric/MLAG-Troubleshooting-with-NetQ/" >
    MLAG Troubleshooting with NetQ
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Early-Access-Features/" >
    Early Access Features
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Early-Access-Features/Chassis-Integration/" >
    Chassis Integration
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Early-Access-Features/Extending-NetQ-with-Custom-Commands/" >
    Extending NetQ with Custom Commands
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Early-Access-Features/Querying-the-NetQ-Database/"  class="active" >
    Querying the NetQ Database
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Early-Access-Features/Collecting-Interface-Statistics/" >
    Collecting Interface Statistics
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Getting-to-Know-NetQ/" >
    Getting to Know NetQ
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/NetQ-Service-Console/" >
    NetQ Service Console
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Taking-Preventative-Steps-with-Your-Network/" >
    Taking Preventative Steps with Your Network
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Performing-Network-Diagnostics/" >
    Performing Network Diagnostics
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Monitoring-the-Physical-Layer/" >
    Monitoring the Physical Layer
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Monitoring-Linux-Hosts-with-NetQ/" >
    Monitoring Linux Hosts with NetQ
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Monitoring-Container-Environments-with-NetQ/" >
    Monitoring Container Environments with NetQ
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Using-NetQ-Virtual-Environments/" >
    Using NetQ Virtual Environments
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Restoring-from-Backups-with-NetQ/" >
    Restoring from Backups with NetQ
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-netq-121/Troubleshooting-NetQ/" >
    Troubleshooting NetQ
  </a>


    </li>
    
  </ul>


  </li>


          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
    
  </ul>









      </nav>

      
      
      
      

      <script src = "/docs.cumulusnetworks.com/js/menuBundle.js"> </script>


    </aside>

    <div class="book-page">

      
      <header class="align-center justify-between book-header">
        <label for="menu-control">
          <img src="/docs.cumulusnetworks.com/svg/menu.svg" alt="Menu" />
        </label>
        <strong>Querying the NetQ Database</strong>
      </header>

      
      
<div class= "notices info" id = "info" >
    This documentation is for an older version of the software. If you are using the current version of Cumulus Linux, this content may not be up to date. The current version of the documentation is available [here](https://docs.cumulusnetworks.com/).
  </div>
<article class="markdown">
<h1>Querying the NetQ Database</h1>

<p>You can query for even more NetQ data using the SQL-like NetQ Query
Language (NetQL) so you can conduct your own custom analysis or
otherwise extend NetQ functionality for your specific environment
without having to write your own custom code. NetQL directly queries the
NetQ database for data that isn&rsquo;t exposed via the check, show and trace
commands.</p>


<div class="notices warning" > <p><strong>Early Access Feature</strong></p>

<p>NetQL is an <a href="https://support.cumulusnetworks.com/hc/en-us/articles/202933878" target="_blank">early access
feature</a>
in Cumulus NetQ 1.2.</p>
 </div>


<h2 id="span-commands-span"><span>Commands</span></h2>

<ul>
<li><p>netq query</p></li>

<li><p>netq config add|del experimental</p></li>
</ul>

<h2 id="span-enabling-netql-span"><span>Enabling NetQL</span></h2>

<p>Since NetQL is an early access feature, you must enable the experimental
option of the NetQ CLI:</p>

<pre><code>cumulus@switch:~$ netq config add experimental
</code></pre>

<h2 id="span-usage-span"><span>Usage</span></h2>

<p>NetQL is a generic structured query language modeled on SQL. The general
command syntax is:</p>

<pre><code>cumulus@switch:~$ netq query 'SELECT &lt;fields&gt; FROM &lt;tables&gt; WHERE &lt;conditions&gt; GROUP BY &lt;fields&gt; ORDER BY &lt;fields&gt;[asc|desc]' [json]
</code></pre>

<p>NetQL supports tab completion. When you press the TAB key after typing
<em>FROM</em>, a list of objects appears from which you can select.</p>

<p>Between the SELECT, FROM, WHERE, GROUP BY and ORDER BY keywords are the
following variables:</p>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Definition</th>
</tr>
</thead>

<tbody>
<tr>
<td>&lt;fields&gt;</td>
<td>One or more key or non-key fields from one of the NetQ database tables.</td>
</tr>

<tr>
<td>&lt;tables&gt;</td>
<td>One or more tables in the NetQ database.</td>
</tr>

<tr>
<td>&lt;conditions&gt;</td>
<td>Qualifiers to the data being queried.</td>
</tr>
</tbody>
</table>

<p>These items are defined below.</p>

<p>The following is a real-world example:</p>

<pre><code>cumulus@switch:~$ netq query 'SELECT hostname, peer_name, peer_hostname, asn, peer_asn, state FROM BgpSession'
hostname    peer_name        peer_hostname    asn     peer_asn    state
----------  ---------------  ---------------  ------  ----------  -----------
leaf01      swp3             spine01          655536  655435      Established
leaf01      swp6             firewall01       655536  655538      Established
leaf01      swp7             firewall02       655536  655539      Established
leaf01      swp4             spine02          655536  655435      Established
leaf01      swp5             spine03          655536  655435      Established
leaf01      swp6.4           firewall01       655536  655538      Established
 
 
...
</code></pre>

<p>The keywords are not case sensitive, so you can use <em>SELECT</em>, <em>Select</em>
or <em>select</em>. The all caps usage is for easier parsing of the queries.</p>

<h2 id="span-tables-and-fields-span"><span>Tables and Fields</span></h2>

<p>One example field is <em>hostname</em>, which is present in every table.
Example tables include Route, Link and BgpSession.</p>


<div class="notices note" > <p>At this time, you cannot have multiple copies of the same table.</p>
 </div>


<p>You can get a list of all the tables known to NetQ by running this
command:</p>

<pre><code>cumulus@switch:~$ netq query show tables
Class                Key Fields
-------------------  ---------------------------------------------------------------------------------------
ASIC                 hostname, vendor, model, model_id, core_bw, ports
Address              hostname, ifname, prefix, mask, is_ipv6, vrf
BgpSession           hostname, peer_name, asn, vrf
Board                hostname, vendor, model, base_mac, part_number, mfg_date, serial_number, label_revision
CPU                  hostname, arch, nos, model, max_freq, mem_total
ClagSession          hostname, clag_sysmac
Description          hostname, objtype, descrid
Disk                 hostname, name, size, d_type, vendor, transport, rev, model
 
...
</code></pre>

<p>You can get a list of all the fields in a table by running this command:</p>

<pre><code>cumulus@switch:~$ netq query show fields BgpSession
Key Fields                           Value Fields
------------------------------------ ----------------------------------------------------------------
hostname, peer_name, asn, vrf        state, peer_router_id, peer_asn, peer_hostname, reason,
                                     ipv4_pfx_rcvd, ipv6_pfx_rcvd, evpn_pfx_rcvd, timestamp,
                                     last_reset_time, conn_estd, conn_dropped, upd8_rx, vrfid,
                                     upd8_tx, up_time, tx_families, objid, rx_families, active,
                                     deleted
</code></pre>

<p>An example query on a single table is:</p>

<pre><code>cumulus@switch:~$ netq query 'SELECT hostname, peer_name, peer_hostname, asn, peer_asn, state FROM BgpSession'
hostname    peer_name        peer_hostname    asn     peer_asn    state
----------  ---------------  ---------------  ------  ----------  -----------
exit01      swp3             spine01          655536  655435      Established
exit01      swp6             firewall01       655536  655538      Established
exit01      swp7             firewall02       655536  655539      Established
exit01      swp4             spine02          655536  655435      Established
exit01      swp5             spine03          655536  655435      Established
exit01      swp6.4           firewall01       655536  655538      Established
 
...
</code></pre>

<p>NetQL displays the values of the specified fields in tabular output.</p>

<h2 id="span-conditions-span"><span>Conditions</span></h2>

<p>Conditions select what data is presented. An example of a condition is
<em>hostname=&ldquo;leaf01&rdquo;</em>. Use double quotes (&ldquo;&rdquo;) for the specific values you
want to match on. You can also use != to indicate non-matching entries.</p>

<p>AND is the only condition supported currently. You cannot perform
queries using parenthesized conditions at this time.</p>

<p>An example conditional query is:</p>

<pre><code>cumulus@switch:~$ netq query 'SELECT hostname, peer_name, peer_hostname, asn, peer_asn, state FROM BgpSession WHERE hostname=&quot;*1&quot; AND peer_name=&quot;swp3*&quot;'
hostname    peer_name    peer_hostname    asn     peer_asn    state
----------  -----------  ---------------  ------  ----------  -----------
exit01      swp3         spine01          655536  655435      Established
exit01      swp3.4       spine01          655536  655435      Established
exit01      swp3.2       spine01          655536  655435      Established
exit01      swp3.3       spine01          655536  655435      Established
spine01     swp3         leaf01           655435  655561      Established
spine01     swp3.4       leaf01           655435  655561      Established
spine01     swp3.2       leaf01           655435  655561      Established
spine01     swp3.3       leaf01           655435  655561      Established
leaf01      swp3         spine01          655559  655435      Established
leaf01      swp3.4       spine01          655559  655435      Established
leaf01      swp3.2       spine01          655559  655435      Established
leaf01      swp3.3       spine01          655559  655435      Established
leaf01      swp3         spine01          655561  655435      Established
leaf01      swp3.4       spine01          655561  655435      Established
leaf01      swp3.2       spine01          655561  655435      Established
leaf01      swp3.3       spine01          655561  655435      Established
leaf02      swp3         spine01          655563  655435      Established
leaf02      swp3.4       spine01          655563  655435      Established
leaf02      swp3.2       spine01          655563  655435      Established
leaf02      swp3.3       spine01          655563  655435      Established
</code></pre>

<h2 id="span-grouping-results-span"><span>Grouping Results</span></h2>

<p>When you want to see not only the value of a field, but also the
aggregated output such as a count or sum, you must specify on which
field to aggregate the data. For example, to get the number of peer ASNs
for each host, the query is:</p>

<pre><code>cumulus@switch:~$ netq query 'SELECT hostname, count(peer_asn) FROM BgpSession GROUP BY hostname'
hostname      count(peer_asn)
----------  -----------------
exit01                     20
exit02                     20
spine01                    32
spine02                    32
spine03                    32
leaf01                     12
leaf02                     12
leaf03                     13
leaf04                     13
leaf05                     13
leaf06                     13 
</code></pre>

<h2 id="span-ordering-results-span"><span>Ordering Results</span></h2>

<p>You can specify which columns you want the output sorted on using the
&ldquo;ORDER BY&rdquo; clause of the query. The general format of the ORDER BY
clause is:</p>

<pre><code>ORDER BY &lt;field1&gt; [ASC|DESC] [&lt;field2&gt; [ASC|DESC]...]
</code></pre>

<p>As an example, the output of the query in the previous section can be
sorted by the COUNT followed by hostname, as follows:</p>

<pre><code>cumulus@switch:~$ etq query 'SELECT hostname, COUNT(peer_asn) FROM BgpSession GROUP BY hostname ORDER BY COUNT(peer_asn)'
hostname      count(peer_asn)
----------  -----------------
leaf01                     12
leaf02                     12
leaf03                     13
leaf04                     13
leaf05                     13
leaf06                     13
exit02                     20
exit01                     20
spine01                    32
spine03                    32
</code></pre>

<p>This sorts the count in ascending order, which is the default and does
not have to be specified. To sort by descending order, use the DESC
keyword, as follows:</p>

<pre><code>cumulus@switch:~$ netq query 'SELECT hostname, COUNT(peer_asn) FROM BgpSession GROUP BY hostname ORDER BY count(peer_asn) DESC, hostname'
hostname      count(peer_asn)
----------  -----------------
spine01                    32
spine02                    32
spine03                    32
exit01                     20
exit02                     20
leaf03                     13
leaf04                     13
leaf05                     13
leaf06                     13
leaf01                     12
leaf02                     12
</code></pre>

<p>The DESC keyword applies only to the field preceding it. Thus, in the
example above, the output is sorted by the nodes with the most peer
ASNs, and nodes with the same number of peer ASNs are sorted based on
the ascending alphabetical sort of the hostname. If you want the
hostnames to be also sorted in reverse alphabetical order, follow the
hostname field also with the DESC keyword, as follows:</p>

<pre><code>cumulus@switch:~$ netq query 'SELECT hostname, COUNT(peer_asn) FROM BgpSession GROUP BY hostname ORDER BY count(peer_asn) DESC, hostname DESC'
hostname      count(peer_asn)
----------  -----------------
spine03                    32
spine02                    32
spine01                    32
exit02                     20
exit01                     20
leaf06                     13
leaf05                     13
leaf04                     13
leaf03                     13
leaf02                     12
leaf01                     12
</code></pre>

<p>The <code>distinct</code> keyword, when used with <code>count</code>, counts only distinct or
unique values. For example, the following queries show the total number
of ASNs in use in the fabric, the number of distinct ASNs, and then the
list of each ASN:</p>

<pre><code>cumulus@switch:~$ netq query 'SELECT COUNT(peer_asn) FROM BgpSession'
  count(peer_asn)
-----------------
              228
cumulus@switch:~$ netq query 'SELECT COUNT(distinct peer_asn) FROM BgpSession'
  count(distinct peer_asn)
--------------------------
                        11
cumulus@switch:~$ netq query 'SELECT set(peer_asn) FROM BgpSession'
set(peer_asn)
--------------------------------------------------------------------------------------------------------
set([655435L, 655559L, 655560L, 655561L, 655562L, 655563L, 655564L, 655536L, 655537L, 655538L, 655539L])
</code></pre>

<h2 id="span-regular-expressions-span"><span>Regular Expressions</span></h2>

<p>You can use any regular expression that Redis supports. They include,
but are not limited to, the following examples:</p>

<ul>
<li><p>h?llo matches hello, hallo and hxllo</p></li>

<li><p>h*llo matches hllo and heeeello</p></li>

<li><p>h[ae]llo matches hello and hallo, but not hillo</p></li>

<li><p>h[^e]llo matches hallo, hbllo, &hellip; but not hello</p></li>

<li><p>h[a-b]llo matches hallo and hbllo</p></li>
</ul>

<p>For example:</p>

<pre><code>cumulus@switch:~$ netq query 'SELECT hostname, peer_name, peer_hostname, asn, peer_asn, state FROM BgpSession WHERE hostname=&quot;*1&quot; AND peer_name=&quot;swp[34]&quot;'
hostname    peer_name    peer_hostname    asn     peer_asn    state
----------  -----------  ---------------  ------  ----------  -----------
exit01      swp3         spine01          655536  655435      Established
exit01      swp4         spine02          655536  655435      Established
firewall01  swp4         exit02           655538  655537      Established
firewall01  swp3         exit01           655538  655536      Established
spine01     swp3         leaf01           655435  655561      Established
spine01     swp4         leaf02           655435  655562      Established
leaf01      swp3         spine01          655559  655435      Established
leaf01      swp4         spine02          655559  655435      Established
</code></pre>

<h2 id="span-json-output-span"><span>JSON Output</span></h2>

<p>Any command&rsquo;s output can be returned in JSON format by ending the
command with the optional <code>json</code> keyword, as follows:</p>

<pre><code>cumulus@switch:~$ netq query 'select count(peer_name) from BgpSession' json  
  [
    {
        &quot;count(peer_name)&quot;:25
    }
  ]
</code></pre>

<article id="html-search-results" class="ht-content" style="display: none;">

</article>

<footer id="ht-footer">

</footer>
</article>

      <script src="https://utteranc.es/client.js"
        repo="CumulusNetworks/docs-internal"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
      </script>

    </div>
    

      


  

    <aside class="book-toc fixed">

  
    <div class="toc">
    
      <button>
      <a href="https://github.com/CumulusNetworks/docs/edit/master/content/version/cumulus-netq-121/Early-Access-Features/Querying-the-NetQ-Database.md" target="_blank" rel="noopener"><img src="/docs.cumulusnetworks.com/svg/pencil-circle.svg" alt="Edit" /> Edit this page</a>
      </button>
    
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#span-commands-span"><span>Commands</span></a></li>
<li><a href="#span-enabling-netql-span"><span>Enabling NetQL</span></a></li>
<li><a href="#span-usage-span"><span>Usage</span></a></li>
<li><a href="#span-tables-and-fields-span"><span>Tables and Fields</span></a></li>
<li><a href="#span-conditions-span"><span>Conditions</span></a></li>
<li><a href="#span-grouping-results-span"><span>Grouping Results</span></a></li>
<li><a href="#span-ordering-results-span"><span>Ordering Results</span></a></li>
<li><a href="#span-regular-expressions-span"><span>Regular Expressions</span></a></li>
<li><a href="#span-json-output-span"><span>JSON Output</span></a></li>
</ul></li>
</ul>
</nav>
    </div>
  

</aside>






  </main>
  <footer class="footer-top">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="footer-content">
            <div class="mb-4">
                <img src="https://static.cumulusnetworks.com/static/images/shared/cumulus-networks-rt-white-trademarked.ff839f1b2570.svg">
                <p>© <script type="text/javascript">document.write(new Date().getFullYear());</script> Cumulus Networks.<br>
                Site by <a href="//unomena.com/" target="_blank">Unomena</a>.</p>
            </div>
            <ul class="mb-4">
              <li><h4>Products</h4></li>
              <li><a href="//cumulusnetworks.com/products/cumulus-linux/">Cumulus Linux</a></li>
              <li><a href="//cumulusnetworks.com/products/netq/">Cumulus NetQ</a></li>
              <li><a href="//cumulusnetworks.com/products/cumulus-express/">Cumulus Express</a></li>
            </ul>
            <ul class="mb-4">
              <li><h4>Learn</h4></li>
              <li><a href="//cumulusnetworks.com/learn/web-scale-networking-education/">Going web-scale</a></li>
              <li><a href="//cumulusnetworks.com/learn/events/">Events</a></li>
              <li><a href="//cumulusnetworks.com/blog/">Blog</a></li>
            </ul>
            <ul class="mb-4">
              <li><h4>About</h4></li>
              <li><a href="//cumulusnetworks.com/about/">Our story</a></li>
              <li><a href="//cumulusnetworks.com/about/careers/">Careers</a></li>
              <li><a href="//cumulusnetworks.com/about/media-coverage/">Media coverage</a></li>
              <li><a href="//docs.cumulusnetworks.com/" target="_blank">Tech docs</a></li>
              <li><a href="//cumulusnetworks.com/community/">Community</a></li>
            </ul>
            <ul>
              <li>
                <a href="//twitter.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M23 6.628l-2-.5 1-2-2.464.7A4.48 4.48 0 0 0 12 8.128v1c-3.539.73-6.634-1.2-9.5-4.5q-.75 4 1.5 6l-3-.5c.405 2.069 1.362 3.7 4 4l-2.5 1c1 2 2.566 2.31 5 2.5a10.748 10.748 0 0 1-6.5 2c12.755 5.669 20-2.664 20-10V8.3z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//www.facebook.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                      .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M17.768 7.5H13.5V5.6a.972.972 0 0 1 1.012-1.1c.418 0 2.988.01 2.988.01V.5h-4.329C9.244.5 8.5 3.474 8.5 5.355V7.5h-3v4h3v12h5v-12h3.851z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//linkedin.com/company/cumulus-networks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                      .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M6.5 22.5h-5v-13h5zm9-9a2 2 0 0 0-2 2v7h-5v-13h5v1.485a6.307 6.307 0 0 1 3.99-1.495c2.962 0 5.01 2.2 5.01 6.355V22.5h-5v-7a2 2 0 0 0-2-2zM6.5 5A2.5 2.5 0 1 1 4 2.5 2.5 2.5 0 0 1 6.5 5z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//vimeo.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M.5 7.393l.933 1.224S3.36 7.1 4 7.859s3.1 9.925 3.915 11.617c.714 1.483 2.684 3.444 4.845 2.042s9.34-7.529 10.626-14.769-8.642-5.723-9.693.583c2.627-1.577 4.03.642 2.686 3.154s-2.569 4.145-3.211 4.145-1.135-1.679-1.868-4.613c-.76-3.035-.755-8.5-3.911-7.882C4.412 2.721.5 7.393.5 7.393z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//www.github.com/cumulusnetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                        <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                        </style>
                    </defs>
                    <path class="a" d="M19.459 17c0-5.969-4.126-3.532-7.5-3.532s-7.5-2.375-7.5 3.532a3.5 3.5 0 0 0 3.5 3.5h8a3.5 3.5 0 0 0 3.5-3.5z"></path>
                    <path class="a" d="M21.489 10.214l.032.023s2.646-4.572-.6-7.237c-2 0-5.058 3.3-5.058 3.3l.022.016A14.152 14.152 0 0 0 8.1 6.3C8.083 6.285 5.037 3 3.042 3c-3.173 2.6-.729 7.012-.614 7.217a8.876 8.876 0 0 0-1.395 5.743c.241 3.126 2.847 6.54 5.982 6.54H16.9c3.135 0 5.742-3.414 5.982-6.54a8.857 8.857 0 0 0-1.393-5.746z"></path>
                    <ellipse class="a" cx="15.48" cy="17" rx="1" ry="1.5"></ellipse>
                    <ellipse class="a" cx="8.48" cy="17" rx="1" ry="1.5"></ellipse>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//slack.cumulusnetworks.com/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                        <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                        </style>
                    </defs>
                    <rect class="a" x=".5" y=".5" width="23" height="23" rx="6" ry="6"></rect>
                    <circle class="a" cx="12" cy="12" r="6"></circle>
                    <circle class="a" cx="19" cy="5" r="1.5"></circle>
                  </svg>
                </a>
              </li>
              <li>
                <p>Cumulus Networks<sup>®</sup> — Data center networking software for the open, modern data center.</p>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <div class="footer-bottom">
      <div class="container">
          <div class="row">
              <div class="col-12">
                  <ul>
                      <li><a href="//cumulusnetworks.com/legal/trademarks/">Trademarks</a></li>
                      <li><a href="//cumulusnetworks.com/legal/privacy/">Privacy</a></li>
                      <li><a href="//cumulusnetworks.com/legal/">Terms of service</a></li>
                  </ul>
              </div>
          </div>
      </div>
  </div>

  
  

</body>

</html>
