<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Ethernet Bridging - VLANs | Cumulus Networks Documentation</title>

  
  <link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet">

  
  
  
  <link rel="stylesheet" href="/docs.cumulusnetworks.com/book.min.a378d8a2da6f5357a83a43dff33d6f77fb70401e0399d5ba78faf81d7a1ae1a8.css">

  
  <link rel="icon" href="/docs.cumulusnetworks.com/icons/favicon.png" type="image/x-icon">

  
  <link rel="alternate" type="application/rss+xml" href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Layer-1-and-Layer-2-Features/Ethernet-Bridging-VLANs/index.xml" title="Cumulus Networks Documentation" />
  <!--
  Made with Book Theme
  https://github.com/alex-shpak/hugo-book
  -->

  
  
  <script src = "/docs.cumulusnetworks.com/js/codecopy.js"> </script>

</head>


<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  
  <header id="site-nav">
    <div class="header-wrapper flex">
      <a href="/">
        <img src="/header-logo.png" alt="Cumulus Networks">
        <img src="/cumulus-networks-rt-white.svg" alt="Cumulus Networks" class="header-mobile">
        <span>Docs</span>
      </a>
      <ul class="flex">
        <li><a href="//cumulusnetworks.com">HOME</a></li>
        <li><a href="//support.cumulusnetworks.com/">SUPPORT</a></li>
        <li><a href="//docs.cumulusnetworks.com/">DOCS</a></li>
        <li><a href="//education.cumulusnetworks.com">EDUCATION</a></li>
        <li><a href="//cumulusnetworks.com/blog/">BLOG</a></li>
        <li><a href="//forums.cumulusnetworks.com/">FORUMS</a></li>
      </ul>
      <div class="burger-menu">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </header>
  <div id="product-nav" class="flex">
      
    
    <ul>
    
      <li><a href = docs.cumulusnetworks.com/cumulus-linux/ >
        Cumulus Linux </a> </li>
    
      <li><a href = docs.cumulusnetworks.com/cumulus-netq/ >
        Cumulus NetQ </a> </li>
    
      <li><a href = docs.cumulusnetworks.com/cumulus-vx/ >
        Cumulus VX </a> </li>
    
      <li>
        <div id="products-dropdown" class="dropdown">
            <button class="btn" type="button" id="dropdownMenuButton">
              Products
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <a class="dropdown-item" href="">Cumulus RMP</a>
              <a class="dropdown-item" href="">Cumulus Chassis</a>
              <a class="dropdown-item" href="">Cumulus Host Pack</a>
            </div>
        </div>
      </li>
    </ul>
    <div class="search-container">
      <div id="doc-search-box">
        <input type="text" class="doc-search-input" placeholder="Search" value="">
        <span><button type="submit"><img src="/icons/search_20x20.svg" alt=""></button></span>
      </div>
      <div id="dropdown" class="dropdown">
          <button class="btn" type="button" id="dropdownMenuButton">
            v3.1.2
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/cumulus-rmp/"> v3.7</a>
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-rmp-25esr/"> v2.5.12</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-rmp-30/"> v3.0.1</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-rmp-31/"> v3.1.2</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-rmp-321/"> v3.2.1</a>
            
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
          </div>
      </div>
    </div>
  </div>
  <main class="flex container">
    <aside class="book-menu fixed">

      <nav role="navigation">
        <h2 class="book-brand">
          <a href="docs.cumulusnetworks.com">Cumulus Networks Documentation</a>
        </h2>
        
        




  <ul class = "cn-book-section-container" id = "top">
    
        
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
            

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/" >
    Cumulus RMP User Guide
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/System-Management/" >
    System Management
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/System-Management/Authentication-Authorization-and-Accounting/" >
    Authentication, Authorization, and Accounting
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/System-Management/Authentication-Authorization-and-Accounting/SSH-for-Remote-Access/" >
    SSH for Remote Access
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/System-Management/Authentication-Authorization-and-Accounting/User-Accounts/" >
    User Accounts
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/System-Management/Authentication-Authorization-and-Accounting/Using-sudo-to-Delegate-Privileges/" >
    Using sudo to Delegate Privileges
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/System-Management/Authentication-Authorization-and-Accounting/LDAP-Authentication-and-Authorization/" >
    LDAP Authentication and Authorization
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/System-Management/Installation-Upgrading-and-Package-Management/" >
    Installation, Upgrading and Package Management
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/System-Management/Installation-Upgrading-and-Package-Management/Managing-Cumulus-RMP-Disk-Images/" >
    Managing Cumulus RMP Disk Images
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/System-Management/Installation-Upgrading-and-Package-Management/Adding-and-Updating-Packages/" >
    Adding and Updating Packages
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/System-Management/Installation-Upgrading-and-Package-Management/Zero-Touch-Provisioning/" >
    Zero Touch Provisioning
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/System-Management/Setting-Date-and-Time/" >
    Setting Date and Time
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/System-Management/Managing-Application-Daemons/" >
    Managing Application Daemons
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/System-Management/Configuring-switchd/" >
    Configuring switchd
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Configuring-and-Managing-Network-Interfaces/" >
    Configuring and Managing Network Interfaces
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Configuring-and-Managing-Network-Interfaces/Layer-1-and-Switch-Port-Attributes/" >
    Layer 1 and Switch Port Attributes
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Configuring-and-Managing-Network-Interfaces/Configuring-DHCP-Relays-and-Servers/" >
    Configuring DHCP Relays and Servers
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Configuring-and-Managing-Network-Interfaces/Network-Command-Line-Utility/" >
    Network Command Line Utility
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Layer-1-and-Layer-2-Features/" >
    Layer 1 and Layer 2 Features
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Layer-1-and-Layer-2-Features/Ethernet-Bridging-VLANs/"  class="active" >
    Ethernet Bridging - VLANs
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Layer-1-and-Layer-2-Features/Ethernet-Bridging-VLANs/VLAN-Tagging/" >
    VLAN Tagging
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Layer-1-and-Layer-2-Features/Ethernet-Bridging-VLANs/VLAN-aware-Bridge-Mode-for-Large-scale-Layer-2-Environments/" >
    VLAN-aware Bridge Mode for Large-scale Layer 2 Environments
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Layer-1-and-Layer-2-Features/Spanning-Tree-and-Rapid-Spanning-Tree/" >
    Spanning Tree and Rapid Spanning Tree
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Layer-1-and-Layer-2-Features/Link-Layer-Discovery-Protocol/" >
    Link Layer Discovery Protocol
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Layer-1-and-Layer-2-Features/Prescriptive-Topology-Manager-PTM/" >
    Prescriptive Topology Manager - PTM
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Layer-1-and-Layer-2-Features/Bonding-Link-Aggregation/" >
    Bonding - Link Aggregation
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Routing/" >
    Routing
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Routing/Management-VRF/" >
    Management VRF
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Monitoring-and-Troubleshooting/" >
    Monitoring and Troubleshooting
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Monitoring-and-Troubleshooting/Understanding-and-Decoding-the-cl-support-Output-File/" >
    Understanding and Decoding the cl-support Output File
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Monitoring-and-Troubleshooting/Understanding-and-Decoding-the-cl-support-Output-File/Troubleshooting-Log-Files/" >
    Troubleshooting Log Files
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Monitoring-and-Troubleshooting/Understanding-and-Decoding-the-cl-support-Output-File/Troubleshooting-the-etc-Directory/" >
    Troubleshooting the etc Directory
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Monitoring-and-Troubleshooting/Understanding-and-Decoding-the-cl-support-Output-File/Troubleshooting-the-support-Directory/" >
    Troubleshooting the support Directory
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Monitoring-and-Troubleshooting/Troubleshooting-Network-Interfaces/" >
    Troubleshooting Network Interfaces
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Monitoring-and-Troubleshooting/Troubleshooting-Network-Interfaces/Monitoring-Interfaces-and-Transceivers-Using-ethtool/" >
    Monitoring Interfaces and Transceivers Using ethtool
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Monitoring-and-Troubleshooting/Network-Troubleshooting/" >
    Network Troubleshooting
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Monitoring-and-Troubleshooting/Network-Troubleshooting/Using-netshow-to-Troubleshoot-Your-Network-Configuration/" >
    Using netshow to Troubleshoot Your Network Configuration
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Monitoring-and-Troubleshooting/Network-Troubleshooting/Monitoring-System-Statistics-and-Network-Traffic-with-sFlow/" >
    Monitoring System Statistics and Network Traffic with sFlow
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Monitoring-and-Troubleshooting/Single-User-Mode-Boot-Recovery/" >
    Single User Mode - Boot Recovery
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Monitoring-and-Troubleshooting/Resource-Diagnostics-Using-cl-resource-query/" >
    Resource Diagnostics Using cl-resource-query
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Monitoring-and-Troubleshooting/Monitoring-System-Hardware/" >
    Monitoring System Hardware
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Monitoring-and-Troubleshooting/SNMP-Monitoring/" >
    SNMP Monitoring
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Quick-Start-Guide/" >
    Quick Start Guide
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-rmp-31/Cumulus-RMP-Index/" >
    Cumulus RMP Index
  </a>


    </li>
    
  </ul>


  </li>


          
      
          
      
          
      
          
      
    
  </ul>









      </nav>

      
      
      
      

      <script src = "/docs.cumulusnetworks.com/js/menuBundle.js"> </script>


    </aside>

    <div class="book-page">

      
      <header class="align-center justify-between book-header">
        <label for="menu-control">
          <img src="/docs.cumulusnetworks.com/svg/menu.svg" alt="Menu" />
        </label>
        <strong>Ethernet Bridging - VLANs</strong>
      </header>

      
      
<div class= "notices info" id = "info" >
  This documentation is for an older version of the software. If you are using the current version of Cumulus Linux, this content may not be up to date. The current version of the documentation is available [here](https://docs.cumulusnetworks.com/).
  </div>
<article class="markdown">
<h1>Ethernet Bridging - VLANs</h1>

<p><details></p>

<p>Ethernet bridges provide a means for hosts to communicate at layer 2.
Bridge members can be individual physical interfaces, bonds or logical
interfaces that traverse an 802.1Q VLAN trunk. Cumulus RMP does not put
all ports into a bridge by default.</p>

<p>Cumulus RMP has a unique method for configuring bridges that are
<em><a href="/version/cumulus-rmp-31/Layer-1-and-Layer-2-Features/Ethernet-Bridging---VLANs/VLAN-aware-Bridge-Mode-for-Large-scale-Layer-2-Environments">VLAN-aware</a></em>.
The bridge driver in Cumulus RMP is capable of VLAN filtering, which
allows for configurations that are similar to incumbent network devices.
While Cumulus RMP supports Ethernet bridges in traditional mode, Cumulus
Networks **** recommends using
<a href="http://docs.cumulusnetworks.com/display/CL25/VLAN-aware+Bridge+Mode+for+Large-scale+Layer+2+Environments" target="_blank">VLAN-aware</a>
mode.</p>

<p>For a comparison of traditional and VLAN-aware modes, read <a href="https://support.cumulusnetworks.com/hc/en-us/articles/204909397" target="_blank">this
knowledge base
article</a>.</p>


<div class="notices tip" > <p>You can configure both VLAN-aware and traditional mode bridges on the
same network in Cumulus RMP; however you should not have more than one
VLAN-aware bridge on a given switch.</p>
 </div>


<h3 id="span-configuration-files-span"><span>Configuration Files</span></h3>

<ul>
<li>/etc/network/interfaces</li>
</ul>

<h3 id="span-commands-span"><span>Commands</span></h3>

<ul>
<li><p>brctl</p></li>

<li><p>bridge</p></li>

<li><p>ip addr</p></li>

<li><p>ip link</p></li>
</ul>

<h3 id="span-creating-a-bridge-between-physical-interfaces-span"><span>Creating a Bridge between Physical Interfaces</span></h3>

<p>The basic use of bridging is to connect all of the physical and logical
interfaces in the system into a single layer 2 domain.</p>








<img class = "confluence-embedded-image" src = "/images/download/attachments/5122778/example-bridge.png" alt = "/images/download/attachments/5122778/example-bridge.png"


 />


<h4 id="span-creating-the-bridge-and-adding-interfaces-span"><span>Creating the Bridge and Adding Interfaces</span></h4>

<p>You statically manage bridge configurations in
<code>/etc/network/interfaces</code>. The following configuration snippet details
an example bridge used throughout this chapter, explicitly enabling
<a href="/version/cumulus-rmp-31/Layer-1-and-Layer-2-Features/Spanning-Tree-and-Rapid-Spanning-Tree">spanning
tree</a>
and setting the bridge MAC address ageing timer. First, create a bridge
with a descriptive name of 15 characters or fewer. Then add the logical
interfaces (bond0) and physical interfaces (swp5, swp6) to assign to
that bridge.</p>

<pre><code>auto my_bridge
iface my_bridge
    bridge-ports bond0 swp5 swp6
    bridge-ageing 150
    bridge-stp on
</code></pre>

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Keyword</p></th>
<th><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>bridge-ports</p></td>
<td><p>List of logical and physical ports belonging to the logical bridge.</p></td>
</tr>
<tr class="even">
<td><p>bridge-ageing</p></td>
<td><p>Maximum amount of time before a MAC addresses learned on the bridge expires from the bridge MAC cache. The default value is 300 seconds.</p></td>
</tr>
<tr class="odd">
<td><p>bridge-stp</p></td>
<td><p>Enables spanning tree protocol on this bridge. The default spanning tree mode is Per VLAN Rapid Spanning Tree Protocol (PVRST).</p>
<p>For more information on spanning-tree configurations see the configuration section: <a href="/version/cumulus-rmp-31/Layer-1-and-Layer-2-Features/Spanning-Tree-and-Rapid-Spanning-Tree">Spanning Tree and Rapid Spanning Tree</a>.</p></td>
</tr>
</tbody>
</table>

<p>To bring up the bridge my_bridge, use the <code>ifreload</code> command:</p>

<pre><code>cumulus@switch:~$ sudo ifreload -a
</code></pre>

<p><summary>Runtime Configuration (Advanced) </summary></p>


<div class="notices warning" > <p>A runtime configuration is non-persistent, which means the configuration
you create here does not persist after you reboot the switch.</p>
 </div>


<p>To create the bridge and interfaces on the bridge, run:</p>

<pre><code>cumulus@switch:~$ sudo brctl addbr my_bridge

cumulus@switch:~$ sudo brctl addif my_bridge bond0 swp5 swp6

cumulus@switch:~$ sudo brctl show
bridge name        bridge id          STP enabled     interfaces
my_bridge          8000.44383900129b  yes             bond0
                                                      swp5
                                                      swp6
cumulus@switch:~$ sudo ip link set up dev my_bridge
cumulus@switch:~$ sudo ip link set up dev bond0
cumulus@switch:~$ sudo for I in {5..6}; do  ip link set up dev swp$I; done
</code></pre>

<h4 id="span-showing-and-verifying-the-bridge-configuration-span"><span>Showing and Verifying the Bridge Configuration</span></h4>

<pre><code>cumulus@switch:~$ ip link show my_bridge
56: my_bridge: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP mode DEFAULT
 link/ether 44:38:39:00:12:9b brd ff:ff:ff:ff:ff:ff
</code></pre>


<div class="notices warning" > <p>Do not try to bridge the management port, eth0, with any switch ports
(like swp0, swp1, and so forth). For example, if you created a bridge
with eth0 and swp1, it will <strong>not</strong> work.</p>
 </div>


<p><summary>Using netshow to Display Bridge Information </summary></p>

<p><code>netshow</code> is a Cumulus RMP tool for retrieving information about your
network configuration.</p>

<pre><code>cumulus@switch$ netshow interface bridge
    Name       Speed    Mtu    Mode       Summary
--  ---------  -------  -----  ---------  -----------------------
UP  my_bridge  N/A      1500   Bridge/L2  Untagged: bond0, swp5-6
                                          Root Port: bond0
                                          VlanID: Untagged
</code></pre>

<h5 id="span-bridge-interface-mac-address-and-mtu-span"><span>Bridge Interface MAC Address and MTU</span></h5>

<p>A bridge is a logical interface with a MAC address and an
<a href="Layer-1-and-Switch-Port-Attributes.html#src-5122796_Layer1andSwitchPortAttributes-mtu" target="_blank">MTU</a>
(maximum transmission unit). The bridge MTU is the minimum MTU among all
its members. The bridge&rsquo;s MAC address is inherited from the first
interface that is added to the bridge as a member. The bridge MAC
address remains unchanged until the member interface is removed from the
bridge, at which point the bridge will inherit from the next member
interface, if any. The bridge can also be assigned an IP address, as
discussed below.</p>

<h3 id="span-examining-mac-addresses-span"><span>Examining MAC Addresses</span></h3>

<p>A bridge forwards frames by looking up the destination MAC address. A
bridge learns the source MAC address of a frame when the frame enters
the bridge on an interface. After the MAC address is learned, the bridge
maintains an age for the MAC entry in the bridge table. The age is
refreshed when a frame is seen again with the same source MAC address.
When a MAC is not seen for greater than the MAC ageing time, the MAC
address is deleted from the bridge table.</p>

<p>The following shows the MAC address table of the example bridge. Notice
that the <code>is local?</code> column indicates if the MAC address is the
interface&rsquo;s own MAC address (<code>is local</code> is <em>yes</em>), or if it is learned
on the interface from a packet&rsquo;s source MAC (where <code>is local</code> is <em>no</em>):</p>

<pre><code>cumulus@switch:~$ sudo brctl showmacs my_bridge
 port name mac addr              is local?       ageing timer
 swp4      06:90:70:22:a6:2e     no                19.47
 swp1      12:12:36:43:6f:9d     no                40.50
 bond0     2a:95:22:94:d1:f0     no                 1.98
 swp1      44:38:39:00:12:9b     yes                0.00
 swp2      44:38:39:00:12:9c     yes                0.00
 swp3      44:38:39:00:12:9d     yes                0.00
 swp4      44:38:39:00:12:9e     yes                0.00
 bond0     44:38:39:00:12:9f     yes                0.00
 swp2      90:e2:ba:2c:b1:94     no                12.84
 swp2      a2:84:fe:fc:bf:cd     no                 9.43
</code></pre>

<p>You can use the <code>bridge fdb</code> command to display the MAC address table as
well:</p>

<pre><code>cumulus@switch$ bridge fdb show
44:38:39:00:12:9c dev swp2 VLAN 0 master bridge-A permanent
44:38:39:00:12:9b dev swp1 VLAN 0 master bridge-A permanent
44:38:39:00:12:9e dev swp4 VLAN 0 master bridge-B permanent
44:38:39:00:12:9d dev swp3 VLAN 0 master bridge-B permanent
</code></pre>


<div class="notices note" > <p>You can clear a MAC address from the table using the <code>bridge fdb</code>
command:</p>

<pre><code>cumulus@switch:~$ sudo bridge fdb del 44:38:39:00:12:9c dev swp2
</code></pre>
 </div>


<h3 id="span-multiple-bridges-span"><span>Multiple Bridges</span></h3>

<p>Sometimes it is useful to logically divide a switch into multiple layer
2 domains, so that hosts in one domain can communicate with other hosts
in the same domain but not in other domains. You can achieve this by
configuring multiple bridges and putting different sets of interfaces in
the different bridges. In the following example, host-1 and host-2 are
connected to the same bridge (bridge-A), while host-3 and host-4 are
connected to another bridge (bridge-B). host-1 and host-2 can
communicate with each other, so can host-3 and host-4, but host-1 and
host-2 cannot communicate with host-3 and host-4.</p>








<img class = "confluence-embedded-image" src = "/images/download/attachments/5122778/multiple-bridges.png" alt = "/images/download/attachments/5122778/multiple-bridges.png"


width = 500

 />


<p>To configure multiple bridges, edit <code>/etc/network/interfaces</code>:</p>

<pre><code>auto bridge-A
iface bridge-A
    bridge-ports swp1 swp2
    bridge-stp on
 
auto bridge-B
iface bridge-B
    bridge-ports swp3 swp4
    bridge-stp on
</code></pre>

<p>To bring up the bridges bridge-A and bridge-B, use the <code>ifreload</code>
command:</p>

<pre><code>cumulus@switch:~$ sudo ifreload -a
</code></pre>

<p><summary>Runtime Configuration (Advanced) </summary></p>


<div class="notices warning" > <p>A runtime configuration is non-persistent, which means the configuration
you create here does not persist after you reboot the switch.</p>
 </div>


<pre><code>cumulus@switch:~$ sudo brctl addbr bridge-A

cumulus@switch:~$ sudo brctl addif bridge-A swp1 swp2

cumulus@switch:~$ sudo brctl addbr bridge-B

cumulus@switch:~$ sudo brctl addif bridge-B swp3 swp4

cumulus@switch:~$ sudo for I in {1..4}; do  ip link set up dev swp$I; done

cumulus@switch:~$ sudo ip link set up dev bridge-A

cumulus@switch:~$ sudo ip link set up dev bridge-B

cumulus@switch:~$ sudo brctl show
 bridge name     bridge id               STP enabled     interfaces
 bridge-A        8000.44383900129b       yes             swp1
                                                         swp2
 bridge-B        8000.44383900129d       yes             swp3
                                                         swp4

cumulus@switch$ ip link show bridge-A
97: bridge-A: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP mode DEFAULT
 link/ether 70:72:cf:9d:4e:35 brd ff:ff:ff:ff:ff:ff
cumulus@switch$ ip link show bridge-B
98: bridge-B: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP mode DEFAULT
 link/ether 70:72:cf:9d:4e:37 brd ff:ff:ff:ff:ff:ff
</code></pre>

<p><summary>Using netshow to Display the Bridges </summary></p>

<p><code>netshow</code> is a Cumulus RMP tool for retrieving information about your
network configuration.</p>

<pre><code>cumulus@switch$ netshow interface bridge
    Name      Speed    Mtu    Mode       Summary
--  --------  -------  -----  ---------  ----------------
UP  bridge-A  N/A      1500   Bridge/L2  Untagged: swp1-2
                                         Root Port: swp2
                                         VlanID: Untagged
UP  bridge-B  N/A      1500   Bridge/L2  Untagged: swp3-4
                                         Root Port: swp3
                                         VlanID: Untagged
</code></pre>

<h3 id="span-configuring-an-svi-switch-vlan-interface-span"><span>Configuring an SVI (Switch VLAN Interface)</span></h3>

<p>A bridge creates a layer 2 forwarding domain for hosts to communicate. A
bridge can be assigned an IP address — typically of the same subnet as
the hosts that are members of the bridge — and participate in routing
topologies. This enables hosts within a bridge to communicate with other
hosts outside the bridge through layer 3 routing.</p>


<div class="notices note" > <p>When an interface is added to a bridge, it ceases to function as a
router interface, and the IP address on the interface, if any, becomes
reachable.</p>
 </div>









<img class = "confluence-embedded-image" src = "/images/download/attachments/5122778/svi.png" alt = "/images/download/attachments/5122778/svi.png"


width = 500

 />


<p>The configuration for the two bridges example looks like the following:</p>

<pre><code>auto swp5
iface swp5
 address 192.168.1.1/24
 address 2001:db8:1::1/64
 
auto bridge-A
iface bridge-A
 address 192.168.2.1/24
 address 2001:db8:2::1/64
 bridge-ports swp1 swp2
 bridge-stp on

auto bridge-B
iface bridge-B
 address 192.168.3.1/24
 address 2001:db8:3::1/64
 bridge-ports swp3 swp4
 bridge-stp on
</code></pre>

<p>To bring up swp5 and bridges bridge-A and bridge-B, use the <code>ifreload</code>
command:</p>

<pre><code>cumulus@switch:~$ sudo ifreload -a
</code></pre>

<h4 id="span-showing-and-verifying-the-bridge-configuration-span-1"><span>Showing and Verifying the Bridge Configuration</span></h4>

<pre><code>cumulus@switch$ ip addr show bridge-A
106: bridge-A: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP
 link/ether 70:72:cf:9d:4e:35 brd ff:ff:ff:ff:ff:ff
 inet 192.168.2.1/24 scope global bridge-A
 inet6 2001:db8:2::1/64 scope global
 valid_lft forever preferred_lft forever
 inet6 fe80::7272:cfff:fe9d:4e35/64 scope link
 valid_lft forever preferred_lft forever
cumulus@switch$ ip addr show bridge-B
107: bridge-B: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP
 link/ether 70:72:cf:9d:4e:37 brd ff:ff:ff:ff:ff:ff
 inet 192.168.3.1/24 scope global bridge-B
 inet6 2001:db8:3::1/64 scope global
 valid_lft forever preferred_lft forever
 inet6 fe80::7272:cfff:fe9d:4e37/64 scope link
 valid_lft forever preferred_lft forever
</code></pre>

<p>To see all the routes on the switch use the <code>ip route show</code> command:</p>

<pre><code>cumulus@switch$ ip route show
192.168.1.0/24 dev swp5 proto kernel scope link src 192.168.1.2 dead
192.168.2.0/24 dev bridge-A proto kernel scope link src 192.168.2.1
192.168.3.0/24 dev bridge-B proto kernel scope link src 192.168.3.1
</code></pre>

<p><summary>Runtime Configuration (Advanced) </summary></p>


<div class="notices warning" > <p>A runtime configuration is non-persistent, which means the configuration
you create here does not persist after you reboot the switch.</p>
 </div>


<p>To add an IP address to a bridge:</p>

<pre><code>cumulus@switch:~$ sudo ip addr add 192.0.2.101/24 dev bridge-A

cumulus@switch:~$ sudo ip addr add 192.0.2.102/24 dev bridge-B
</code></pre>

<p><summary>Using netshow to Display the SVI </summary></p>

<p><code>netshow</code> is a Cumulus RMP tool for retrieving information about your
network configuration.</p>

<pre><code>cumulus@switch$ netshow interface bridge
    Name      Speed    Mtu    Mode       Summary
--  --------  -------  -----  ---------  ------------------------------------
UP  bridge-A  N/A      1500   Bridge/L3  IP: 192.168.2.1/24, 2001:db8:2::1/64
                                         Untagged: swp1-2
                                         Root Port: swp2
                                         VlanID: Untagged
UP  bridge-B  N/A      1500   Bridge/L3  IP: 192.168.3.1/24, 2001:db8:3::1/64
                                         Untagged: swp3-4
                                         Root Port: swp3
                                         VlanID: Untagged
</code></pre>

<h3 id="span-id-src-5122778-ethernetbridging-vlans-vlan-tagging-class-confluence-anchor-link-span-span-using-trunks-in-traditional-bridging-mode-span"><span id="src-5122778_EthernetBridging-VLANs-VLAN_tagging" class="confluence-anchor-link"></span><span>Using Trunks in Traditional Bridging Mode</span></h3>

<p>The <a href="http://www.ieee802.org/1/pages/802.1Q.html" target="_blank">IEEE standard</a> for
trunking is 802.1Q. The 802.1Q specification adds a 4 byte header within
the Ethernet frame that identifies the VLAN of which the frame is a
member.</p>

<p>802.1Q also identifies an <em>untagged</em> frame as belonging to the <em>native</em>
VLAN (most network devices default their native VLAN to 1). The concept
of native, non-native, tagged or untagged has generated confusion due to
mixed terminology and vendor-specific implementations. Some
clarification is in order:</p>

<ul>
<li><p>A <em>trunk port</em> is a switch port configured to send and receive
802.1Q tagged frames.</p></li>

<li><p>A switch sending an untagged (bare Ethernet) frame on a trunk port
is sending from the native VLAN defined on the trunk port.</p></li>

<li><p>A switch sending a tagged frame on a trunk port is sending to the
VLAN identified by the 802.1Q tag.</p></li>

<li><p>A switch receiving an untagged (bare Ethernet) frame on a trunk port
places that frame in the native VLAN defined on the trunk port.</p></li>

<li><p>A switch receiving a tagged frame on a trunk port places that frame
in the VLAN identified by the 802.1Q tag.</p></li>
</ul>

<p>A bridge in traditional mode has no concept of trunks, just tagged or
untagged frames. With a trunk of 200 VLANs, there would need to be 199
bridges, each containing a tagged physical interface, and one bridge
containing the native untagged VLAN. See the examples below for more
information.</p>

<p><span id="src-5122778_EthernetBridging-VLANs-VLAN_tagging"></span></p>


<div class="notices note" > <p>The interaction of tagged and un-tagged frames on the same trunk often
leads to undesired and unexpected behavior. A switch that uses VLAN 1
for the native VLAN may send frames to a switch that uses VLAN 2 for the
native VLAN, thus merging those two VLANs and their spanning tree state.</p>
 </div>


<h4 id="span-trunk-example-span"><span>Trunk Example</span></h4>








<img class = "confluence-embedded-image" src = "/images/download/attachments/5122778/trunk.png" alt = "/images/download/attachments/5122778/trunk.png"


width = 500

 />


<p>Configure the following in <code>/etc/network/interfaces</code>:</p>

<pre><code>auto br-VLAN100
iface br-VLAN100
 bridge-ports swp1.100 swp2.100
 bridge-stp on
auto br-VLAN200
iface br-VLAN200
 bridge-ports swp1.200 swp2.200
 bridge-stp on
</code></pre>

<p>To bring up br-VLAN100 and br-VLAN200, use the <code>ifreload</code> command:</p>

<pre><code>cumulus@switch:~$ sudo ifreload -a
</code></pre>

<h4 id="span-showing-and-verifying-the-trunk-span"><span>Showing and Verifying the Trunk</span></h4>

<pre><code>cumulus@switch:~$ brctl show
bridge name bridge id         STP enabled interfaces
br-VLAN100  8000.7072cf9d4e35 yes         swp1.100
                                          swp2.100
br-VLAN200  8000.7072cf9d4e35 yes         swp1.200
                                          swp2.200
</code></pre>

<p><summary>Using netshow to Display the Trunk </summary></p>

<p><code>netshow</code> is a Cumulus RMP tool for retrieving information about your
network configuration.</p>

<pre><code>cumulus@switch$ netshow interface bridge
    Name        Speed    Mtu    Mode       Summary
--  ----------  -------  -----  ---------  ----------------------
UP  br-VLAN100  N/A      1500   Bridge/L2  Tagged: swp1-2
                                           STP: rootSwitch(32768)
                                           VlanID: 100
UP  br-VLAN200  N/A      1500   Bridge/L2  Tagged: swp1-2
                                           STP: rootSwitch(32768)
                                           VlanID: 200
</code></pre>

<h4 id="span-additional-examples-span"><span>Additional Examples</span></h4>

<p>You can find additional examples of VLAN tagging in <a href="/version/cumulus-rmp-31/Layer-1-and-Layer-2-Features/Ethernet-Bridging---VLANs/VLAN-Tagging">this
chapter</a>.</p>

<h3 id="span-configuration-files-span-1"><span>Configuration Files</span></h3>

<ul>
<li><p>/etc/network/interfaces</p></li>

<li><p>/etc/network/interfaces.d/</p></li>

<li><p>/etc/network/if-down.d/</p></li>

<li><p>/etc/network/if-post-down.d/</p></li>

<li><p>/etc/network/if-pre-up.d/</p></li>

<li><p>/etc/network/if-up.d/</p></li>
</ul>

<h3 id="span-useful-links-span"><span>Useful Links</span></h3>

<ul>
<li><p><a href="http://www.linuxfoundation.org/collaborate/workgroups/networking/bridge" target="_blank">www.linuxfoundation.org/collaborate/workgroups/networking/bridge</a></p></li>

<li><p><a href="http://www.linuxfoundation.org/collaborate/workgroups/networking/vlan" target="_blank">www.linuxfoundation.org/collaborate/workgroups/networking/vlan</a></p></li>

<li><p><a href="http://www.linuxjournal.com/article/8172" target="_blank">www.linuxjournal.com/article/8172</a></p></li>
</ul>

<h3 id="span-caveats-and-errata-span"><span>Caveats and Errata</span></h3>

<ul>
<li>The same bridge cannot contain multiple subinterfaces of the
<strong>same</strong> port as members. Attempting to apply such a configuration
will result in an error.</li>
</ul>

<article id="html-search-results" class="ht-content" style="display: none;">

</article>

<footer id="ht-footer">

</footer>

<p></details></p>
</article>

      <script src="https://utteranc.es/client.js"
        repo="CumulusNetworks/docs-internal"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
      </script>

    </div>
    

      


  

    <aside class="book-toc fixed">

  
    <div class="toc">
    
      <button>
      <a href="https://github.com/CumulusNetworks/docs/edit/master/content/version/cumulus-rmp-31/Layer-1-and-Layer-2-Features/Ethernet-Bridging---VLANs/_index.md" target="_blank" rel="noopener"><img src="/docs.cumulusnetworks.com/svg/pencil-circle.svg" alt="Edit" /> Edit this page</a>
      </button>
    
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#span-configuration-files-span"><span>Configuration Files</span></a></li>
<li><a href="#span-commands-span"><span>Commands</span></a></li>
<li><a href="#span-creating-a-bridge-between-physical-interfaces-span"><span>Creating a Bridge between Physical Interfaces</span></a>
<ul>
<li><a href="#span-creating-the-bridge-and-adding-interfaces-span"><span>Creating the Bridge and Adding Interfaces</span></a></li>
<li><a href="#span-showing-and-verifying-the-bridge-configuration-span"><span>Showing and Verifying the Bridge Configuration</span></a>
<ul>
<li><a href="#span-bridge-interface-mac-address-and-mtu-span"><span>Bridge Interface MAC Address and MTU</span></a></li>
</ul></li>
</ul></li>
<li><a href="#span-examining-mac-addresses-span"><span>Examining MAC Addresses</span></a></li>
<li><a href="#span-multiple-bridges-span"><span>Multiple Bridges</span></a></li>
<li><a href="#span-configuring-an-svi-switch-vlan-interface-span"><span>Configuring an SVI (Switch VLAN Interface)</span></a>
<ul>
<li><a href="#span-showing-and-verifying-the-bridge-configuration-span-1"><span>Showing and Verifying the Bridge Configuration</span></a></li>
</ul></li>
<li><a href="#span-id-src-5122778-ethernetbridging-vlans-vlan-tagging-class-confluence-anchor-link-span-span-using-trunks-in-traditional-bridging-mode-span"><span id="src-5122778_EthernetBridging-VLANs-VLAN_tagging" class="confluence-anchor-link"></span><span>Using Trunks in Traditional Bridging Mode</span></a>
<ul>
<li><a href="#span-trunk-example-span"><span>Trunk Example</span></a></li>
<li><a href="#span-showing-and-verifying-the-trunk-span"><span>Showing and Verifying the Trunk</span></a></li>
<li><a href="#span-additional-examples-span"><span>Additional Examples</span></a></li>
</ul></li>
<li><a href="#span-configuration-files-span-1"><span>Configuration Files</span></a></li>
<li><a href="#span-useful-links-span"><span>Useful Links</span></a></li>
<li><a href="#span-caveats-and-errata-span"><span>Caveats and Errata</span></a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
  

</aside>






  </main>
  <footer class="footer-top">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="footer-content">
            <div class="mb-4">
                <img src="https://static.cumulusnetworks.com/static/images/shared/cumulus-networks-rt-white-trademarked.ff839f1b2570.svg">
                <p>© <script type="text/javascript">document.write(new Date().getFullYear());</script> Cumulus Networks.<br>
                Site by <a href="//unomena.com/" target="_blank">Unomena</a>.</p>
            </div>
            <ul class="mb-4">
              <li><h4>Products</h4></li>
              <li><a href="//cumulusnetworks.com/products/cumulus-linux/">Cumulus Linux</a></li>
              <li><a href="//cumulusnetworks.com/products/netq/">Cumulus NetQ</a></li>
              <li><a href="//cumulusnetworks.com/products/cumulus-express/">Cumulus Express</a></li>
            </ul>
            <ul class="mb-4">
              <li><h4>Learn</h4></li>
              <li><a href="//cumulusnetworks.com/learn/web-scale-networking-education/">Going web-scale</a></li>
              <li><a href="//cumulusnetworks.com/learn/events/">Events</a></li>
              <li><a href="//cumulusnetworks.com/blog/">Blog</a></li>
            </ul>
            <ul class="mb-4">
              <li><h4>About</h4></li>
              <li><a href="//cumulusnetworks.com/about/">Our story</a></li>
              <li><a href="//cumulusnetworks.com/about/careers/">Careers</a></li>
              <li><a href="//cumulusnetworks.com/about/media-coverage/">Media coverage</a></li>
              <li><a href="//docs.cumulusnetworks.com/" target="_blank">Tech docs</a></li>
              <li><a href="//cumulusnetworks.com/community/">Community</a></li>
            </ul>
            <ul>
              <li>
                <a href="//twitter.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M23 6.628l-2-.5 1-2-2.464.7A4.48 4.48 0 0 0 12 8.128v1c-3.539.73-6.634-1.2-9.5-4.5q-.75 4 1.5 6l-3-.5c.405 2.069 1.362 3.7 4 4l-2.5 1c1 2 2.566 2.31 5 2.5a10.748 10.748 0 0 1-6.5 2c12.755 5.669 20-2.664 20-10V8.3z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//www.facebook.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                      .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M17.768 7.5H13.5V5.6a.972.972 0 0 1 1.012-1.1c.418 0 2.988.01 2.988.01V.5h-4.329C9.244.5 8.5 3.474 8.5 5.355V7.5h-3v4h3v12h5v-12h3.851z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//linkedin.com/company/cumulus-networks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                      .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M6.5 22.5h-5v-13h5zm9-9a2 2 0 0 0-2 2v7h-5v-13h5v1.485a6.307 6.307 0 0 1 3.99-1.495c2.962 0 5.01 2.2 5.01 6.355V22.5h-5v-7a2 2 0 0 0-2-2zM6.5 5A2.5 2.5 0 1 1 4 2.5 2.5 2.5 0 0 1 6.5 5z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//vimeo.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M.5 7.393l.933 1.224S3.36 7.1 4 7.859s3.1 9.925 3.915 11.617c.714 1.483 2.684 3.444 4.845 2.042s9.34-7.529 10.626-14.769-8.642-5.723-9.693.583c2.627-1.577 4.03.642 2.686 3.154s-2.569 4.145-3.211 4.145-1.135-1.679-1.868-4.613c-.76-3.035-.755-8.5-3.911-7.882C4.412 2.721.5 7.393.5 7.393z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//www.github.com/cumulusnetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                        <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                        </style>
                    </defs>
                    <path class="a" d="M19.459 17c0-5.969-4.126-3.532-7.5-3.532s-7.5-2.375-7.5 3.532a3.5 3.5 0 0 0 3.5 3.5h8a3.5 3.5 0 0 0 3.5-3.5z"></path>
                    <path class="a" d="M21.489 10.214l.032.023s2.646-4.572-.6-7.237c-2 0-5.058 3.3-5.058 3.3l.022.016A14.152 14.152 0 0 0 8.1 6.3C8.083 6.285 5.037 3 3.042 3c-3.173 2.6-.729 7.012-.614 7.217a8.876 8.876 0 0 0-1.395 5.743c.241 3.126 2.847 6.54 5.982 6.54H16.9c3.135 0 5.742-3.414 5.982-6.54a8.857 8.857 0 0 0-1.393-5.746z"></path>
                    <ellipse class="a" cx="15.48" cy="17" rx="1" ry="1.5"></ellipse>
                    <ellipse class="a" cx="8.48" cy="17" rx="1" ry="1.5"></ellipse>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//slack.cumulusnetworks.com/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                        <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                        </style>
                    </defs>
                    <rect class="a" x=".5" y=".5" width="23" height="23" rx="6" ry="6"></rect>
                    <circle class="a" cx="12" cy="12" r="6"></circle>
                    <circle class="a" cx="19" cy="5" r="1.5"></circle>
                  </svg>
                </a>
              </li>
              <li>
                <p>Cumulus Networks<sup>®</sup> — Data center networking software for the open, modern data center.</p>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <div class="footer-bottom">
      <div class="container">
          <div class="row">
              <div class="col-12">
                  <ul>
                      <li><a href="//cumulusnetworks.com/legal/trademarks/">Trademarks</a></li>
                      <li><a href="//cumulusnetworks.com/legal/privacy/">Privacy</a></li>
                      <li><a href="//cumulusnetworks.com/legal/">Terms of service</a></li>
                  </ul>
              </div>
          </div>
      </div>
  </div>

  
  

</body>

</html>
