<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Using Cumulus VX with Vagrant | Cumulus Networks Documentation</title>

  
  <link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet">

  
  
  
  <link rel="stylesheet" href="/docs.cumulusnetworks.com/book.min.a378d8a2da6f5357a83a43dff33d6f77fb70401e0399d5ba78faf81d7a1ae1a8.css">

  
  <link rel="icon" href="/docs.cumulusnetworks.com/icons/favicon.png" type="image/x-icon">

  
  <!--
  Made with Book Theme
  https://github.com/alex-shpak/hugo-book
  -->

  
  
  <script src = "/docs.cumulusnetworks.com/js/codecopy.js"> </script>

</head>


<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  
  <header id="site-nav">
    <div class="header-wrapper flex">
      <a href="/">
        <img src="/header-logo.png" alt="Cumulus Networks">
        <img src="/cumulus-networks-rt-white.svg" alt="Cumulus Networks" class="header-mobile">
        <span>Docs</span>
      </a>
      <ul class="flex">
        <li><a href="//cumulusnetworks.com">HOME</a></li>
        <li><a href="//support.cumulusnetworks.com/">SUPPORT</a></li>
        <li><a href="//docs.cumulusnetworks.com/">DOCS</a></li>
        <li><a href="//education.cumulusnetworks.com">EDUCATION</a></li>
        <li><a href="//cumulusnetworks.com/blog/">BLOG</a></li>
        <li><a href="//forums.cumulusnetworks.com/">FORUMS</a></li>
      </ul>
      <div class="burger-menu">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </header>
  <div id="product-nav" class="flex">
      
    
    <ul>
    
      <li><a href = docs.cumulusnetworks.com/cumulus-linux/ >
        Cumulus Linux </a> </li>
    
      <li><a href = docs.cumulusnetworks.com/cumulus-netq/ >
        Cumulus NetQ </a> </li>
    
      <li class = "active" ><a href = docs.cumulusnetworks.com/cumulus-vx/ >
        Cumulus VX </a> </li>
    
      <li>
        <div id="products-dropdown" class="dropdown">
            <button class="btn" type="button" id="dropdownMenuButton">
              Products
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <a class="dropdown-item" href="">Cumulus RMP</a>
              <a class="dropdown-item" href="">Cumulus Chassis</a>
              <a class="dropdown-item" href="">Cumulus Host Pack</a>
            </div>
        </div>
      </li>
    </ul>
    <div class="search-container">
      <div id="doc-search-box">
        <input type="text" class="doc-search-input" placeholder="Search" value="">
        <span><button type="submit"><img src="/icons/search_20x20.svg" alt=""></button></span>
      </div>
      <div id="dropdown" class="dropdown">
          <button class="btn" type="button" id="dropdownMenuButton">
            v2.5
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/cumulus-vx/"> v3.4</a>
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-vx-25/"> v2.5</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-vx-30/"> v3.0</a>
            
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
          </div>
      </div>
    </div>
  </div>
  <main class="flex container">
    <aside class="book-menu fixed">

      <nav role="navigation">
        <h2 class="book-brand">
          <a href="docs.cumulusnetworks.com">Cumulus Networks Documentation</a>
        </h2>
        
        




  <ul class = "cn-book-section-container" id = "top">
    
        
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
            

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-25/" >
    Cumulus VX Getting Started Guide
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-25/Using-Cumulus-VX-with-VMware/" >
    Using Cumulus VX with VMware
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-25/Using-Cumulus-VX-with-VMware/Using-Cumulus-VX-with-VMware-vSphere-ESXi-5.5/" >
    Using Cumulus VX with VMware vSphere - ESXi 5.5
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-25/Using-Cumulus-VX-with-VMware/Using-Cumulus-VX-with-VMware-Fusion/" >
    Using Cumulus VX with VMware Fusion
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-25/Using-Cumulus-VX-with-VMware/Using-Cumulus-VX-with-VMware-Workstation/" >
    Using Cumulus VX with VMware Workstation
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-25/Using-Cumulus-VX-with-VirtualBox/" >
    Using Cumulus VX with VirtualBox
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-25/Using-Cumulus-VX-with-VirtualBox/Creating-a-Two-Spine-Two-Leaf-Topology/" >
    Creating a Two-Spine, Two-Leaf Topology
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-25/Using-Cumulus-VX-with-VirtualBox/An-Alternative-Method-for-Adding-More-Nodes-to-the-Network/" >
    An Alternative Method for Adding More Nodes to the Network
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-25/Using-Cumulus-VX-with-GNS3/" >
    Using Cumulus VX with GNS3
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-25/Using-Cumulus-VX-with-GNS3/Using-GNS3-with-QEMU-and-KVM-Virtual-Machines/" >
    Using GNS3 with QEMU and KVM Virtual Machines
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-25/Using-Cumulus-VX-with-GNS3/Using-GNS3-with-VirtualBox-VMs/" >
    Using GNS3 with VirtualBox VMs
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-25/Using-Cumulus-VX-with-KVM/" >
    Using Cumulus VX with KVM
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-25/Using-Cumulus-VX-with-Vagrant/"  class="active" >
    Using Cumulus VX with Vagrant
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-25/Comparing-Cumulus-VX-with-Other-Cumulus-Networks-Products/" >
    Comparing Cumulus VX with Other Cumulus Networks Products
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-25/Configuring-the-Network-Interfaces-and-Quagga/" >
    Configuring the Network Interfaces and Quagga
  </a>


    </li>
    
  </ul>


  </li>


          
      
          
      
    
  </ul>









      </nav>

      
      
      
      

      <script src = "/docs.cumulusnetworks.com/js/menuBundle.js"> </script>


    </aside>

    <div class="book-page">

      
      <header class="align-center justify-between book-header">
        <label for="menu-control">
          <img src="/docs.cumulusnetworks.com/svg/menu.svg" alt="Menu" />
        </label>
        <strong>Using Cumulus VX with Vagrant</strong>
      </header>

      
      
<div class= "notices info" id = "info" >
    This documentation is for an older version of the software. If you are using the current version of Cumulus Linux, this content may not be up to date. The current version of the documentation is available [here](https://docs.cumulusnetworks.com/).
  </div>
<article class="markdown">
<h1>Using Cumulus VX with Vagrant</h1>

<h2 id="span-requirements-span"><span>Requirements</span></h2>

<ul>
<li><p>Cumulus VX requires <a href="https://www.vagrantup.com/downloads.html" target="_blank">Vagrant 1.7 or
newer</a></p></li>

<li><p>Understand these <a href="Using-Cumulus-VX-with-VirtualBox.html#src-5115389_UsingCumulusVXwithVirtualBox-reqs" target="_blank">VirtualBox
considerations</a></p></li>
</ul>

<h2 id="span-setting-up-the-vagrant-environment-span"><span>Setting Up the Vagrant Environment</span></h2>

<p>You can use Cumulus VX within a Vagrant environment, running the VMs
with VirtualBox. To get started you need to download some software as
well as the Cumulus VX Vagrant box. You can download all of the source
code used to build Cumulus VX for Vagrant, the <code>vagrant-cumulus</code> plugin
and the pre-configured demos from <a href="https://github.com/CumulusNetworks/cumulus-vx-vagrant" target="_blank">the Cumulus Networks public Github
repository</a>.</p>

<ol>
<li><p>Download and install
<a href="https://www.virtualbox.org/wiki/Downloads" target="_blank">VirtualBox</a>.</p></li>

<li><p>Download and install
<a href="https://www.vagrantup.com/downloads.html" target="_blank">Vagrant</a>.</p></li>

<li><p>Download the <a href="https://cumulusnetworks.com/cumulus-vx/download/" target="_blank">Cumulus VX box file for
Vagrant</a>.</p></li>

<li><p>Install the Cumulus Linux plugin for Vagrant:</p>

<pre><code>$ vagrant plugin install vagrant-cumulus
Installing the 'vagrant-cumulus' plugin. This can take a few minutes...
Installed the plugin 'vagrant-cumulus (0.1)'!
</code></pre></li>

<li><p>Download and add the Cumulus VX Vagrant box file. Include the full
path to the Box file:</p>

<pre><code>$ vagrant box add cumulus-vx-2.5.3 /Users/cumulus/Desktop/vagrant/CumulusVX-2.5.3-4eb681f3df86c478.box      ✘
==&gt; box: Box file was not detected as metadata. Adding it directly...
==&gt; box: Adding box 'cumulus-vx-2.5.3' (v0) for provider:
    box: Unpacking necessary files from: file:///Users/cumulus/Desktop/vagrant/CumulusVX-2.5.3-4eb681f3df86c478.box
</code></pre></li>

<li><p>If you&rsquo;d like to try any of the preconfigured demos you should also
install <a href="https://pypi.python.org/pypi/ansible" target="_blank">Ansible 1.7 or
newer</a>, which Vagrant uses to
configure the virtual machines.</p></li>
</ol>

<h2 id="span-configuring-a-cumulus-vx-virtual-machine-with-vagrant-span"><span>Configuring a Cumulus VX Virtual Machine with Vagrant</span></h2>

<p>Vagrant uses a configuration file (<code>Vagrantfile</code>) to create and
configure one or more virtual machines. Create a <code>Vagrantfile</code> with the
following configuration:</p>

<pre><code>Vagrant.configure(2) do |config|
  config.vm.box = &quot;cumulus-vx-2.5.3&quot;
end
</code></pre>

<p>Save this file and run <code>vagrant up</code> to start a Cumulus VX virtual
machine:</p>

<pre><code>Bringing machine 'default' up with 'virtualbox' provider...
==&gt; default: Importing base box 'cumulus-vx-2.5.3'...
==&gt; default: Matching MAC address for NAT networking...
==&gt; default: Setting the name of the VM: temp_default_1437562573479_23184
==&gt; default: Clearing any previously set network interfaces...
==&gt; default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
==&gt; default: Forwarding ports...
    default: 22 =&gt; 2222 (adapter 1)
==&gt; default: Booting VM...
==&gt; default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: Warning: Connection timeout. Retrying...
    default:
    default: Vagrant insecure key detected. Vagrant will automatically replace
    default: this with a newly generated keypair for better security.
    default:
    default: Inserting generated public key within guest...
    default: Removing insecure key from the guest if it's present...
    default: Key inserted! Disconnecting and reconnecting using new SSH key...
==&gt; default: Machine booted and ready!
==&gt; default: Checking for guest additions in VM...
==&gt; default: Mounting shared folders...
    default: /vagrant =&gt; /Users/cumulus/vx-example
</code></pre>

<h3 id="span-logging-in-to-the-vm-span"><span>Logging in to the VM</span></h3>

<p>Once you create the virtual machine, log in to it using:</p>

<pre><code>vagrant ssh
</code></pre>

<p>This automatically logs you in as the pre-configured <code>vagrant</code> user. A
shared filesystem is automatically mounted inside the virtual machine
under the <code>/vagrant</code> mount point; you can transfer files between the
host and Cumulus VX from here.</p>

<p>When you are finished with the virtual machine, you can shut it down by
running:</p>

<pre><code>vagrant destroy
</code></pre>

<p>You can find all the documentation for configuring virtual machines with
Vagrant at <a href="https://docs.vagrantup.com/v2/" target="_blank">docs.vagrantup.com/v2/</a>.</p>

<h3 id="span-adding-switch-port-interfaces-to-a-cumulus-vx-virtual-machine-span"><span>Adding Switch Port Interfaces to a Cumulus VX Virtual Machine</span></h3>

<p>By default Vagrant only configures the first network interface (eth0)
for its own use. Additional network interfaces, such as the Cumulus
Linux switch port interfaces, must be configured in the Vagrantfile.
Normally you should configure these interfaces to use a private network.
By default Vagrant provides one pre-configured private network, although
you can choose to create additional private networks if you wish. You
can connect one or more network interfaces to a private network.</p>

<p>The following example creates a Cumulus VX virtual machine where the
interfaces swp1 through swp4 are created and connected to the
pre-configured private network:</p>

<pre><code>Vagrant.configure(2) do |config|
  config.vm.box = &quot;cumulus-vx-2.5.3&quot;
 
  config.vm.network &quot;private_network&quot;, virtualbox__intnet: true # swp1
  config.vm.network &quot;private_network&quot;, virtualbox__intnet: true # swp2
  config.vm.network &quot;private_network&quot;, virtualbox__intnet: true # swp3
  config.vm.network &quot;private_network&quot;, virtualbox__intnet: true # swp4
end
</code></pre>

<p>You can find more information on creating and using private networks at
<a href="https://docs.vagrantup.com/v2/networking/private_network.html" target="_blank">docs.vagrantup.com/v2/networking/private_network.html</a>
and
<a href="https://docs.vagrantup.com/v2/virtualbox/networking.html" target="_blank">docs.vagrantup.com/v2/virtualbox/networking.html</a>.</p>

<h3 id="span-creating-multiple-cumulus-vx-virtual-machines-span"><span>Creating Multiple Cumulus VX Virtual Machines</span></h3>

<p>Vagrant can create and configure multiple virtual machines with a single
command. For example, you can use Vagrant to create multiple Cumulus VX
virtual machines and then connect the network interfaces of those
virtual machines together.</p>

<p>The following example creates two Cumulus VX virtual machines, leaf1 and
leaf2, where the interfaces swp1 through swp4 are connected together via
separate private networks:</p>

<pre><code>Vagrant.configure(2) do |config|
 
  config.vm.define &quot;leaf1&quot; do |leaf1|
    leaf1.vm.box = &quot;cumulus-vx-2.5.3&quot;
 
 
    # Internal network for swp* interfaces.
    leaf1.vm.network &quot;private_network&quot;, virtualbox__intnet: &quot;swp1&quot;
    leaf1.vm.network &quot;private_network&quot;, virtualbox__intnet: &quot;swp2&quot;
    leaf1.vm.network &quot;private_network&quot;, virtualbox__intnet: &quot;swp3&quot;
    leaf1.vm.network &quot;private_network&quot;, virtualbox__intnet: &quot;swp4&quot;
  end
 
  config.vm.define &quot;leaf2&quot; do |leaf2|
    leaf2.vm.box = &quot;cumulus-vx-2.5.3&quot;
 
    # Internal network for swp* interfaces.
    leaf2.vm.network &quot;private_network&quot;, virtualbox__intnet: &quot;swp1&quot;
    leaf2.vm.network &quot;private_network&quot;, virtualbox__intnet: &quot;swp2&quot;
    leaf2.vm.network &quot;private_network&quot;, virtualbox__intnet: &quot;swp3&quot;
    leaf2.vm.network &quot;private_network&quot;, virtualbox__intnet: &quot;swp4&quot;
  end
 
end
</code></pre>

<p>When you run <code>vagrant up</code>, both virtual machines are created. You can
log in to each virtual machine and configure the interfaces as you wish,
and the interfaces will pass traffic between themselves as though they
were two physical switches connected together by four cables.</p>

<h2 id="span-limitations-span"><span>Limitations</span></h2>

<p>At this time, there are some limitations to using Vagrant with Cumulus
VX:</p>

<ul>
<li><p>You cannot run KVM virtual machines under Vagrant.</p></li>

<li><p>VirtualBox can only support a maximum of 36 network interfaces.</p></li>

<li><p>The first network interface (eth0) is always managed by Vagrant and
must be connected to a NAT network.</p></li>
</ul>

<h2 id="span-test-configuration-span"><span>Test Configuration</span></h2>

<p>Cumulus VX for Vagrant has been tested in the following environments:</p>

<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Host OS</p></th>
<th><p>Vagrant Version(s)</p></th>
<th><p>VirtualBox Version(s)</p></th>
<th><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>OS X 10.10</p></td>
<td><p>1.7.3<br />
1.7.4</p></td>
<td><p>4.3<br />
5.0</p></td>
<td><p> </p></td>
</tr>
<tr class="even">
<td><p>Ubuntu 14.04</p></td>
<td><p>1.7.4</p></td>
<td><p>4.3</p></td>
<td><p> </p></td>
</tr>
<tr class="odd">
<td><p>Windows 7</p></td>
<td><p>1.7.3</p></td>
<td><p>5.0</p></td>
<td><p>While both VirtualBox and Vagrant are fully supported on Windows hosts, Vagrant provisioning with Ansible is not.<br />
Cumulus VX demos that use Ansible will not work on Windows.</p></td>
</tr>
</tbody>
</table>

<h2 id="span-preconfigured-cumulus-vx-examples-span"><span>Preconfigured Cumulus VX Examples</span></h2>

<p>Cumulus Networks makes it easy to build a two-leaf/two-spine topology
within a Vagrant environment, requiring very little programming
knowledge. You can get started with these sample configurations:</p>

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Name</p></th>
<th><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><a href="https://github.com/CumulusNetworks/cumulus-vx-vagrant/tree/master/vagrant/demos/ccw-2s" class="external-link">2-Switch</a></p></td>
<td><p>Creates a simple two switch topology with four shared links. Ideal for initial testing and experimentation.</p></td>
</tr>
<tr class="even">
<td><p><a href="https://github.com/CumulusNetworks/cumulus-vx-vagrant/tree/master/vagrant/demos/clos-bgp" class="external-link">clos-bgp</a></p></td>
<td><p>Creates a two-leaf/two-spine network with BGP unnumbered interfaces.</p></td>
</tr>
<tr class="odd">
<td><p><a href="https://github.com/CumulusNetworks/cumulus-vx-vagrant/tree/master/vagrant/demos/clos-ospf" class="external-link">clos-ospf</a></p></td>
<td><p>Creates a two-leaf/two-spine network with OSPF unnumbered interfaces.</p></td>
</tr>
<tr class="even">
<td><p><a href="https://github.com/CumulusNetworks/cumulus-vx-vagrant/tree/master/vagrant/demos/mlag" class="external-link">MLAG</a></p></td>
<td><p>Creates 2 "racks" of 5 hosts, connected to a large layer 2 network configured with MLAG.</p>

<div class="notices note" > <p></p>
<p>If you are configuring MLAG, in order to start the <code>clagd</code> service, you must specify the <code>clagd-args &ndash;vm</code> option in <code>/etc/network/interfaces</code>:</p>
<pre><code>auto peer16.4000
iface peer16.4000 inet static
    address 11.0.5.2
    netmask 255.255.255.0
    clagd-enable yes
    clagd-peer-ip 11.0.5.1
    clagd-sys-mac 44:38:39:ff:ff:ff
    clagd-args &ndash;vm</code></pre>
<p></p>
 </div>
</td>
</tr>
</tbody>
</table>

<h3 id="span-getting-the-demos-from-github-span"><span>Getting the Demos from GitHub</span></h3>

<p>The demos are stored on GitHub, so you can just run <code>git clone</code> to get
them all:</p>

<pre><code>$ git clone https://github.com/CumulusNetworks/cumulus-vx-vagrant
Cloning into 'cumulus-vx-vagrant'...
remote: Counting objects: 584, done.
remote: Total 584 (delta 0), reused 0 (delta 0), pack-reused 584
Receiving objects: 100% (584/584), 97.42 KiB | 0 bytes/s, done.
Resolving deltas: 100% (229/229), done.
Checking connectivity... done.
$ ls
CumulusVX-2.5.3-4eb681f3df86c478.box cumulus-vx-vagrant
</code></pre>

<h3 id="span-modifying-the-demos-span"><span>Modifying the Demos</span></h3>

<p>You can modify the two leaf/two spine topology by changing the
<code>numSpines</code> and <code>numLeaves</code> variables in <code>properties.yml</code>:</p>

<pre><code>:numLeaves: 2
:numSpines: 2
 
# IP Address Base for loopback
:ipAddrPrefix: &quot;10.0.1.&quot;
</code></pre>

<p>You can modify the MLAG demo by changing the variables in the
<code>properties.yml</code> file:</p>

<pre><code># Number of nodes to provision. Change these values to modify the size of the
# network configuration. Be careful, changing these values can dramatically
# affect the number of VMs created.
:hostsPerRack: 5
:racksPerPod:  2
:podsPerDC:    1
</code></pre>

<h3 id="span-about-the-ospf-unnumbered-interfaces-configuration-span"><span>About the OSPF Unnumbered Interfaces Configuration</span></h3>

<p>For the OSPF unnumbered configuration, the basic idea is to assign <em>the
same</em> IP address for each network node. Assign the IP address first to
the loopback interface, then assign that same IP address to every other
network interface except the management interface, eth0, as it is on a
separate network and requires its own IP address.</p>

<h3 id="span-about-the-bgp-unnumbered-interfaces-configuration-span"><span>About the BGP Unnumbered Interfaces Configuration</span></h3>

<p>Cumulus Networks introduced the ability to configure BGP using interface
names instead of the IP address of the remote peer. The remote peer&rsquo;s
IPv6 link-local address is then determined using IPv6 router
advertisement, which is then used to set up a BGP session based on this
address. Finally, IPv4 and IPv6 addresses are exchanged over this
session.</p>

<p>To advertise IPv4 prefixes over an IPv6 session, Cumulus VX uses
Extended Next-Hop Encoding (RFC-5549). Cumulus VX also enables the
ability to specify whether the session is an iBGP or eBGP session,
without specifying the remote node&rsquo;s ASN. Both of these simplifications
lead to a phenomenal simplification in configuring BGP.</p>

<article id="html-search-results" class="ht-content" style="display: none;">

</article>

<footer id="ht-footer">

</footer>
</article>

      <script src="https://utteranc.es/client.js"
        repo="CumulusNetworks/docs-internal"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
      </script>

    </div>
    

      


  

    <aside class="book-toc fixed">

  
    <div class="toc">
    
      <button>
      <a href="https://github.com/CumulusNetworks/docs/edit/master/content/version/cumulus-vx-25/Using-Cumulus-VX-with-Vagrant.md" target="_blank" rel="noopener"><img src="/docs.cumulusnetworks.com/svg/pencil-circle.svg" alt="Edit" /> Edit this page</a>
      </button>
    
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#span-requirements-span"><span>Requirements</span></a></li>
<li><a href="#span-setting-up-the-vagrant-environment-span"><span>Setting Up the Vagrant Environment</span></a></li>
<li><a href="#span-configuring-a-cumulus-vx-virtual-machine-with-vagrant-span"><span>Configuring a Cumulus VX Virtual Machine with Vagrant</span></a>
<ul>
<li><a href="#span-logging-in-to-the-vm-span"><span>Logging in to the VM</span></a></li>
<li><a href="#span-adding-switch-port-interfaces-to-a-cumulus-vx-virtual-machine-span"><span>Adding Switch Port Interfaces to a Cumulus VX Virtual Machine</span></a></li>
<li><a href="#span-creating-multiple-cumulus-vx-virtual-machines-span"><span>Creating Multiple Cumulus VX Virtual Machines</span></a></li>
</ul></li>
<li><a href="#span-limitations-span"><span>Limitations</span></a></li>
<li><a href="#span-test-configuration-span"><span>Test Configuration</span></a></li>
<li><a href="#span-preconfigured-cumulus-vx-examples-span"><span>Preconfigured Cumulus VX Examples</span></a>
<ul>
<li><a href="#span-getting-the-demos-from-github-span"><span>Getting the Demos from GitHub</span></a></li>
<li><a href="#span-modifying-the-demos-span"><span>Modifying the Demos</span></a></li>
<li><a href="#span-about-the-ospf-unnumbered-interfaces-configuration-span"><span>About the OSPF Unnumbered Interfaces Configuration</span></a></li>
<li><a href="#span-about-the-bgp-unnumbered-interfaces-configuration-span"><span>About the BGP Unnumbered Interfaces Configuration</span></a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
  

</aside>






  </main>
  <footer class="footer-top">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="footer-content">
            <div class="mb-4">
                <img src="https://static.cumulusnetworks.com/static/images/shared/cumulus-networks-rt-white-trademarked.ff839f1b2570.svg">
                <p>© <script type="text/javascript">document.write(new Date().getFullYear());</script> Cumulus Networks.<br>
                Site by <a href="//unomena.com/" target="_blank">Unomena</a>.</p>
            </div>
            <ul class="mb-4">
              <li><h4>Products</h4></li>
              <li><a href="//cumulusnetworks.com/products/cumulus-linux/">Cumulus Linux</a></li>
              <li><a href="//cumulusnetworks.com/products/netq/">Cumulus NetQ</a></li>
              <li><a href="//cumulusnetworks.com/products/cumulus-express/">Cumulus Express</a></li>
            </ul>
            <ul class="mb-4">
              <li><h4>Learn</h4></li>
              <li><a href="//cumulusnetworks.com/learn/web-scale-networking-education/">Going web-scale</a></li>
              <li><a href="//cumulusnetworks.com/learn/events/">Events</a></li>
              <li><a href="//cumulusnetworks.com/blog/">Blog</a></li>
            </ul>
            <ul class="mb-4">
              <li><h4>About</h4></li>
              <li><a href="//cumulusnetworks.com/about/">Our story</a></li>
              <li><a href="//cumulusnetworks.com/about/careers/">Careers</a></li>
              <li><a href="//cumulusnetworks.com/about/media-coverage/">Media coverage</a></li>
              <li><a href="//docs.cumulusnetworks.com/" target="_blank">Tech docs</a></li>
              <li><a href="//cumulusnetworks.com/community/">Community</a></li>
            </ul>
            <ul>
              <li>
                <a href="//twitter.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M23 6.628l-2-.5 1-2-2.464.7A4.48 4.48 0 0 0 12 8.128v1c-3.539.73-6.634-1.2-9.5-4.5q-.75 4 1.5 6l-3-.5c.405 2.069 1.362 3.7 4 4l-2.5 1c1 2 2.566 2.31 5 2.5a10.748 10.748 0 0 1-6.5 2c12.755 5.669 20-2.664 20-10V8.3z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//www.facebook.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                      .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M17.768 7.5H13.5V5.6a.972.972 0 0 1 1.012-1.1c.418 0 2.988.01 2.988.01V.5h-4.329C9.244.5 8.5 3.474 8.5 5.355V7.5h-3v4h3v12h5v-12h3.851z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//linkedin.com/company/cumulus-networks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                      .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M6.5 22.5h-5v-13h5zm9-9a2 2 0 0 0-2 2v7h-5v-13h5v1.485a6.307 6.307 0 0 1 3.99-1.495c2.962 0 5.01 2.2 5.01 6.355V22.5h-5v-7a2 2 0 0 0-2-2zM6.5 5A2.5 2.5 0 1 1 4 2.5 2.5 2.5 0 0 1 6.5 5z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//vimeo.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M.5 7.393l.933 1.224S3.36 7.1 4 7.859s3.1 9.925 3.915 11.617c.714 1.483 2.684 3.444 4.845 2.042s9.34-7.529 10.626-14.769-8.642-5.723-9.693.583c2.627-1.577 4.03.642 2.686 3.154s-2.569 4.145-3.211 4.145-1.135-1.679-1.868-4.613c-.76-3.035-.755-8.5-3.911-7.882C4.412 2.721.5 7.393.5 7.393z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//www.github.com/cumulusnetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                        <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                        </style>
                    </defs>
                    <path class="a" d="M19.459 17c0-5.969-4.126-3.532-7.5-3.532s-7.5-2.375-7.5 3.532a3.5 3.5 0 0 0 3.5 3.5h8a3.5 3.5 0 0 0 3.5-3.5z"></path>
                    <path class="a" d="M21.489 10.214l.032.023s2.646-4.572-.6-7.237c-2 0-5.058 3.3-5.058 3.3l.022.016A14.152 14.152 0 0 0 8.1 6.3C8.083 6.285 5.037 3 3.042 3c-3.173 2.6-.729 7.012-.614 7.217a8.876 8.876 0 0 0-1.395 5.743c.241 3.126 2.847 6.54 5.982 6.54H16.9c3.135 0 5.742-3.414 5.982-6.54a8.857 8.857 0 0 0-1.393-5.746z"></path>
                    <ellipse class="a" cx="15.48" cy="17" rx="1" ry="1.5"></ellipse>
                    <ellipse class="a" cx="8.48" cy="17" rx="1" ry="1.5"></ellipse>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//slack.cumulusnetworks.com/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                        <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                        </style>
                    </defs>
                    <rect class="a" x=".5" y=".5" width="23" height="23" rx="6" ry="6"></rect>
                    <circle class="a" cx="12" cy="12" r="6"></circle>
                    <circle class="a" cx="19" cy="5" r="1.5"></circle>
                  </svg>
                </a>
              </li>
              <li>
                <p>Cumulus Networks<sup>®</sup> — Data center networking software for the open, modern data center.</p>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <div class="footer-bottom">
      <div class="container">
          <div class="row">
              <div class="col-12">
                  <ul>
                      <li><a href="//cumulusnetworks.com/legal/trademarks/">Trademarks</a></li>
                      <li><a href="//cumulusnetworks.com/legal/privacy/">Privacy</a></li>
                      <li><a href="//cumulusnetworks.com/legal/">Terms of service</a></li>
                  </ul>
              </div>
          </div>
      </div>
  </div>

  
  

</body>

</html>
