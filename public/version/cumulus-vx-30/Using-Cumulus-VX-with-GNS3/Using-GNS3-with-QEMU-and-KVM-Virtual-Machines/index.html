<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Using GNS3 with QEMU and KVM Virtual Machines | Cumulus Networks Documentation</title>

  
  <link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet">

  
  
  
  <link rel="stylesheet" href="/docs.cumulusnetworks.com/book.min.a378d8a2da6f5357a83a43dff33d6f77fb70401e0399d5ba78faf81d7a1ae1a8.css">

  
  <link rel="icon" href="/docs.cumulusnetworks.com/icons/favicon.png" type="image/x-icon">

  
  <!--
  Made with Book Theme
  https://github.com/alex-shpak/hugo-book
  -->

  
  
  <script src = "/docs.cumulusnetworks.com/js/codecopy.js"> </script>

</head>


<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  
  <header id="site-nav">
    <div class="header-wrapper flex">
      <a href="/">
        <img src="/header-logo.png" alt="Cumulus Networks">
        <img src="/cumulus-networks-rt-white.svg" alt="Cumulus Networks" class="header-mobile">
        <span>Docs</span>
      </a>
      <ul class="flex">
        <li><a href="//cumulusnetworks.com">HOME</a></li>
        <li><a href="//support.cumulusnetworks.com/">SUPPORT</a></li>
        <li><a href="//docs.cumulusnetworks.com/">DOCS</a></li>
        <li><a href="//education.cumulusnetworks.com">EDUCATION</a></li>
        <li><a href="//cumulusnetworks.com/blog/">BLOG</a></li>
        <li><a href="//forums.cumulusnetworks.com/">FORUMS</a></li>
      </ul>
      <div class="burger-menu">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </header>
  <div id="product-nav" class="flex">
      
    
    <ul>
    
      <li><a href = docs.cumulusnetworks.com/cumulus-linux/ >
        Cumulus Linux </a> </li>
    
      <li><a href = docs.cumulusnetworks.com/cumulus-netq/ >
        Cumulus NetQ </a> </li>
    
      <li class = "active" ><a href = docs.cumulusnetworks.com/cumulus-vx/ >
        Cumulus VX </a> </li>
    
      <li>
        <div id="products-dropdown" class="dropdown">
            <button class="btn" type="button" id="dropdownMenuButton">
              Products
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <a class="dropdown-item" href="">Cumulus RMP</a>
              <a class="dropdown-item" href="">Cumulus Chassis</a>
              <a class="dropdown-item" href="">Cumulus Host Pack</a>
            </div>
        </div>
      </li>
    </ul>
    <div class="search-container">
      <div id="doc-search-box">
        <input type="text" class="doc-search-input" placeholder="Search" value="">
        <span><button type="submit"><img src="/icons/search_20x20.svg" alt=""></button></span>
      </div>
      <div id="dropdown" class="dropdown">
          <button class="btn" type="button" id="dropdownMenuButton">
            v3.0
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/cumulus-vx/"> v3.4</a>
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-vx-25/"> v2.5</a>
            
            
            
             
             
            <a class = "dropdown-item" href = "docs.cumulusnetworks.com/version/cumulus-vx-30/"> v3.0</a>
            
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
             
            
            
             
             
            
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
             
            
          </div>
      </div>
    </div>
  </div>
  <main class="flex container">
    <aside class="book-menu fixed">

      <nav role="navigation">
        <h2 class="book-brand">
          <a href="docs.cumulusnetworks.com">Cumulus Networks Documentation</a>
        </h2>
        
        




  <ul class = "cn-book-section-container" id = "top">
    
        
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
      
          
            

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-30/" >
    Cumulus VX Getting Started Guide
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-30/Using-Cumulus-VX-with-VMware/" >
    Using Cumulus VX with VMware
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-30/Using-Cumulus-VX-with-VMware/Using-Cumulus-VX-with-VMware-vSphere-ESXi-5.5/" >
    Using Cumulus VX with VMware vSphere - ESXi 5.5
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-30/Using-Cumulus-VX-with-VMware/Using-Cumulus-VX-with-VMware-Fusion/" >
    Using Cumulus VX with VMware Fusion
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-30/Using-Cumulus-VX-with-VMware/Using-Cumulus-VX-with-VMware-Workstation/" >
    Using Cumulus VX with VMware Workstation
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-30/Using-Cumulus-VX-with-VirtualBox/" >
    Using Cumulus VX with VirtualBox
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-30/Using-Cumulus-VX-with-VirtualBox/Creating-a-Two-Spine-Two-Leaf-Topology/" >
    Creating a Two-Spine, Two-Leaf Topology
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-30/Using-Cumulus-VX-with-VirtualBox/An-Alternative-Method-for-Adding-More-Nodes-to-the-Network/" >
    An Alternative Method for Adding More Nodes to the Network
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-30/Using-Cumulus-VX-with-GNS3/" >
    Using Cumulus VX with GNS3
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-30/Using-Cumulus-VX-with-GNS3/Using-GNS3-with-QEMU-and-KVM-Virtual-Machines/"  class="active" >
    Using GNS3 with QEMU and KVM Virtual Machines
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-30/Using-Cumulus-VX-with-GNS3/Using-GNS3-with-VirtualBox-VMs/" >
    Using GNS3 with VirtualBox VMs
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-30/Using-Cumulus-VX-with-KVM/" >
    Using Cumulus VX with KVM
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-30/Using-Cumulus-VX-with-Vagrant/" >
    Using Cumulus VX with Vagrant
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-30/Comparing-Cumulus-VX-with-Other-Cumulus-Networks-Products/" >
    Comparing Cumulus VX with Other Cumulus Networks Products
  </a>


    </li>
    
    <li >
      

  <a href="docs.cumulusnetworks.com/version/cumulus-vx-30/Configuring-the-Network-Interfaces-and-Quagga/" >
    Configuring the Network Interfaces and Quagga
  </a>


    </li>
    
  </ul>


  </li>


          
      
    
  </ul>









      </nav>

      
      
      
      

      <script src = "/docs.cumulusnetworks.com/js/menuBundle.js"> </script>


    </aside>

    <div class="book-page">

      
      <header class="align-center justify-between book-header">
        <label for="menu-control">
          <img src="/docs.cumulusnetworks.com/svg/menu.svg" alt="Menu" />
        </label>
        <strong>Using GNS3 with QEMU and KVM Virtual Machines</strong>
      </header>

      
      
<div class= "notices info" id = "info" >
    This documentation is for an older version of the software. If you are using the current version of Cumulus Linux, this content may not be up to date. The current version of the documentation is available [here](https://docs.cumulusnetworks.com/).
  </div>
<article class="markdown">
<h1>Using GNS3 with QEMU and KVM Virtual Machines</h1>

<p>Before you run your virtual network under GNS3, make sure you have done
the following:</p>

<ul>
<li><p>Download and install <a href="http://www.linux-kvm.org/page/Downloads" target="_blank">KVM</a>.</p></li>

<li><p>Download the the <a href="https://cumulusnetworks.com/cumulus-vx/download/" target="_blank">Cumulus VX QCOW2
image</a>.</p></li>

<li><p>Download and install
<a href="https://community.gns3.com/login.jspa?referer=/community/software/download" target="_blank">GNS3</a>.</p></li>
</ul>

<!-- end list -->

<ol>
<li><p>Start GNS3.</p></li>

<li><p>In GNS3, select <strong>GNS3</strong> &gt; <strong>Preferences</strong>. The Preferences dialog
pops up. From the left pane, select <strong>QEMU VMs</strong>, then click
<strong>New</strong>. In <strong>VM list</strong>, a list of KVM VMs that you already set up
earlier appears.</p>

<ul>
<li><p>In the <strong>Type</strong> list, keep <em>Default</em>, then click <strong>Next</strong>.</p></li>

<li><p>In the <strong>Name</strong> box, enter the name, then click <strong>Next</strong>.</p></li>

<li><p>Select the path to the <strong>Qemu binary</strong> and <strong>RAM</strong> size, then
click <strong>Next</strong>.</p></li>

<li><p>Browse to select the <strong>Disk image</strong>, selecting the <a href="https://cumulusnetworks.com/cumulus-vx/download/" target="_blank">qcow2
image</a> you
downloaded earlier.</p></li>

<li><p>Click <strong>Finish</strong> to save the configuration and close the New
QEMU VM template dialog.</p></li>
</ul></li>

<li><p>Repeat the previous step for every VM you want to include, or re-use
the single VM imported. For the example topology above, they are:
Cumulus VX-spine1, Cumulus VX-spine2, Cumulus VX-leaf1, Cumulus
VX-leaf2.</p></li>

<li><p>Enable GNS3 to work with the QEMU VMs&rsquo; network interfaces. Configure
each VM&rsquo;s network settings, using the GNS3 interface:</p>

<ul>
<li><p>Select a VM in the center pane, then click <strong>Edit</strong>.</p></li>

<li><p>In the QEMU VM configuration dialog, click the <strong>Network</strong> tab.</p></li>

<li><p>Increase the number of <strong>Adapters</strong> to <em>4</em>.</p></li>

<li><p>Select the <strong>Type</strong> to be <em>Legacy paravirtualized</em>.</p></li>

<li><p><span style="color: #222222;"> Check the <strong>Use the legacy
networking mode</strong> <span style="color: #222222;"> check box
</span> . </span></p></li>

<li><p>Click <strong>Advanced Settings</strong>. In the options field, enter:<br />
<code>-net user,vlan=0,net=192.168.0.0/24,hostfwd=tcp::1401-:22</code></p>


<div class="notices note" > <pre><code>    Each node needs a different port. You can do this by
    incrementing 1401 to 1402 for the second CL node.
</code></pre>
 </div>
</li>

<li><p>Click <strong>OK</strong> to save your settings and close the dialog.</p>


<div class="notices note" > <pre><code>    This enables SSH to port 1401 (ssh -p 1401 cumulus@127.0.0.1).
</code></pre>
 </div>
</li>

<li><p>Click <strong>OK</strong> to save your settings and close the dialog.</p></li>
</ul></li>

<li><p>Start each VM, then SSH into it and configure the <a href="http://docs.cumulusnetworks.com/display/VX/Configuring+the+Network+Interfaces+and+Quagga" target="_blank">network
interfaces and
Quagga</a>.</p></li>

<li><p>To interconnect the VMs, select the cable icon from the left pane,
then select the VMs to connect directly. To do this, select which
network interface you want connected for each VM.</p>

<ul>
<li><p>Cumulus VX-spine1:<br />
e1&lt;-&gt; e1 Cumulus VX-leaf1<br />
e2&lt;-&gt;e1 Cumulus VX-leaf2</p></li>

<li><p>Cumulus VX-spine2:<br />
e1&lt;-&gt;e2 Cumulus VX-leaf1<br />
e2&lt;-&gt;e2 Cumulus VX-leaf2</p></li>

<li><p>Cumulus VX-leaf1:<br />
e1&lt;-&gt;e1 Cumulus VX-spine1<br />
e2&lt;-&gt;e1 Cumulus VX-spine2<br />
e3&lt;-&gt;e0 PC1 (VPCS)</p></li>

<li><p>Cumulus VX-leaf2:<br />
e1&lt;-&gt;e2 Cumulus VX-spine1<br />
e2&lt;-&gt;e2 Cumulus VX-spine2<br />
e3&lt;-&gt;e0 PC2 (VPCS)</p></li>
</ul></li>
</ol>


<div class="notices note" > <p>e1 in GNS3 corresponds to swp1 in Cumulus VX, e2 to swp2, and so forth.</p>
 </div>


<p>You can also drag and drop virtual PCs (VPCS) and connect them to the
Cumulus VX switch.</p>

<p>To open a console to a VPC, right click on the VPCS icon and select
<strong>Console</strong>.</p>

<p>In the console, you can configure the IP address and default gateway for
the VPCS. For example:</p>

<pre><code>ip 10.4.1.101/25 10.4.1.1
</code></pre>

<p>Start all the VMs.</p>

<p>You should be able to ping between the VMs, and between the virtual PCs
as well.</p>

<h2 id="span-caveats-span"><span>Caveats</span></h2>

<ul>
<li><p>Once you start the VMs, they run headless. You can SSH into a VM
as:<br />
<code>ssh -p port-nr root@127.0.0.1</code></p></li>

<li><p><code>port-nr</code> is the one specified for this node in step 4 above.</p></li>

<li><p>It takes a couple of minutes for the VMs to spin up and be ready for
SSH connections.</p></li>

<li><p>Console access does not work with GNS3 in this configuration. For a
workaround, run QEMU/KVM from the command line; see below for
details.</p></li>
</ul>

<h2 id="span-kvm-qemu-from-the-command-line-span"><span>KVM/QEMU from the Command Line</span></h2>

<p>In order to use console access with GNS3 and QEMU/KVM VMs, you use the
qemu binary that is bundled with GNS3. On OSX, this binary is located
at:
/Applications/GNS3.app/Contents/Resources/qemu/bin/qemu-system-x86_64.</p>

<p>When using the command line to access QEMU, start the two-leaf/two-spine
topology by starting each VM manually.</p>

<p>One each node is up, configure the <a href="#src-5126603">network interfaces</a>
and <a href="#src-5126603">routing</a>, then restart the VMs or their services, as
described earlier. Once this is done, every node should be able to
communicate with each other.</p>

<p>To start Cumulus VX-spine1:</p>

<pre><code>/Applications/GNS3.app/Contents/Resources/qemu/bin/qemu-system-x86_64 -name 
  &quot;Cumulus VX-spine1&quot; -m 256 -hda 
  /Users/cumulus/GNS3/projects/gns_vm_release_test/project-files/qemu/4e87d26e-c5a2-43a0-b659-c34f62ebc9df/hda_disk.qcow2 
  -serial telnet:127.0.0.1:2003,server,nowait -monitor 
  tcp:127.0.0.1:55603,server,nowait -net 
  user,vlan=0,net=192.168.0.0/24,hostfwd=tcp::1403-:22 -net none -net nic,vlan=0,macaddr=00:00:ab:c9:df:00,model=virtio -net
  nic,vlan=1,macaddr=00:00:ab:c9:df:01,model=virtio -net udp,vlan=1,name=gns3-1,sport=10001,dport=10000,daddr=127.0.0.1 -net
  nic,vlan=2,macaddr=00:00:ab:c9:df:02,model=virtio -net udp,vlan=2,name=gns3-2,sport=10002,dport=10003,daddr=127.0.0.1 -net
  nic,vlan=3,macaddr=00:00:ab:c9:df:03,model=virtio &amp;
</code></pre>

<p>To start Cumulus VX-spine2:</p>

<pre><code>/Applications/GNS3.app/Contents/Resources/qemu/bin/qemu-system-x86_64 -name 
  &quot;Cumulus VX-spine2&quot; -m 256 -hda 
  /Users/cumulus/GNS3/projects/gns_vm_release_test/project-files/qemu/8e83fef2-cb87-4df5-aa66-5511c0330919/hda_disk.qcow2 
  -serial telnet:127.0.0.1:2004,server,nowait -monitor 
  tcp:127.0.0.1:55604,server,nowait -net 
  user,vlan=0,net=192.168.0.0/24,hostfwd=tcp::1404-:22 -net none -net nic,vlan=0,macaddr=00:00:ab:09:19:00,model=virtio -net
  nic,vlan=1,macaddr=00:00:ab:09:19:01,model=virtio -net udp,vlan=1,name=gns3-1,sport=10005,dport=10004,daddr=127.0.0.1 -net
  nic,vlan=2,macaddr=00:00:ab:09:19:02,model=virtio -net udp,vlan=2,name=gns3-2,sport=10006,dport=10007,daddr=127.0.0.1 -net
  nic,vlan=3,macaddr=00:00:ab:09:19:03,model=virtio &amp;
</code></pre>

<p>To start Cumulus VX-leaf1:</p>

<pre><code>/Applications/GNS3.app/Contents/Resources/qemu/bin/qemu-system-x86_64 -name 
  &quot;Cumulus VX-leaf1&quot; -m 256 -hda 
  /Users/cumulus/GNS3/projects/gns_vm_release_test/project-files/qemu/d5399bd9-af1d-4baa-9821-6e18b795f16b/hda_disk.qcow2 
  -serial telnet:127.0.0.1:2001,server,nowait -monitor 
  tcp:127.0.0.1:55605,server,nowait -net 
  user,vlan=0,net=192.168.0.0/24,hostfwd=tcp::1401-:22 -net none -net nic,vlan=0,macaddr=00:00:ab:f1:6b:00,model=virtio -net
  nic,vlan=1,macaddr=00:00:ab:f1:6b:01,model=virtio -net udp,vlan=1,name=gns3-1,sport=10000,dport=10001,daddr=127.0.0.1 -net
  nic,vlan=2,macaddr=00:00:ab:f1:6b:02,model=virtio -net udp,vlan=2,name=gns3-2,sport=10004,dport=10005,daddr=127.0.0.1 -net
  nic,vlan=3,macaddr=00:00:ab:f1:6b:03,model=virtio &amp;
</code></pre>

<p>To start Cumulus VX-leaf2:</p>

<pre><code>/Applications/GNS3.app/Contents/Resources/qemu/bin/qemu-system-x86_64 -name 
  &quot;Cumulus VX-leaf2&quot; -m 256 -hda 
  /Users/cumulus/GNS3/projects/gns_vm_release_test/project-files/qemu/b0aca41a-dda7-4944-957f-4b0f94dee683/hda_disk.qcow2 
  -serial 
  telnet:127.0.0.1:2002,server,nowait -monitor 
  tcp:127.0.0.1:55606,server,nowait -net user,vlan=0,net=192.168.0.0/24,hostfwd=tcp::1402-:22 -net none -net
  nic,vlan=0,macaddr=00:00:ab:e6:83:00,model=virtio -net 
  nic,vlan=1,macaddr=00:00:ab:e6:83:01,model=virtio -net udp,vlan=1,name=gns3-1,sport=10003,dport=10002,daddr=127.0.0.1 -net
  nic,vlan=2,macaddr=00:00:ab:e6:83:02,model=virtio -net udp,vlan=2,name=gns3-2,sport=10007,dport=10006,daddr=127.0.0.1 -net
  nic,vlan=3,macaddr=00:00:ab:e6:83:03,model=virtio &amp;
</code></pre>

<article id="html-search-results" class="ht-content" style="display: none;">

</article>

<footer id="ht-footer">

</footer>
</article>

      <script src="https://utteranc.es/client.js"
        repo="CumulusNetworks/docs-internal"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
      </script>

    </div>
    

      


  

    <aside class="book-toc fixed">

  
    <div class="toc">
    
      <button>
      <a href="https://github.com/CumulusNetworks/docs/edit/master/content/version/cumulus-vx-30/Using-Cumulus-VX-with-GNS3/Using-GNS3-with-QEMU-and-KVM-Virtual-Machines.md" target="_blank" rel="noopener"><img src="/docs.cumulusnetworks.com/svg/pencil-circle.svg" alt="Edit" /> Edit this page</a>
      </button>
    
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#span-caveats-span"><span>Caveats</span></a></li>
<li><a href="#span-kvm-qemu-from-the-command-line-span"><span>KVM/QEMU from the Command Line</span></a></li>
</ul></li>
</ul>
</nav>
    </div>
  

</aside>






  </main>
  <footer class="footer-top">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="footer-content">
            <div class="mb-4">
                <img src="https://static.cumulusnetworks.com/static/images/shared/cumulus-networks-rt-white-trademarked.ff839f1b2570.svg">
                <p>© <script type="text/javascript">document.write(new Date().getFullYear());</script> Cumulus Networks.<br>
                Site by <a href="//unomena.com/" target="_blank">Unomena</a>.</p>
            </div>
            <ul class="mb-4">
              <li><h4>Products</h4></li>
              <li><a href="//cumulusnetworks.com/products/cumulus-linux/">Cumulus Linux</a></li>
              <li><a href="//cumulusnetworks.com/products/netq/">Cumulus NetQ</a></li>
              <li><a href="//cumulusnetworks.com/products/cumulus-express/">Cumulus Express</a></li>
            </ul>
            <ul class="mb-4">
              <li><h4>Learn</h4></li>
              <li><a href="//cumulusnetworks.com/learn/web-scale-networking-education/">Going web-scale</a></li>
              <li><a href="//cumulusnetworks.com/learn/events/">Events</a></li>
              <li><a href="//cumulusnetworks.com/blog/">Blog</a></li>
            </ul>
            <ul class="mb-4">
              <li><h4>About</h4></li>
              <li><a href="//cumulusnetworks.com/about/">Our story</a></li>
              <li><a href="//cumulusnetworks.com/about/careers/">Careers</a></li>
              <li><a href="//cumulusnetworks.com/about/media-coverage/">Media coverage</a></li>
              <li><a href="//docs.cumulusnetworks.com/" target="_blank">Tech docs</a></li>
              <li><a href="//cumulusnetworks.com/community/">Community</a></li>
            </ul>
            <ul>
              <li>
                <a href="//twitter.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M23 6.628l-2-.5 1-2-2.464.7A4.48 4.48 0 0 0 12 8.128v1c-3.539.73-6.634-1.2-9.5-4.5q-.75 4 1.5 6l-3-.5c.405 2.069 1.362 3.7 4 4l-2.5 1c1 2 2.566 2.31 5 2.5a10.748 10.748 0 0 1-6.5 2c12.755 5.669 20-2.664 20-10V8.3z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//www.facebook.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                      .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M17.768 7.5H13.5V5.6a.972.972 0 0 1 1.012-1.1c.418 0 2.988.01 2.988.01V.5h-4.329C9.244.5 8.5 3.474 8.5 5.355V7.5h-3v4h3v12h5v-12h3.851z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//linkedin.com/company/cumulus-networks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                      .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M6.5 22.5h-5v-13h5zm9-9a2 2 0 0 0-2 2v7h-5v-13h5v1.485a6.307 6.307 0 0 1 3.99-1.495c2.962 0 5.01 2.2 5.01 6.355V22.5h-5v-7a2 2 0 0 0-2-2zM6.5 5A2.5 2.5 0 1 1 4 2.5 2.5 2.5 0 0 1 6.5 5z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//vimeo.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M.5 7.393l.933 1.224S3.36 7.1 4 7.859s3.1 9.925 3.915 11.617c.714 1.483 2.684 3.444 4.845 2.042s9.34-7.529 10.626-14.769-8.642-5.723-9.693.583c2.627-1.577 4.03.642 2.686 3.154s-2.569 4.145-3.211 4.145-1.135-1.679-1.868-4.613c-.76-3.035-.755-8.5-3.911-7.882C4.412 2.721.5 7.393.5 7.393z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//www.github.com/cumulusnetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                        <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                        </style>
                    </defs>
                    <path class="a" d="M19.459 17c0-5.969-4.126-3.532-7.5-3.532s-7.5-2.375-7.5 3.532a3.5 3.5 0 0 0 3.5 3.5h8a3.5 3.5 0 0 0 3.5-3.5z"></path>
                    <path class="a" d="M21.489 10.214l.032.023s2.646-4.572-.6-7.237c-2 0-5.058 3.3-5.058 3.3l.022.016A14.152 14.152 0 0 0 8.1 6.3C8.083 6.285 5.037 3 3.042 3c-3.173 2.6-.729 7.012-.614 7.217a8.876 8.876 0 0 0-1.395 5.743c.241 3.126 2.847 6.54 5.982 6.54H16.9c3.135 0 5.742-3.414 5.982-6.54a8.857 8.857 0 0 0-1.393-5.746z"></path>
                    <ellipse class="a" cx="15.48" cy="17" rx="1" ry="1.5"></ellipse>
                    <ellipse class="a" cx="8.48" cy="17" rx="1" ry="1.5"></ellipse>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//slack.cumulusnetworks.com/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                        <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                        </style>
                    </defs>
                    <rect class="a" x=".5" y=".5" width="23" height="23" rx="6" ry="6"></rect>
                    <circle class="a" cx="12" cy="12" r="6"></circle>
                    <circle class="a" cx="19" cy="5" r="1.5"></circle>
                  </svg>
                </a>
              </li>
              <li>
                <p>Cumulus Networks<sup>®</sup> — Data center networking software for the open, modern data center.</p>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <div class="footer-bottom">
      <div class="container">
          <div class="row">
              <div class="col-12">
                  <ul>
                      <li><a href="//cumulusnetworks.com/legal/trademarks/">Trademarks</a></li>
                      <li><a href="//cumulusnetworks.com/legal/privacy/">Privacy</a></li>
                      <li><a href="//cumulusnetworks.com/legal/">Terms of service</a></li>
                  </ul>
              </div>
          </div>
      </div>
  </div>

  
  

</body>

</html>
