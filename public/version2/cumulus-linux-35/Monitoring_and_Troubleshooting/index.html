<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Monitoring and Troubleshooting | Cumulus Networks Documentation</title>

  
  <link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet">

  
  
  
  <link rel="stylesheet" href="/book.min.a4ec20f62c4bbaad99f9db40524ec8653f6279bcde229add21ff46dfd05dfa96.css">

  
  <link rel="icon" href="/favicon.png" type="image/x-icon">

  
  <link rel="alternate" type="application/rss+xml" href="http://example.org/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/index.xml" title="Cumulus Networks Documentation" />
  <!--
  Made with Book Theme
  https://github.com/alex-shpak/hugo-book
  -->

</head>


<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  
  <header id="site-nav">
    <div class="header-wrapper flex">
      <a href="/">
        <img src="/header-logo.png" alt="Cumulus Networks">
        <img src="/cumulus-networks-rt-white.svg" alt="Cumulus Networks" class="header-mobile">
        <span>Docs</span>
      </a>
      <ul class="flex">
        <li><a href="//cumulusnetworks.com">HOME</a></li>
        <li><a href="//support.cumulusnetworks.com/">SUPPORT</a></li>
        <li><a href="//docs.cumulusnetworks.com/">DOCS</a></li>
        <li><a href="//education.cumulusnetworks.com">EDUCATION</a></li>
        <li><a href="//cumulusnetworks.com/blog/">BLOG</a></li>
        <li><a href="//forums.cumulusnetworks.com/">FORUMS</a></li>
      </ul>
      <div class="burger-menu">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </header>
  <div id="product-nav" class="flex">
    <ul>
      <li class="active"><a href="/Cumulus_Linux/">Cumulus Linux</a></li>
      <li><a href="/Cumulus_NetQ/">Cumulus NetQ</a></li>
      <li><a href="/Chassis/">Cumulus Express</a></li>
      <li><a href="">Cumulus VX</a></li>
    </ul>
    <div class="search-container">
      <div id="doc-search-box">
        <input type="text" class="doc-search-input" placeholder="Search" value="">
        <span><button type="submit"><img src="/icons/search_20x20.svg" alt=""></button></span>
      </div>
      <div id="dropdown" class="dropdown">
          <button class="btn" type="button" id="dropdownMenuButton">
            v3.76
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item" href="#">v3.5</a>
            <a class="dropdown-item" href="#">v2.1</a>
            <a class="dropdown-item" href="#">v1.43</a>
          </div>
      </div>
    </div>
  </div>
  <main class="flex container">
    <aside class="book-menu fixed">

      <nav role="navigation">
        <h2 class="book-brand">
          <a href="http://example.org/">Cumulus Networks Documentation</a>
        </h2>
        
        




  <ul id = "top" class = "cn-book-section-container">
  
    

  <li class="cn-book-section">
      

  <a href="/version2/" >
    Version2s
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/" >
    Cumulus Linux User Guide
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Installation_Management/" >
    Installation Management
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Installation_Management/Managing_Cumulus_Linux_Disk_Images/" >
    Managing Cumulus Linux Disk Images
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Installation_Management/Installing_a_New_Cumulus_Linux_Image/" >
    Installing a New Cumulus Linux Image
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Installation_Management/Upgrading_Cumulus_Linux/" >
    Upgrading Cumulus Linux
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Installation_Management/Using_Snapshots/" >
    Using Snapshots
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Installation_Management/Adding_and_Updating_Packages/" >
    Adding and Updating Packages
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Installation_Management/Zero_Touch_Provisioning_-_ZTP/" >
    Zero Touch Provisioning - ZTP
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/System_Configuration/" >
    System Configuration
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/System_Configuration/Network_Command_Line_Utility_-_NCLU/" >
    Network Command Line Utility - NCLU
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/System_Configuration/Network_Command_Line_Utility_-_NCLU/Network_Command_Line_Utility/" >
    Network Command Line Utility
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/System_Configuration/Authentication_Authorization_and_Accounting/" >
    Authentication, Authorization and Accounting
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/System_Configuration/Authentication_Authorization_and_Accounting/SSH_for_Remote_Access/" >
    SSH for Remote Access
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/System_Configuration/Authentication_Authorization_and_Accounting/User_Accounts/" >
    User Accounts
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/System_Configuration/Authentication_Authorization_and_Accounting/Using_sudo_to_Delegate_Privileges/" >
    Using sudo to Delegate Privileges
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/System_Configuration/Authentication_Authorization_and_Accounting/LDAP_Authentication_and_Authorization/" >
    LDAP Authentication and Authorization
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/System_Configuration/Authentication_Authorization_and_Accounting/TACACS_Plus/" >
    TACACS Plus
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/System_Configuration/Authentication_Authorization_and_Accounting/RADIUS_AAA/" >
    RADIUS AAA
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/System_Configuration/Netfilter_-_ACLs/" >
    Netfilter - ACLs
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/System_Configuration/Netfilter_-_ACLs/Default_Cumulus_Linux_ACL_Configuration/" >
    Default Cumulus Linux ACL Configuration
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/System_Configuration/Netfilter_-_ACLs/Filtering_Learned_MAC_Addresses/" >
    Filtering Learned MAC Addresses
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/System_Configuration/Setting_Date_and_Time/" >
    Setting Date and Time
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/System_Configuration/Managing_Application_Daemons/" >
    Managing Application Daemons
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/System_Configuration/Configuring_switchd/" >
    Configuring switchd
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/System_Configuration/Power_over_Ethernet_-_PoE/" >
    Power over Ethernet - PoE
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/System_Configuration/Configuring_a_Global_Proxy/" >
    Configuring a Global Proxy
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/System_Configuration/HTTP_API/" >
    HTTP API
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Interface_Configuration_and_Management/" >
    Interface Configuration and Management
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Interface_Configuration_and_Management/Buffer_and_Queue_Management/" >
    Buffer and Queue Management
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Interface_Configuration_and_Management/Buffer_and_Queue_Management/Configuring_Hardware-enabled_DDOS_Protection/" >
    Configuring Hardware-enabled DDOS Protection
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Interface_Configuration_and_Management/Layer_1_and_Switch_Port_Attributes/" >
    Layer 1 and Switch Port Attributes
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Interface_Configuration_and_Management/Configuring_DHCP_Relays/" >
    Configuring DHCP Relays
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Interface_Configuration_and_Management/Configuring_DHCP_Servers/" >
    Configuring DHCP Servers
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Interface_Configuration_and_Management/802.1X_Interfaces/" >
    802.1X Interfaces
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Layer_1_and_2/" >
    Layer 1 and 2
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Layer_1_and_2/Link_Layer_Discovery_Protocol/" >
    Link Layer Discovery Protocol
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_1_and_2/Link_Layer_Discovery_Protocol/Voice_VLAN/" >
    Voice VLAN
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Layer_1_and_2/Ethernet_Bridging_-_VLANs/" >
    Ethernet Bridging - VLANs
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_1_and_2/Ethernet_Bridging_-_VLANs/VLAN-aware_Bridge_Mode_for_Large-scale_Layer_2_Environments/" >
    VLAN-aware Bridge Mode for Large-scale Layer 2 Environments
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_1_and_2/Ethernet_Bridging_-_VLANs/Traditional_Mode_Bridges/" >
    Traditional Mode Bridges
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_1_and_2/Ethernet_Bridging_-_VLANs/VLAN_Tagging/" >
    VLAN Tagging
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Layer_1_and_2/Virtual_Router_Redundancy_-_VRR/" >
    Virtual Router Redundancy - VRR
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_1_and_2/Virtual_Router_Redundancy_-_VRR/ifplugd/" >
    ifplugd
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_1_and_2/Spanning_Tree_and_Rapid_Spanning_Tree/" >
    Spanning Tree and Rapid Spanning Tree
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_1_and_2/Prescriptive_Topology_Manager_-_PTM/" >
    Prescriptive Topology Manager - PTM
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_1_and_2/Bonding_-_Link_Aggregation/" >
    Bonding - Link Aggregation
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_1_and_2/Multi-Chassis_Link_Aggregation_-_MLAG/" >
    Multi-Chassis Link Aggregation - MLAG
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_1_and_2/LACP_Bypass/" >
    LACP Bypass
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_1_and_2/IGMP_and_MLD_Snooping/" >
    IGMP and MLD Snooping
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Network_Virtualization/" >
    Network Virtualization
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Network_Virtualization/Static_VXLAN_Configurations/" >
    Static VXLAN Configurations
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Network_Virtualization/Static_VXLAN_Configurations/Static_VXLAN_Tunnels/" >
    Static VXLAN Tunnels
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Network_Virtualization/Static_VXLAN_Configurations/Static_MAC_Bindings_with_VXLAN/" >
    Static MAC Bindings with VXLAN
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Network_Virtualization/Lightweight_Network_Virtualization_-_LNV_Overview/" >
    Lightweight Network Virtualization - LNV Overview
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Network_Virtualization/Lightweight_Network_Virtualization_-_LNV_Overview/LNV_VXLAN_Active-Active_Mode/" >
    LNV VXLAN Active-Active Mode
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Network_Virtualization/Lightweight_Network_Virtualization_-_LNV_Overview/LNV_Full_Example/" >
    LNV Full Example
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Network_Virtualization/Virtualization_Integrations/" >
    Virtualization Integrations
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Network_Virtualization/Virtualization_Integrations/Integrating_Hardware_VTEPs_with_Midokura_MidoNet_and_OpenStack/" >
    Integrating Hardware VTEPs with Midokura MidoNet and OpenStack
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Network_Virtualization/Virtualization_Integrations/Integrating_Hardware_VTEPs_with_VMware_NSX-V/" >
    Integrating Hardware VTEPs with VMware NSX-V
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Network_Virtualization/Virtualization_Integrations/Integrating_Hardware_VTEPs_with_VMware_NSX/" >
    Integrating Hardware VTEPs with VMware NSX
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Network_Virtualization/Ethernet_Virtual_Private_Network_-_EVPN/" >
    Ethernet Virtual Private Network - EVPN
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Network_Virtualization/VXLAN_Routing/" >
    VXLAN Routing
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Network_Virtualization/VXLAN_Scale/" >
    VXLAN Scale
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Network_Virtualization/Hybrid_Cloud_Connectivity_with_QinQ_and_VXLANs/" >
    Hybrid Cloud Connectivity with QinQ and VXLANs
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Layer_3/" >
    Layer 3
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Layer_3/FRRouting_Overview/" >
    FRRouting Overview
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_3/FRRouting_Overview/Upgrading_from_Quagga_to_FRRouting/" >
    Upgrading from Quagga to FRRouting
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Layer_3/Configuring_FRRouting/" >
    Configuring FRRouting
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_3/Configuring_FRRouting/Comparing_NCLU_and_vtysh_Commands/" >
    Comparing NCLU and vtysh Commands
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_3/Routing/" >
    Routing
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_3/Introduction_to_Routing_Protocols/" >
    Introduction to Routing Protocols
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_3/Network_Topology/" >
    Network Topology
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_3/Open_Shortest_Path_First_-_OSPF_-_Protocol/" >
    Open Shortest Path First - OSPF - Protocol
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_3/Open_Shortest_Path_First_v3_-_OSPFv3_-_Protocol/" >
    Open Shortest Path First v3 - OSPFv3 - Protocol
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_3/Border_Gateway_Protocol_-_BGP/" >
    Border Gateway Protocol - BGP
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_3/Bidirectional_Forwarding_Detection_-_BFD/" >
    Bidirectional Forwarding Detection - BFD
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_3/Equal_Cost_Multipath_Load_Sharing_-_Hardware_ECMP/" >
    Equal Cost Multipath Load Sharing - Hardware ECMP
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_3/Redistribute_Neighbor/" >
    Redistribute Neighbor
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_3/Virtual_Routing_and_Forwarding_-_VRF/" >
    Virtual Routing and Forwarding - VRF
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_3/Management_VRF/" >
    Management VRF
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_3/Protocol_Independent_Multicast_-_PIM/" >
    Protocol Independent Multicast - PIM
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Layer_3/Segment_Routing/" >
    Segment Routing
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/"  class="active" >
    Monitoring and Troubleshooting
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Monitoring_System_Hardware/" >
    Monitoring System Hardware
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Monitoring_System_Hardware/Network_Switch_Port_LED_and_Status_LED_Guidelines/" >
    Network Switch Port LED and Status LED Guidelines
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Understanding_the_cl-support_Output_File/" >
    Understanding the cl-support Output File
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Understanding_the_cl-support_Output_File/Troubleshooting_Log_Files/" >
    Troubleshooting Log Files
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Understanding_the_cl-support_Output_File/Troubleshooting_the_etc_Directory/" >
    Troubleshooting the etc Directory
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Troubleshooting_Network_Interfaces/" >
    Troubleshooting Network Interfaces
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Troubleshooting_Network_Interfaces/Monitoring_Interfaces_and_Transceivers_Using_ethtool/" >
    Monitoring Interfaces and Transceivers Using ethtool
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Network_Troubleshooting/" >
    Network Troubleshooting
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Network_Troubleshooting/Using_NCLU_to_Troubleshoot_Your_Network_Configuration/" >
    Using NCLU to Troubleshoot Your Network Configuration
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Network_Troubleshooting/Monitoring_System_Statistics_and_Network_Traffic_with_sFlow/" >
    Monitoring System Statistics and Network Traffic with sFlow
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/SNMP_Monitoring/" >
    SNMP Monitoring
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/SNMP_Monitoring/Using_Nutanix_Prism_as_a_Monitoring_Tool/" >
    Using Nutanix Prism as a Monitoring Tool
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Single_User_Mode_-_Boot_Recovery/" >
    Single User Mode - Boot Recovery
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Resource_Diagnostics_Using_cl-resource-query/" >
    Resource Diagnostics Using cl-resource-query
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Monitoring_Virtual_Device_Counters/" >
    Monitoring Virtual Device Counters
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Buffer_Monitoring/" >
    Buffer Monitoring
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Monitoring_Best_Practices/" >
    Monitoring Best Practices
  </a>


    </li>
    
  </ul>


  </li>


    
      

  <li class="cn-book-section">
      

  <a href="/version2/cumulus-linux-35/Network_Solutions/" >
    Network Solutions
  </a>



      

  <ul class="cn-book-section-container" id = "subsection">
    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Network_Solutions/Data_Center_Host_to_ToR_Architecture/" >
    Data Center Host to ToR Architecture
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Network_Solutions/Cumulus_Networks_Services_Demos/" >
    Cumulus Networks Services Demos
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Network_Solutions/Docker_on_Cumulus_Linux/" >
    Docker on Cumulus Linux
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Network_Solutions/OpenStack_Neutron_ML2_and_Cumulus_Linux/" >
    OpenStack Neutron ML2 and Cumulus Linux
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Network_Solutions/Anycast_Design_Guide/" >
    Anycast Design Guide
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Network_Solutions/RDMA_over_Converged_Ethernet_-_RoCE/" >
    RDMA over Converged Ethernet - RoCE
  </a>


    </li>
    
  </ul>


  </li>


    
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Quick_Start_Guide/" >
    Quick Start Guide
  </a>


    </li>
    
    <li >
      

  <a href="/version2/cumulus-linux-35/Cumulus_Linux_Index/" >
    Cumulus Linux Index
  </a>


    </li>
    
  </ul>


  </li>


    
    
  </ul>


  </li>


  
  </ul>









      </nav>

      
      
      
      

      <script src = "http://example.org/js/menuBundle.js"> </script>

    </aside>

    <div class="book-page">

      
      <header class="align-center justify-between book-header">
        <label for="menu-control">
          <img src="/svg/menu.svg" alt="Menu" />
        </label>
        <strong>Monitoring and Troubleshooting</strong>
      </header>

      
      
<article class="markdown">
<h1>Monitoring and Troubleshooting</h1>

<p>This chapter introduces monitoring and troubleshooting Cumulus Linux.</p>

<h2 id="using-the-serial-console">Using the Serial Console</h2>

<p>The serial console can be a useful tool for debugging issues, especially
when you find yourself rebooting the switch often or if you don’t have a
reliable network connection.</p>

<p>The default serial console baud rate is 115200, which is the baud rate
<a href="http://opencomputeproject.github.io/onie/" target="_blank">ONIE</a> uses.</p>

<h3 id="configuring-the-serial-console-on-arm-switches">Configuring the Serial Console on ARM Switches</h3>

<p>On ARM switches, the U-Boot environment variable <code>baudrate</code> identifies
the baud rate of the serial console. To change the <code>baudrate</code> variable,
use the <code>fw_setenv</code> command:</p>

<pre><code>                   
cumulus@switch:~$ sudo fw_setenv baudrate 9600
Updating environment variable: `baudrate'
Proceed with update [N/y]? y
   
    
</code></pre>

<p>You must reboot the switch for the <code>baudrate</code> change to take effect.</p>

<p>The valid values for <code>baudrate</code> are:</p>

<ul>
<li><p>300</p></li>

<li><p>600</p></li>

<li><p>1200</p></li>

<li><p>2400</p></li>

<li><p>4800</p></li>

<li><p>9600</p></li>

<li><p>19200</p></li>

<li><p>38400</p></li>

<li><p>115200</p></li>
</ul>

<h3 id="configuring-the-serial-console-on-x86-switches">Configuring the Serial Console on x86 Switches</h3>

<p>On x86 switches, you configure serial console baud rate by editing
<code>grub</code>.</p>


<div class="notices warning" > <p>Incorrect configuration settings in <code>grub</code> can cause the switch to be
inaccessible via the console. Grub changes should be carefully reviewed
before implementation.</p>
 </div>


<p>The valid values for the baud rate are:</p>

<ul>
<li><p>300</p></li>

<li><p>600</p></li>

<li><p>1200</p></li>

<li><p>2400</p></li>

<li><p>4800</p></li>

<li><p>9600</p></li>

<li><p>19200</p></li>

<li><p>38400</p></li>

<li><p>115200</p></li>
</ul>

<p>To change the serial console baud rate:</p>

<ol>
<li><p>Edit <code>/etc/default/grub</code>. The two relevant lines in
<code>/etc/default/grub</code> are as follows; replace the <em>115200</em> value with
a valid value specified above in the <code>--speed</code> variable in the first
line and in the <code>console</code> variable in the second line:</p>

<pre><code>                       
GRUB_SERIAL_COMMAND=&quot;serial --port=0x2f8 --speed=115200 --word=8 --parity=no --stop=1&quot;              
GRUB_CMDLINE_LINUX=&quot;console=ttyS1,115200n8 cl_platform=accton_as5712_54x&quot;
       
        
</code></pre></li>

<li><p>After you save your changes to the grub configuration, type the
following at the command prompt:</p>

<pre><code>                       
cumulus@switch:~$ update-grub
       
        
</code></pre></li>

<li><p>If you plan on accessing your switch&rsquo;s BIOS over the serial console,
you need to update the baud rate in the switch BIOS. For more
information, see <a href="https://support.cumulusnetworks.com/hc/en-us/articles/203884473" target="_blank">this knowledge base
article</a>.</p></li>

<li><p>Reboot the switch.</p></li>
</ol>

<h2 id="getting-general-system-information">Getting General System Information</h2>

<p>Two commands are helpful for getting general information about the
switch and the version of Cumulus Linux you are running. These are
helpful with system diagnostics and if you need to submit a support
request to Cumulus Networks.</p>

<p>For information about the version of Cumulus Linux running on the
switch, run <code>net show version</code>, which displays the contents of
<code>/etc/lsb-release</code>:</p>

<pre><code>                   
cumulus@switch:~$ net show version
NCLU_VERSION=1.0
DISTRIB_ID=&quot;Cumulus Linux&quot;
DISTRIB_RELEASE=3.4.0
DISTRIB_DESCRIPTION=&quot;Cumulus Linux 3.4.0&quot;
   
    
</code></pre>

<p>For general information about the switch, run <code>net show system</code>, which
gathers information about the switch from a number of files in the
system:</p>

<pre><code>                   
cumulus@switch:~$ net show system
 
Penguin Arctica 4806XP
Cumulus Version 3.4.0
Build: Cumulus Linux 3.4.0
 
Chipset: Broadcom Trident2 BCM56854
 
Port Config: 48 x 10G-SFP+ &amp; 6 x 40G-QSFP+
 
CPU: (x86_64) Intel Atom C2558 2.40GHz
 
Uptime: 4 days, 20:53:49
   
    
</code></pre>

<h2 id="diagnostics-using-cl-support">Diagnostics Using cl-support</h2>

<p>You can use <code>cl-support</code> to generate a single export file that contains
various details and the configuration from a switch. This is useful for
remote debugging and troubleshooting. For more information about
<code>cl-support</code>, read <a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Understanding_the_cl-support_Output_File/Understanding_the_cl-support_Output_File">Understanding the cl-support Output
File</a>.</p>

<p>You should run <code>cl-support</code> before you submit a support request to
Cumulus Networks as this file helps in the investigation of issues.</p>

<pre><code>                   
cumulus@switch:~$ sudo cl-support -h
Usage: cl-support [-h] [-s] [-t] [-v] [reason]...
 
Args:
[reason]: Optional reason to give for invoking cl-support.
         Saved into tarball's cmdline.args file.
Options:
-h: Print this usage statement
-s: Security sensitive collection
-t: User filename tag
-v: Verbose
-e MODULES: Enable modules. Comma separated module list (run with -e help for module names)
-d MODULES: Disable modules. Comma separated module list (run with -d help for module names)
   
    
</code></pre>

<h2 id="sending-log-files-to-a-syslog-server">Sending Log Files to a syslog Server</h2>

<h3 id="using-nclu">Using NCLU</h3>

<p>The remote syslog server can be configured on the switch using the
following configuration:</p>

<pre><code>                   
cumulus@switch:~$ net add syslog host ipv4 192.168.0.254 port udp 514
   
    
</code></pre>

<p>This creates a file called <code>/etc/rsyslog.d/11-remotesyslog.conf</code> in the
<code>rsyslog</code> directory. The file has the following content:</p>

<pre><code>                   
cumulus@switch:~$ cat /etc/rsyslog.d/11-remotesyslog.conf
# This file was automatically generated by NCLU.
*.*   @192.168.0.254:514   # UDP
   
    
</code></pre>


<div class="notices note" > <p>NCLU cannot configure a remote syslog if management VRF is enabled on
the switch. To do so, please refer to the section <a href="#src-8357374_MonitoringandTroubleshooting-mgmtvrf">Writing to syslog
with Management VRF
Enabled</a> below.</p>
 </div>


<h3 id="logging-technical-details">Logging Technical Details</h3>

<p>Logging on Cumulus Linux is done with
<a href="http://www.rsyslog.com/" target="_blank">rsyslog</a>. <code>rsyslog</code> provides both local
logging to the <code>syslog</code> file as well as the ability to export logs to an
external <code>syslog</code> server. High precision timestamps are enabled for all
<code>rsyslog</code> log files; here&rsquo;s an example:</p>

<pre><code>                   
2015-08-14T18:21:43.337804+00:00 cumulus switchd[3629]: switchd.c:1409 switchd version 1.0-cl2.5+5
   
    
</code></pre>

<p>There are applications in Cumulus Linux that could write directly to a
log file without going through <code>rsyslog</code>. These files are typically
located in <code>/var/log/</code>.</p>


<div class="notices note" > <p>All Cumulus Linux rules are stored in separate files in
<code>/etc/rsyslog.d/</code>, which are called at the end of the <code>GLOBAL
DIRECTIVES</code> section of <code>/etc/rsyslog.conf</code>. As a result, the <code>RULES</code>
section at the end of <code>rsyslog.conf</code> is ignored because the messages
have to be processed by the rules in <code>/etc/rsyslog.d</code> and then dropped
by the last line in <code>/etc/rsyslog.d/99-syslog.conf</code>.</p>
 </div>


<h3 id="local-logging">Local Logging</h3>

<p>Most logs within Cumulus Linux are sent through <code>rsyslog</code>, which then
writes them to files in the <code>/var/log</code> directory. There are default
rules in the <code>/etc/rsyslog.d/</code> directory that define where the logs are
written:</p>

<table>
<thead>
<tr>
<th>Rule</th>
<th>Purpose</th>
</tr>
</thead>

<tbody>
<tr>
<td>10-rules.conf</td>
<td>Sets defaults for log messages, include log format and log rate limits.</td>
</tr>

<tr>
<td>15-crit.conf</td>
<td>Logs crit, alert or emerg log messages to <code>/var/log/crit.log</code> to ensure they are not rotated away rapidly.</td>
</tr>

<tr>
<td>20-clagd.conf</td>
<td>Logs <code>clagd</code> messages to <code>/var/log/clagd.log</code> for <a href="/version2/cumulus-linux-35/Layer_1_and_2/Multi-Chassis_Link_Aggregation_-_MLAG">MLAG</a>.</td>
</tr>

<tr>
<td>22-linkstate.conf</td>
<td>Logs link state changes for all physical and logical network links to <code>/var/log/linkstate</code></td>
</tr>

<tr>
<td>25-switchd.conf</td>
<td>Logs <code>switchd</code> messages to <code>/var/log/switchd.log</code>.</td>
</tr>

<tr>
<td>30-ptmd.conf</td>
<td>Logs <code>ptmd</code> messages to <code>/var/log/ptmd.log</code> for <a href="/version2/cumulus-linux-35/Layer_1_and_2/Prescriptive_Topology_Manager_-_PTM">Prescription Topology Manager</a>.</td>
</tr>

<tr>
<td>35-rdnbrd.conf</td>
<td>Logs <code>rdnbrd</code> messages to <code>/var/log/rdnbrd.log</code> for <a href="/version2/cumulus-linux-35/Layer_3/Redistribute_Neighbor">redistribute neighbor</a>.</td>
</tr>

<tr>
<td>40-netd.conf</td>
<td>Logs <code>netd</code> messages to <code>/var/log/netd.log</code> for <a href="/version2/cumulus-linux-35/System_Configuration/Network_Command_Line_Utility_-_NCLU/Network_Command_Line_Utility_-_NCLU">NCLU</a>.</td>
</tr>

<tr>
<td>45-frr.conf</td>
<td>Logs routing protocol messages to /var/log/frr/frr.log. This includes BGP and OSPF log messages.</td>
</tr>

<tr>
<td>99-syslog.conf</td>
<td>All remaining processes that use <code>rsyslog</code> are sent to <code>/var/log/syslog</code>.</td>
</tr>
</tbody>
</table>

<p>Log files that are rotated are compressed into an archive. Processes
that do not use <code>rsyslog</code> write to their own log files within the
<code>/var/log</code> directory. For more information on specific log files, see
<a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Understanding_the_cl-support_Output_File/Troubleshooting_Log_Files">Troubleshooting Log
Files</a>.</p>

<h3 id="enabling-remote-syslog">Enabling Remote syslog</h3>

<p>If you need to send other log files — such as <code>switchd</code> logs — to a
<code>syslog</code> server, do the following:</p>

<ol>
<li><p>Create a file in <code>/etc/rsyslog.d/</code>. Make sure it starts with a
number lower than 99 so that it executes before log messages are
dropped in, such as <code>20-clagd.conf</code> or <code>25-switchd.conf</code>. Our
example file is called <code>/etc/rsyslog.d/11-remotesyslog.conf</code>. Add
content similar to the following:</p>

<pre><code>                       
## Logging switchd messages to remote syslog server
 
@192.168.1.2:514
       
        
</code></pre>

<p>This configuration sends log messages to a remote <code>syslog</code> server
for the following processes: <code>clagd</code>, <code>switchd</code>, <code>ptmd</code>, <code>rdnbrd</code>,
<code>netd</code> and <code>syslog</code>. It follows the same syntax as the
<code>/var/log/syslog</code> file, where <em>@</em> indicates UDP, <em>192.168.1.2</em> is
the IP address of the <code>syslog</code> server, and <em>514</em> is the UDP port.</p>


<div class="notices note" > <pre><code>For TCP-based syslog, use two @@ before the IP address:
*@@192.168.1.2:514*.

Running `syslog` over TCP places a burden on the switch to queue
packets in the `syslog` buffer. This may cause detrimental effects
if the remote `syslog` server becomes unavailable.
</code></pre>
 </div>



<div class="notices note" > <pre><code>The numbering of the files in `/etc/rsyslog.d/` dictates how the
rules are installed into `rsyslog.d`. If you want to remotely log
only the messages in `/var/syslog`, and not those in
`/var/log/clagd.log` or `/var/log/switchd.log`, for instance, then
name the file `98-remotesyslog.conf`, since it's lower than the
`/var/syslog` file `99-syslog.conf` only.
</code></pre>
 </div>



<div class="notices note" > <pre><code>Do not use the `imfile` module with any file written by `rsyslogd`.
</code></pre>
 </div>
</li>

<li><p>Restart <code>rsyslog</code>.</p>

<pre><code>                       
cumulus@switch:~$ sudo systemctl restart rsyslog.service
       
        
</code></pre></li>
</ol>

<h3 id="writing-to-syslog-with-management-vrf-enabled">Writing to syslog with Management VRF Enabled</h3>

<p>You can write to syslog with <a href="/version2/cumulus-linux-35/Layer_3/Management_VRF">management
VRF</a> enabled by
applying the following configuration; this configuration is commented
out in the <code>/etc/rsyslog.d/11-remotesyslog.conf</code> file:</p>

<pre><code>                   
cumulus@switch:~$ cat /etc/rsyslog.d/11-remotesyslog.conf
## Copy all messages to the remote syslog server at 192.168.0.254 port 514
action(type=&quot;omfwd&quot; Target=&quot;192.168.0.254&quot; Device=&quot;mgmt&quot; Port=&quot;514&quot; Protocol=&quot;udp&quot;)
   
    
</code></pre>

<p>For each syslog server, configure a unique <code>action</code>line. For example,
to configure two syslog servers at 192.168.0.254 and 10.0.0.1:</p>

<pre><code>                   
cumulus@switch:~$ cat /etc/rsyslog.d/11-remotesyslog.conf
## Copy all messages to the remote syslog servers at 192.168.0.254 and 10.0.0.1 port 514
action(type=&quot;omfwd&quot; Target=&quot;192.168.0.254&quot; Device=&quot;mgmt&quot; Port=&quot;514&quot; Protocol=&quot;udp&quot;)
action(type=&quot;omfwd&quot; Target=&quot;10.0.0.1&quot; Device=&quot;mgmt&quot; Port=&quot;514&quot; Protocol=&quot;udp&quot;)
   
    
</code></pre>

<p><details></p>

<h3 id="rate-limiting-syslog-messages">Rate-limiting syslog Messages</h3>

<p>If you want to limit the number of <code>syslog</code> messages that can be written
to the <code>syslog</code> file from individual processes, add the following
configuration to <code>/etc/rsyslog.conf</code>. Adjust the interval and burst
values to rate-limit messages to the appropriate levels required by your
environment. For more information, read the <a href="http://www.rsyslog.com/doc/v8-stable/configuration/modules/imuxsock.html" target="_blank">rsyslog
documentation</a>.</p>

<pre><code>                   
module(load=&quot;imuxsock&quot;
      SysSock.RateLimit.Interval=&quot;2&quot; SysSock.RateLimit.Burst=&quot;50&quot;)
   
    
</code></pre>

<p><summary>The following test script shows an example of rate-limit output
in Cumulus Linux &hellip; </summary></p>

<pre><code>                   
root@leaf1:mgmt-vrf:/home/cumulus# cat ./syslog.py 
#!/usr/bin/python
import syslog
message_count=100
print &quot;Sending %s Messages...&quot;%(message_count)
for i in range(0,message_count):
syslog.syslog(&quot;Message Number:%s&quot;%(i))
print &quot;DONE.&quot;
 
root@leaf1:mgmt-vrf:/home/cumulus# ./syslog.py 
Sending 100 Messages...
DONE.
 
root@leaf1:mgmt-vrf:/home/cumulus# tail -n 60 /var/log/syslog
2017-02-22T19:59:50.043342+00:00 leaf1 syslog.py[22830]: Message Number:0
2017-02-22T19:59:50.043723+00:00 leaf1 syslog.py[22830]: Message Number:1
2017-02-22T19:59:50.043941+00:00 leaf1 syslog.py[22830]: Message Number:2
2017-02-22T19:59:50.044565+00:00 leaf1 syslog.py[22830]: Message Number:3
2017-02-22T19:59:50.044830+00:00 leaf1 syslog.py[22830]: Message Number:4
2017-02-22T19:59:50.045680+00:00 leaf1 syslog.py[22830]: Message Number:5
&lt;...snip...&gt;
2017-02-22T19:59:50.056727+00:00 leaf1 syslog.py[22830]: Message Number:45
2017-02-22T19:59:50.057599+00:00 leaf1 syslog.py[22830]: Message Number:46
2017-02-22T19:59:50.057741+00:00 leaf1 syslog.py[22830]: Message Number:47
2017-02-22T19:59:50.057936+00:00 leaf1 syslog.py[22830]: Message Number:48
2017-02-22T19:59:50.058125+00:00 leaf1 syslog.py[22830]: Message Number:49
2017-02-22T19:59:50.058324+00:00 leaf1 rsyslogd-2177: imuxsock[pid 22830]: begin to drop messages due to rate-limiting
   
    
</code></pre>

<p></details></p>

<h3 id="harmless-syslog-error-failed-to-reset-devices-list">Harmless syslog Error: Failed to reset devices.list</h3>

<p>The following message gets logged to <code>/var/log/syslog</code> when you run
<code>systemctl daemon-reload</code> and during system boot:</p>

<pre><code>                   
systemd[1]: Failed to reset devices.list on /system.slice: Invalid argument
   
    
</code></pre>

<p>This message is harmless, and can be ignored. It is logged when
<code>systemd</code> attempts to change cgroup attributes that are read only. The
upstream version of systemd has been modified to not log this message by
default.</p>

<p>The <code>systemctl daemon-reload</code> command is often issued when Debian
packages are installed, so the message may be seen multiple times when
upgrading packages.</p>

<h3 id="syslog-troubleshooting-tips">Syslog Troubleshooting Tips</h3>

<p>You can use the following commands to troubleshoot <code>syslog</code> issues.</p>

<h4 id="verifying-that-rsyslog-is-running">Verifying that rsyslog is Running</h4>

<p>To verify that the <code>rsyslog</code> service is running, use the <code>sudo systemctl
status rsyslog.service</code> command:</p>

<pre><code>                   
 cumulus@leaf01:mgmt-vrf:~$ sudo systemctl status rsyslog.service
 rsyslog.service - System Logging Service
   Loaded: loaded (/lib/systemd/system/rsyslog.service; enabled)
   Active: active (running) since Sat 2017-12-09 00:48:58 UTC; 7min ago
     Docs: man:rsyslogd(8)
           http://www.rsyslog.com/doc/
 Main PID: 11751 (rsyslogd)
   CGroup: /system.slice/rsyslog.service
           └─11751 /usr/sbin/rsyslogd -n
 
Dec 09 00:48:58 leaf01 systemd[1]: Started System Logging Service.
   
    
</code></pre>

<h4 id="verifying-your-rsyslog-configuration">Verifying your rsyslog Configuration.</h4>

<p>After making manual changes to any files in the <code>/etc/rsyslog.d</code>
directory, use the <code>sudo rsyslogd -N1</code> command to identify any errors in
the configuration files that might prevent the <code>rsyslog</code> service from
starting.</p>

<p>In the following example, a closing parenthesis is missing in the
<code>11-remotesyslog.conf</code> file, which is used to configure <code>syslog</code> for
management VRF:</p>

<pre><code>                   
cumulus@leaf01:mgmt-vrf:~$ cat /etc/rsyslog.d/11-remotesyslog.conf
action(type=&quot;omfwd&quot; Target=&quot;192.168.0.254&quot; Device=&quot;mgmt&quot; Port=&quot;514&quot; Protocol=&quot;udp&quot;
 
cumulus@leaf01:mgmt-vrf:~$ sudo rsyslogd -N1
rsyslogd: version 8.4.2, config validation run (level 1), master config /etc/rsyslog.conf
rsyslogd: error during parsing file /etc/rsyslog.d/15-crit.conf, on or before line 3: invalid character '$' in object definition - is there an invalid escape sequence somewhere? [try http://www.rsyslog.com/e/2207 ]
rsyslogd: error during parsing file /etc/rsyslog.d/15-crit.conf, on or before line 3: syntax error on token 'crit_log' [try http://www.rsyslog.com/e/2207 ]
   
    
</code></pre>

<p>After correcting the invalid syntax, issuing the <code>sudo</code><code>rsyslogd -N1</code>
command produces the following output.</p>

<pre><code>                   
cumulus@leaf01:mgmt-vrf:~$ cat /etc/rsyslog.d/11-remotesyslog.conf
action(type=&quot;omfwd&quot; Target=&quot;192.168.0.254&quot; Device=&quot;mgmt&quot; Port=&quot;514&quot; Protocol=&quot;udp&quot;)
cumulus@leaf01:mgmt-vrf:~$ sudo rsyslogd -N1
rsyslogd: version 8.4.2, config validation run (level 1), master config /etc/rsyslog.conf
rsyslogd: End of config validation run. Bye.
   
    
</code></pre>

<h4 id="using-tcpdump">Using tcpdump</h4>

<p>If a syslog server is not accessible to validate that <code>syslog</code> messages
are being exported, you can use <code>tcpdump</code>.</p>

<p>In the following example, a syslog server has been configured at
192.168.0.254 for UDP syslogs on port 514:</p>

<pre><code>                   
cumulus@leaf01:mgmt-vrf:~$ sudo tcpdump -i eth0 host 192.168.0.254 and udp port 514
   
    
</code></pre>

<p>A simple way to generate <code>syslog</code> messages is to use <code>sudo</code> in another
session, such as <code>sudo date</code>. Using <code>sudo</code> generates an <code>authpriv</code> log.</p>

<pre><code>                   
cumulus@leaf01:mgmt-vrf:~$ sudo tcpdump -i eth0 host 192.168.0.254 and udp port 514
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes
00:57:15.356836 IP leaf01.lab.local.33875 &gt; 192.168.0.254.syslog: SYSLOG authpriv.notice, length: 105
00:57:15.364346 IP leaf01.lab.local.33875 &gt; 192.168.0.254.syslog: SYSLOG authpriv.info, length: 103
00:57:15.369476 IP leaf01.lab.local.33875 &gt; 192.168.0.254.syslog: SYSLOG authpriv.info, length: 85
   
    
</code></pre>

<p>To see the contents of the <code>syslog</code> file, use the <code>tcpdump -X</code> option:</p>

<pre><code>                   
cumulus@leaf01:mgmt-vrf:~$ sudo tcpdump -i eth0 host 192.168.0.254 and udp port 514 -X -c 3
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes
00:59:15.980048 IP leaf01.lab.local.33875 &gt; 192.168.0.254.syslog: SYSLOG authpriv.notice, length: 105
0x0000: 4500 0085 33ee 4000 4011 8420 c0a8 000b E...3.@.@.......
0x0010: c0a8 00fe 8453 0202 0071 9d18 3c38 353e .....S...q..&lt;85&gt;
0x0020: 4465 6320 2039 2030 303a 3539 3a31 3520 Dec..9.00:59:15.
0x0030: 6c65 6166 3031 2073 7564 6f3a 2020 6375 leaf01.sudo:..cu
0x0040: 6d75 6c75 7320 3a20 5454 593d 7074 732f mulus.:.TTY=pts/
0x0050: 3120 3b20 5057 443d 2f68 6f6d 652f 6375 1.;.PWD=/home/cu
0x0060: 6d75 6c75 7320 3b20 5553 4552 3d72 6f6f mulus.;.USER=roo
0x0070: 7420 3b20 434f 4d4d 414e 443d 2f62 696e t.;.COMMAND=/bin
0x0080: 2f64 6174 65 /date
   
    
</code></pre>

<h2 id="next-steps">Next Steps</h2>

<p>The links below discuss more specific monitoring topics.</p>

<ul>
<li><p><a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Single_User_Mode_-_Boot_Recovery">Single User Mode - Boot
Recovery</a></p></li>

<li><p><a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Resource_Diagnostics_Using_cl-resource-query">Resource Diagnostics Using
cl-resource-query</a></p></li>

<li><p><a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Monitoring_System_Hardware/Monitoring_System_Hardware">Monitoring System
Hardware</a></p>

<ul>
<li><a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Monitoring_System_Hardware/Network_Switch_Port_LED_and_Status_LED_Guidelines">Network Switch Port LED and Status LED
Guidelines</a></li>
</ul></li>

<li><p><a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Monitoring_Virtual_Device_Counters">Monitoring Virtual Device
Counters</a></p></li>

<li><p><a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Buffer_Monitoring">Buffer
Monitoring</a></p></li>

<li><p><a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Understanding_the_cl-support_Output_File/Understanding_the_cl-support_Output_File">Understanding the cl-support Output
File</a></p>

<ul>
<li><p><a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Understanding_the_cl-support_Output_File/Troubleshooting_Log_Files">Troubleshooting Log
Files</a></p></li>

<li><p><a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Understanding_the_cl-support_Output_File/Troubleshooting_the_etc_Directory">Troubleshooting the etc
Directory</a></p></li>
</ul></li>

<li><p><a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Troubleshooting_Network_Interfaces/Troubleshooting_Network_Interfaces">Troubleshooting Network
Interfaces</a></p>

<ul>
<li><a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Troubleshooting_Network_Interfaces/Monitoring_Interfaces_and_Transceivers_Using_ethtool">Monitoring Interfaces and Transceivers Using
ethtool</a></li>
</ul></li>

<li><p><a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Network_Troubleshooting/Network_Troubleshooting">Network
Troubleshooting</a></p>

<ul>
<li><p><a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Network_Troubleshooting/Using_NCLU_to_Troubleshoot_Your_Network_Configuration">Using NCLU to Troubleshoot Your Network
Configuration</a></p></li>

<li><p><a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Network_Troubleshooting/Monitoring_System_Statistics_and_Network_Traffic_with_sFlow">Monitoring System Statistics and Network Traffic with
sFlow</a></p></li>
</ul></li>

<li><p><a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/SNMP_Monitoring/SNMP_Monitoring">SNMP
Monitoring</a></p>

<ul>
<li><a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/SNMP_Monitoring/Using_Nutanix_Prism_as_a_Monitoring_Tool">Using Nutanix Prism as a Monitoring
Tool</a></li>
</ul></li>

<li><p><a href="/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/Monitoring_Best_Practices">Monitoring Best
Practices</a></p></li>
</ul>

<article id="html-search-results" class="ht-content" style="display: none;">

</article>

<footer id="ht-footer">

</footer>
</article>



    </div>
    

      


  

    <aside class="book-toc fixed">

  

  <button> </button>

      <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#using-the-serial-console">Using the Serial Console</a>
<ul>
<li><a href="#configuring-the-serial-console-on-arm-switches">Configuring the Serial Console on ARM Switches</a></li>
<li><a href="#configuring-the-serial-console-on-x86-switches">Configuring the Serial Console on x86 Switches</a></li>
</ul></li>
<li><a href="#getting-general-system-information">Getting General System Information</a></li>
<li><a href="#diagnostics-using-cl-support">Diagnostics Using cl-support</a></li>
<li><a href="#sending-log-files-to-a-syslog-server">Sending Log Files to a syslog Server</a>
<ul>
<li><a href="#using-nclu">Using NCLU</a></li>
<li><a href="#logging-technical-details">Logging Technical Details</a></li>
<li><a href="#local-logging">Local Logging</a></li>
<li><a href="#enabling-remote-syslog">Enabling Remote syslog</a></li>
<li><a href="#writing-to-syslog-with-management-vrf-enabled">Writing to syslog with Management VRF Enabled</a></li>
<li><a href="#rate-limiting-syslog-messages">Rate-limiting syslog Messages</a></li>
<li><a href="#harmless-syslog-error-failed-to-reset-devices-list">Harmless syslog Error: Failed to reset devices.list</a></li>
<li><a href="#syslog-troubleshooting-tips">Syslog Troubleshooting Tips</a>
<ul>
<li><a href="#verifying-that-rsyslog-is-running">Verifying that rsyslog is Running</a></li>
<li><a href="#verifying-your-rsyslog-configuration">Verifying your rsyslog Configuration.</a></li>
<li><a href="#using-tcpdump">Using tcpdump</a></li>
</ul></li>
</ul></li>
<li><a href="#next-steps">Next Steps</a></li>
</ul></li>
</ul>
</nav>

      
      <button>
      <a href="https://github.com/cawleyflower/testDocs/edit/dev/content/version2/cumulus-linux-35/Monitoring_and_Troubleshooting/_index.md" target="_blank" rel="noopener">
        <img src="/svg/pencil-circle.svg" alt="Edit" /> Edit this page
      </a>
    </button>
    


    

</aside>





  </main>
  <footer class="footer-top">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="footer-content">
            <div class="mb-4">
                <img src="https://static.cumulusnetworks.com/static/images/shared/cumulus-networks-rt-white-trademarked.ff839f1b2570.svg">
                <p>© <script type="text/javascript">document.write(new Date().getFullYear());</script> Cumulus Networks.<br>
                Site by <a href="//unomena.com/" target="_blank">Unomena</a>.</p>
            </div>
            <ul class="mb-4">
              <li><h4>Products</h4></li>
              <li><a href="//cumulusnetworks.com/products/cumulus-linux/">Cumulus Linux</a></li>
              <li><a href="//cumulusnetworks.com/products/netq/">Cumulus NetQ</a></li>
              <li><a href="//cumulusnetworks.com/products/cumulus-express/">Cumulus Express</a></li>
            </ul>
            <ul class="mb-4">
              <li><h4>Learn</h4></li>
              <li><a href="//cumulusnetworks.com/learn/web-scale-networking-education/">Going web-scale</a></li>
              <li><a href="//cumulusnetworks.com/learn/events/">Events</a></li>
              <li><a href="//cumulusnetworks.com/blog/">Blog</a></li>
            </ul>
            <ul class="mb-4">
              <li><h4>About</h4></li>
              <li><a href="//cumulusnetworks.com/about/">Our story</a></li>
              <li><a href="//cumulusnetworks.com/about/careers/">Careers</a></li>
              <li><a href="//cumulusnetworks.com/about/media-coverage/">Media coverage</a></li>
              <li><a href="//docs.cumulusnetworks.com/" target="_blank">Tech docs</a></li>
              <li><a href="//cumulusnetworks.com/community/">Community</a></li>
            </ul>
            <ul>
              <li>
                <a href="//twitter.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M23 6.628l-2-.5 1-2-2.464.7A4.48 4.48 0 0 0 12 8.128v1c-3.539.73-6.634-1.2-9.5-4.5q-.75 4 1.5 6l-3-.5c.405 2.069 1.362 3.7 4 4l-2.5 1c1 2 2.566 2.31 5 2.5a10.748 10.748 0 0 1-6.5 2c12.755 5.669 20-2.664 20-10V8.3z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//www.facebook.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                      .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M17.768 7.5H13.5V5.6a.972.972 0 0 1 1.012-1.1c.418 0 2.988.01 2.988.01V.5h-4.329C9.244.5 8.5 3.474 8.5 5.355V7.5h-3v4h3v12h5v-12h3.851z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//linkedin.com/company/cumulus-networks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                      .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M6.5 22.5h-5v-13h5zm9-9a2 2 0 0 0-2 2v7h-5v-13h5v1.485a6.307 6.307 0 0 1 3.99-1.495c2.962 0 5.01 2.2 5.01 6.355V22.5h-5v-7a2 2 0 0 0-2-2zM6.5 5A2.5 2.5 0 1 1 4 2.5 2.5 2.5 0 0 1 6.5 5z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//vimeo.com/CumulusNetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                      <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                      </style>
                    </defs>
                    <path class="a" d="M.5 7.393l.933 1.224S3.36 7.1 4 7.859s3.1 9.925 3.915 11.617c.714 1.483 2.684 3.444 4.845 2.042s9.34-7.529 10.626-14.769-8.642-5.723-9.693.583c2.627-1.577 4.03.642 2.686 3.154s-2.569 4.145-3.211 4.145-1.135-1.679-1.868-4.613c-.76-3.035-.755-8.5-3.911-7.882C4.412 2.721.5 7.393.5 7.393z"></path>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//www.github.com/cumulusnetworks/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                        <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                        </style>
                    </defs>
                    <path class="a" d="M19.459 17c0-5.969-4.126-3.532-7.5-3.532s-7.5-2.375-7.5 3.532a3.5 3.5 0 0 0 3.5 3.5h8a3.5 3.5 0 0 0 3.5-3.5z"></path>
                    <path class="a" d="M21.489 10.214l.032.023s2.646-4.572-.6-7.237c-2 0-5.058 3.3-5.058 3.3l.022.016A14.152 14.152 0 0 0 8.1 6.3C8.083 6.285 5.037 3 3.042 3c-3.173 2.6-.729 7.012-.614 7.217a8.876 8.876 0 0 0-1.395 5.743c.241 3.126 2.847 6.54 5.982 6.54H16.9c3.135 0 5.742-3.414 5.982-6.54a8.857 8.857 0 0 0-1.393-5.746z"></path>
                    <ellipse class="a" cx="15.48" cy="17" rx="1" ry="1.5"></ellipse>
                    <ellipse class="a" cx="8.48" cy="17" rx="1" ry="1.5"></ellipse>
                  </svg>
                </a>
              </li>
              <li>
                <a href="//slack.cumulusnetworks.com/" target="_blank">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <defs>
                        <style>
                        .a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round}
                        </style>
                    </defs>
                    <rect class="a" x=".5" y=".5" width="23" height="23" rx="6" ry="6"></rect>
                    <circle class="a" cx="12" cy="12" r="6"></circle>
                    <circle class="a" cx="19" cy="5" r="1.5"></circle>
                  </svg>
                </a>
              </li>
              <li>
                <p>Cumulus Networks<sup>®</sup> — Data center networking software for the open, modern data center.</p>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <div class="footer-bottom">
      <div class="container">
          <div class="row">
              <div class="col-12">
                  <ul>
                      <li><a href="//cumulusnetworks.com/legal/trademarks/">Trademarks</a></li>
                      <li><a href="//cumulusnetworks.com/legal/privacy/">Privacy</a></li>
                      <li><a href="//cumulusnetworks.com/legal/">Terms of service</a></li>
                  </ul>
              </div>
          </div>
      </div>
  </div>

  
  

</body>

</html>
