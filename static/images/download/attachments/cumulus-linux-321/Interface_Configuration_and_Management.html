<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Interface Configuration and Management - Cumulus Linux 3.2.1</title>

    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>


<link rel="stylesheet" href="assets/css/content-style.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

    </head>

<body pageid="5126727">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">CL321</span>
                    <img class="space-logo" src="spacelogo.png" />
                </h1>
                <a href="Cumulus_Linux_User_Guide.html" class="ht-space-link">
                    <h2>Cumulus Linux 3.2.1</h2>
                </a>
            </header>

            <nav class="ht-pages-nav">
                <ul class="ht-pages-nav-top">
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="Quick_Start_Guide.html">Quick Start Guide</a>

            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Installation_Management.html">Installation Management</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Managing_Cumulus_Linux_Disk_Images.html">Managing Cumulus Linux Disk Images</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Installing_a_New_Cumulus_Linux_Image.html">Installing a New Cumulus Linux Image</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Upgrading_Cumulus_Linux.html">Upgrading Cumulus Linux</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Using_Snapshots.html">Using Snapshots</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Adding_and_Updating_Packages.html">Adding and Updating Packages</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Zero_Touch_Provisioning_-_ZTP.html">Zero Touch Provisioning - ZTP</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="System_Configuration.html">System Configuration</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Network_Command_Line_Utility.html">Network Command Line Utility</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Setting_Date_and_Time.html">Setting Date and Time</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Authentication,_Authorization,_and_Accounting.html">Authentication, Authorization, and Accounting</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="SSH_for_Remote_Access.html">SSH for Remote Access</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="User_Accounts.html">User Accounts</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Using_sudo_to_Delegate_Privileges.html">Using sudo to Delegate Privileges</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="LDAP_Authentication_and_Authorization.html">LDAP Authentication and Authorization</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="TACACS_Plus.html">TACACS Plus</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Netfilter_-_ACLs.html">Netfilter - ACLs</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Default_Cumulus_Linux_ACL_Configuration.html">Default Cumulus Linux ACL Configuration</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Managing_Application_Daemons.html">Managing Application Daemons</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Configuring_switchd.html">Configuring switchd</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Power_over_Ethernet_-_PoE.html">Power over Ethernet - PoE</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Configuring_a_Global_Proxy.html">Configuring a Global Proxy</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link current" href="Interface_Configuration_and_Management.html">Interface Configuration and Management</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Layer_1_and_Switch_Port_Attributes.html">Layer 1 and Switch Port Attributes</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Buffer_and_Queue_Management.html">Buffer and Queue Management</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Configuring_Hardware-enabled_DDOS_Protection.html">Configuring Hardware-enabled DDOS Protection</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Configuring_DHCP_Relays.html">Configuring DHCP Relays</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Configuring_DHCP_Servers.html">Configuring DHCP Servers</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Layer_One_and_Two.html">Layer One and Two</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Spanning_Tree_and_Rapid_Spanning_Tree.html">Spanning Tree and Rapid Spanning Tree</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Link_Layer_Discovery_Protocol.html">Link Layer Discovery Protocol</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Prescriptive_Topology_Manager_-_PTM.html">Prescriptive Topology Manager - PTM</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Bonding_-_Link_Aggregation.html">Bonding - Link Aggregation</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Ethernet_Bridging_-_VLANs.html">Ethernet Bridging - VLANs</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VLAN-aware_Bridge_Mode_for_Large-scale_Layer_2_Environments.html">VLAN-aware Bridge Mode for Large-scale Layer 2 Environments</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Traditional_Mode_Bridges.html">Traditional Mode Bridges</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VLAN_Tagging.html">VLAN Tagging</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Multi-Chassis_Link_Aggregation_-_MLAG.html">Multi-Chassis Link Aggregation - MLAG</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="LACP_Bypass.html">LACP Bypass</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Virtual_Router_Redundancy_-_VRR.html">Virtual Router Redundancy - VRR</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="ifplugd.html">ifplugd</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="IGMP_and_MLD_Snooping.html">IGMP and MLD Snooping</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Network_Virtualization.html">Network Virtualization</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Integrating_with_VMware_NSX.html">Integrating with VMware NSX</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Integrating_Hardware_VTEPs_with_Midokura_MidoNet_and_OpenStack.html">Integrating Hardware VTEPs with Midokura MidoNet and OpenStack</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Lightweight_Network_Virtualization_-_LNV_Overview.html">Lightweight Network Virtualization - LNV Overview</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="LNV_VXLAN_Active-Active_Mode.html">LNV VXLAN Active-Active Mode</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="LNV_Full_Example.html">LNV Full Example</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Static_MAC_Bindings_with_VXLAN.html">Static MAC Bindings with VXLAN</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Ethernet_Virtual_Private_Network_-_EVPN.html">Ethernet Virtual Private Network - EVPN</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VXLAN_Hyperloop.html">VXLAN Hyperloop</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Static_VXLAN_Tunnels.html">Static VXLAN Tunnels</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Layer_Three.html">Layer Three</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Routing.html">Routing</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Introduction_to_Routing_Protocols.html">Introduction to Routing Protocols</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Network_Topology.html">Network Topology</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Quagga_Overview.html">Quagga Overview</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Configuring_Quagga.html">Configuring Quagga</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Comparing_NCLU_and_vtysh_Commands.html">Comparing NCLU and vtysh Commands</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Open_Shortest_Path_First_-_OSPF_-_Protocol.html">Open Shortest Path First - OSPF - Protocol</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Open_Shortest_Path_First_v3_-_OSPFv3_-_Protocol.html">Open Shortest Path First v3 - OSPFv3 - Protocol</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Border_Gateway_Protocol_-_BGP.html">Border Gateway Protocol - BGP</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Bidirectional_Forwarding_Detection_-_BFD.html">Bidirectional Forwarding Detection - BFD</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Equal_Cost_Multipath_Load_Sharing_-_Hardware_ECMP.html">Equal Cost Multipath Load Sharing - Hardware ECMP</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Redistribute_Neighbor.html">Redistribute Neighbor</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Virtual_Routing_and_Forwarding_-_VRF.html">Virtual Routing and Forwarding - VRF</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Management_VRF.html">Management VRF</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Protocol_Independent_Multicast_-_PIM.html">Protocol Independent Multicast - PIM</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Monitoring_and_Troubleshooting.html">Monitoring and Troubleshooting</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Single_User_Mode_-_Boot_Recovery.html">Single User Mode - Boot Recovery</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Resource_Diagnostics_Using_cl-resource-query.html">Resource Diagnostics Using cl-resource-query</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Monitoring_System_Hardware.html">Monitoring System Hardware</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Network_Switch_Port_LED_and_Status_LED_Guidelines.html">Network Switch Port LED and Status LED Guidelines</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Monitoring_Virtual_Device_Counters.html">Monitoring Virtual Device Counters</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Understanding_the_cl-support_Output_File.html">Understanding the cl-support Output File</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Troubleshooting_Log_Files.html">Troubleshooting Log Files</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Troubleshooting_the_etc_Directory.html">Troubleshooting the etc Directory</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Troubleshooting_Network_Interfaces.html">Troubleshooting Network Interfaces</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Monitoring_Interfaces_and_Transceivers_Using_ethtool.html">Monitoring Interfaces and Transceivers Using ethtool</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Network_Troubleshooting.html">Network Troubleshooting</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Using_NCLU_to_Troubleshoot_Your_Network_Configuration.html">Using NCLU to Troubleshoot Your Network Configuration</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Monitoring_System_Statistics_and_Network_Traffic_with_sFlow.html">Monitoring System Statistics and Network Traffic with sFlow</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Using_netq_to_Troubleshoot_the_Network.html">Using netq to Troubleshoot the Network</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="SNMP_Monitoring.html">SNMP Monitoring</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Using_Nutanix_Prism_as_a_Monitoring_Tool.html">Using Nutanix Prism as a Monitoring Tool</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Monitoring_Best_Practices.html">Monitoring Best Practices</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Network_Solutions.html">Network Solutions</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Data_Center_Host_to_ToR_Architecture.html">Data Center Host to ToR Architecture</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Cumulus_Networks_Services_Demos.html">Cumulus Networks Services Demos</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Docker_on_Cumulus_Linux.html">Docker on Cumulus Linux</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="OpenStack_Neutron_ML2_and_Cumulus_Linux.html">OpenStack Neutron ML2 and Cumulus Linux</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Anycast_Design_Guide.html">Anycast Design Guide</a>

            </li>
                            </ul>
            </li>
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="Cumulus_Linux_Index.html">Cumulus Linux Index</a>

            </li>
                                    </ul>
            </nav>
        </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Cumulus_Linux_User_Guide.html">Cumulus Linux 3.2.1</a></li>
                                                            </ul>
</div>            <h1 id="src-5126993"> <span>Interface Configuration and Management</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

    <p  ><tt class=" ">ifupdown</tt><span id="src-5126993_indexterm-6E9475EB6BB1823F7D59E9BFDCC02B21"> </span><span id="src-5126993_indexterm-13DBA8F9B284C52273AAFBD0A9E478EA">is the </span>network interface manager for Cumulus Linux. Cumulus Linux 2.1 and later uses an updated version of this tool, <tt class=" ">ifupdown2</tt>.    </p>
    <p  >For more information on network interfaces, see <a   href="Layer_1_and_Switch_Port_Attributes.html">Layer 1 and Switch Port Attributes</a>.    </p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >By default, <tt class=" ">ifupdown</tt> is quiet; use the verbose option <tt class=" ">-v</tt> when you want to know what is going on when bringing an interface down or up.    </p>
        </div>
    </div>
    <div class="section section-1" id="src-5126993_InterfaceConfigurationandManagement-Contents">
        <h1 class="heading "><span>Contents</span></h1>
    <p  class="expand-control-text">This chapter covers ...    </p>
    </div>
    <div class="section section-1" id="src-5126993_InterfaceConfigurationandManagement-BasicCommands">
        <h1 class="heading "><span>Basic Commands</span></h1>
    <p  ><span id="src-5126993_indexterm-0807D80397F68E5A686E7BEDE477FCF0">To </span>bring up an interface or apply changes to an existing interface, run:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo ifup &lt;ifname&gt;</code></div>
</div>
    </div>
    <p  >    </p>
    <p  ><span id="src-5126993_indexterm-D713B0EB540B52B20076478264EEB032">To bring </span>down a single interface, run:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo ifdown &lt;ifname&gt;</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  ><tt class=" ">ifdown</tt> always deletes logical interfaces after bringing them down. Use the <tt class=" ">--admin-state</tt> option if you only want to administratively bring the interface up or down.    </p>
        </div>
    </div>
    <p  >To see the link and administrative state, use the <tt class=" ">ip link show</tt> command:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ ip link show dev swp1 </code></div>
<div class="line"><code class="plain">3: swp1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 500</code></div>
<div class="line"><code class="plain">    link/ether 44:38:39:00:03:c1 brd ff:ff:ff:ff:ff:ff</code></div>
</div>
    </div>
    <p  >In this example, swp1 is administratively UP and the physical link is UP (LOWER_UP flag). More information on interface administrative state and physical state can be found in <a  class="external-link" href="https://support.cumulusnetworks.com/hc/en-us/articles/202693826">this knowledge base article</a>.    </p>
    </div>
    <div class="section section-1" id="src-5126993_InterfaceConfigurationandManagement-classesifupdown2InterfaceClasses">
        <h1 class="heading "><span id="src-5126993_InterfaceConfigurationandManagement-classes" class="confluence-anchor-link"></span><span>ifupdown2 Interface Classes</span></h1>
    <p  ><tt class=" ">ifupdown2</tt> provides for the grouping of interfaces into separate classes, where a class is simply a user-defined label used to group interfaces that share a common function (like uplink, downlink or compute). You specify classes in <tt class=" ">/etc/network/interfaces</tt>.    </p>
    <p  >The most common class users are familiar with is <i class=" ">auto</i>, which you configure like this:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">auto swp1</code></div>
<div class="line"><code class="plain">iface swp1</code></div>
</div>
    </div>
    <p  >You can add other classes using the <i class=" ">allow</i> prefix. For example, if you have multiple interfaces used for uplinks, you can make up a class called <i class=" ">uplinks:</i>    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">auto swp1</code></div>
<div class="line"><code class="plain">allow-uplink swp1</code></div>
<div class="line"><code class="plain">iface swp1 inet static</code></div>
<div class="line"><code class="plain">    address 10.1.1.1/31</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">auto swp2</code></div>
<div class="line"><code class="plain">allow-uplink swp2</code></div>
<div class="line"><code class="plain">iface swp2 inet static</code></div>
<div class="line"><code class="plain">    address 10.1.1.3/31</code></div>
</div>
    </div>
    <p  >This allows you to perform operations on only these interfaces using the --allow-uplinks option, or still use the <tt class=" ">-a</tt> options since these interfaces are also in the auto class:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ sudo ifup --allow=uplinks </code></div>
<div class="line"><code class="plain">cumulus@switch:~$ sudo ifreload -a </code></div>
</div>
    </div>
    <p  >Another example where this feature is useful is if you're using <a   href="Management_VRF.html">Management VRF</a>, you can use the special interface class called <i class=" ">mgmt</i>, and put the management interface into that class:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">allow-mgmt eth0</code></div>
<div class="line"><code class="plain">iface eth0 inet dhcp</code></div>
<div class="line"><code class="plain">    vrf mgmt</code></div>
<div class="line"><code class="plain">  </code></div>
<div class="line"><code class="plain">allow-mgmt mgmt</code></div>
<div class="line"><code class="plain">iface mgmt</code></div>
<div class="line"><code class="plain">    address 127.0.0.1/8</code></div>
<div class="line"><code class="plain">    vrf-table auto</code></div>
</div>
    </div>
    <p  >All <tt class=" ">ifupdown2</tt> commands (<tt class=" ">ifup</tt>, <tt class=" ">ifdown</tt>, <tt class=" ">ifquery</tt>, <tt class=" ">ifreload</tt>) can take a class. Include the <tt class=" ">--allow=&lt;class&gt;</tt> option when you run the command. For example, to reload the configuration for the management interface described above, run:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ sudo ifreload --allow=mgmt </code></div>
</div>
    </div>
    <div class="section section-2" id="src-5126993_InterfaceConfigurationandManagement-BringingAllautoInterfacesUporDown">
        <h2 class="heading "><span>Bringing All auto Interfaces Up or Down</span></h2>
    <p  >You can easily bring up or down all interfaces marked with the common <tt class=" ">auto</tt> class in <tt class=" ">/etc/network/interfaces</tt>. Use the <tt class=" ">-a</tt> option. For further details, see individual man pages for <tt class=" ">ifup(8)</tt>, <tt class=" ">ifdown(8)</tt>, <tt class=" ">ifreload(8)</tt>.    </p>
    <p  >To administratively bring up all interfaces marked auto, run:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ sudo ifup -a</code></div>
</div>
    </div>
    <p  >To administratively bring down all interfaces marked auto, run:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ sudo ifdown -a</code></div>
</div>
    </div>
    <p  >To reload all network interfaces marked <tt class=" ">auto</tt>, use the <tt class=" ">ifreload</tt> command, which is equivalent to running <tt class=" ">ifdown</tt> then <tt class=" ">ifup</tt>, the one difference being that <tt class=" ">ifreload</tt> skips any configurations that didn't change):    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ sudo ifreload -a</code></div>
</div>
    </div>
    </div>
    </div>
    <div class="section section-1" id="src-5126993_InterfaceConfigurationandManagement-ConfiguringaLoopbackInterface">
        <h1 class="heading "><span>Configuring a Loopback Interface</span></h1>
    <p  >Cumulus Linux has a loopback preconfigured in <tt class=" ">/etc/network/interfaces</tt>. When the switch boots up, it has a loopback interface, called <i class=" ">lo</i>, which is up and assigned an IP address of 127.0.0.1.    </p>
    <div  class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >The loopback interface <i class=" ">lo</i> must always be specified in <tt class=" ">/etc/network/interfaces</tt> and must always be up.    </p>
        </div>
    </div>
    </div>
    <div class="section section-1" id="src-5126993_InterfaceConfigurationandManagement-ipifupdownBehaviorwithChildInterfaces">
        <h1 class="heading "><span id="src-5126993_InterfaceConfigurationandManagement-ip" class="confluence-anchor-link"></span><span>ifupdown Behavior with Child Interfaces</span></h1>
    <p  >By default, <tt class=" ">ifupdown</tt> recognizes and uses any interface present on the system &mdash; whether a VLAN, bond or physical interface &mdash; that is listed as a dependent of an interface. You are not required to list them in the <tt class=" ">interfaces</tt> file unless they need a specific configuration, for <a   href="Layer_1_and_Switch_Port_Attributes.html">MTU, link speed, and so forth</a>. And if you need to delete a child interface, you should delete all references to that interface from the <tt class=" ">interfaces</tt> file.    </p>
    <p  >For this example, swp1 and swp2 below do not need an entry in the <tt class=" ">interfaces</tt> file. The following stanzas defined in <tt class=" ">/etc/network/interfaces</tt> provide the exact same configuration:    </p>
    <div  class="tablewrap">
        <table class="confluenceTable">
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><strong class=" ">With Child Interfaces Defined</strong>    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">auto swp1</code></div>
<div class="line"><code class="plain">iface swp1</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">auto swp2</code></div>
<div class="line"><code class="plain">iface swp2</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">auto bridge</code></div>
<div class="line"><code class="plain">iface bridge</code></div>
<div class="line"><code class="plain">    bridge-vlan-aware yes</code></div>
<div class="line"><code class="plain">    bridge-ports swp1 swp2</code></div>
<div class="line"><code class="plain">    bridge-vids 1-100</code></div>
<div class="line"><code class="plain">    bridge-pvid 1</code></div>
<div class="line"><code class="plain">    bridge-stp on</code></div>
</div>
    </div>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><strong class=" ">Without Child Interfaces Defined</strong>    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">auto bridge</code></div>
<div class="line"><code class="plain">iface bridge</code></div>
<div class="line"><code class="plain">    bridge-vlan-aware yes</code></div>
<div class="line"><code class="plain">    bridge-ports swp1 swp2</code></div>
<div class="line"><code class="plain">    bridge-vids 1-100</code></div>
<div class="line"><code class="plain">    bridge-pvid 1</code></div>
<div class="line"><code class="plain">    bridge-stp on</code></div>
</div>
    </div>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <p  class="expand-control-text">Bridge in Traditional Mode - Example    </p>
    <p  >For this example, swp1.100 and swp2.100 below do not need an entry in the <tt class=" ">interfaces</tt> file. The following stanzas defined in <tt class=" ">/etc/network/interfaces</tt> provide the exact same configuration:    </p>
    <div  class="tablewrap">
        <table class="confluenceTable">
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><strong class=" ">With Child Interfaces Defined</strong>    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">auto swp1.100</code></div>
<div class="line"><code class="plain">iface swp1.100</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">auto swp2.100</code></div>
<div class="line"><code class="plain">iface swp2.100</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">auto br-100</code></div>
<div class="line"><code class="plain">iface br-100</code></div>
<div class="line"><code class="plain">    address 10.0.12.2/24</code></div>
<div class="line"><code class="plain">    address 2001:dad:beef::3/64</code></div>
<div class="line"><code class="plain">    bridge-ports swp1.100 swp2.100</code></div>
<div class="line"><code class="plain">    bridge-stp on</code></div>
</div>
    </div>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><strong class=" ">Without Child Interfaces Defined</strong>    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">auto br-100</code></div>
<div class="line"><code class="plain">iface br-100</code></div>
<div class="line"><code class="plain">    address 10.0.12.2/24</code></div>
<div class="line"><code class="plain">    address 2001:dad:beef::3/64</code></div>
<div class="line"><code class="plain">    bridge-ports swp1.100 swp2.100</code></div>
<div class="line"><code class="plain">    bridge-stp on</code></div>
</div>
    </div>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <p  >For more information on the bridge in traditional mode vs the bridge in VLAN-aware mode, please read <a  class="external-link" href="https://support.cumulusnetworks.com/hc/en-us/articles/204909397">this knowledge base article</a>.    </p>
    </div>
    <div class="section section-1" id="src-5126993_InterfaceConfigurationandManagement-ifupdown2InterfaceDependencies">
        <h1 class="heading "><span>ifupdown2 Interface Dependencies</span></h1>
    <p  ><tt class=" ">ifupdown2</tt><span id="src-5126993_indexterm-C5CF30FA2909464E9D7B0613E176BFA9"> understands </span>interface dependency relationships. When <tt class=" ">ifup</tt> and <tt class=" ">ifdown</tt> are run with all interfaces, they always run with all interfaces in dependency order. When run with the interface list on the command line, the default behavior is to not run with dependents. But if there are any built-in dependents, they will be brought up or down.    </p>
    <p  >To run with dependents when you specify the interface list, use the <tt class=" ">--with-depends</tt> option. <tt class=" ">--with-depends</tt> walks through all dependents in the dependency tree rooted at the interface you specify. Consider the following example configuration:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">auto bond1</code></div>
<div class="line"><code class="plain">iface bond1</code></div>
<div class="line"><code class="plain">    address 100.0.0.2/16</code></div>
<div class="line"><code class="plain">    bond-slaves swp29 swp30</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">auto bond2</code></div>
<div class="line"><code class="plain">iface bond2</code></div>
<div class="line"><code class="plain">    address 100.0.0.5/16</code></div>
<div class="line"><code class="plain">    bond-slaves swp31 swp32</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">auto br2001</code></div>
<div class="line"><code class="plain">iface br2001</code></div>
<div class="line"><code class="plain">    address 12.0.1.3/24</code></div>
<div class="line"><code class="plain">    bridge-ports bond1.2001 bond2.2001</code></div>
<div class="line"><code class="plain">    bridge-stp on</code></div>
</div>
    </div>
    <p  >Using <tt class=" ">ifup --with-depends br2001</tt> brings up all dependents of br2001: bond1.2001, bond2.2001, bond1, bond2, bond1.2001, bond2.2001, swp29, swp30, swp31, swp32.    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ sudo ifup --with-depends br2001</code></div>
</div>
    </div>
    <p  >Similarly, specifying <tt class=" ">ifdown --with-depends br2001</tt> brings down all dependents of br2001: bond1.2001, bond2.2001, bond1, bond2, bond1.2001, bond2.2001, swp29, swp30, swp31, swp32.    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ sudo ifdown --with-depends br2001</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-warning">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >As mentioned earlier, <tt class=" ">ifdown2</tt> always deletes logical interfaces after bringing them down. Use the <tt class=" ">--admin-state</tt> option if you only want to administratively bring the interface up or down. In terms of the above example, <tt class=" ">ifdown br2001</tt> deletes <tt class=" ">br2001</tt>.    </p>
        </div>
    </div>
    <p  >To guide you through which interfaces will be brought down and up, use the <tt class=" ">--print-dependency</tt> option to get the list of dependents.    </p>
    <p  ><span id="src-5126993_indexterm-1DB8BE53EF4D58EBF8E42B761A07D81C">Use </span><tt class=" ">ifquery --print-dependency=list -a</tt> to get the dependency list of all interfaces:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ sudo ifquery --print-dependency=list -a</code></div>
<div class="line"><code class="plain">lo : None</code></div>
<div class="line"><code class="plain">eth0 : None</code></div>
<div class="line"><code class="plain">bond0 : ['swp25', 'swp26']</code></div>
<div class="line"><code class="plain">bond1 : ['swp29', 'swp30']</code></div>
<div class="line"><code class="plain">bond2 : ['swp31', 'swp32']</code></div>
<div class="line"><code class="plain">br0 : ['bond1', 'bond2']</code></div>
<div class="line"><code class="plain">bond1.2000 : ['bond1']</code></div>
<div class="line"><code class="plain">bond2.2000 : ['bond2']</code></div>
<div class="line"><code class="plain">br2000 : ['bond1.2000', 'bond2.2000']</code></div>
<div class="line"><code class="plain">bond1.2001 : ['bond1']</code></div>
<div class="line"><code class="plain">bond2.2001 : ['bond2']</code></div>
<div class="line"><code class="plain">br2001 : ['bond1.2001', 'bond2.2001']</code></div>
<div class="line"><code class="plain">swp40 : None</code></div>
<div class="line"><code class="plain">swp25 : None</code></div>
<div class="line"><code class="plain">swp26 : None</code></div>
<div class="line"><code class="plain">swp29 : None</code></div>
<div class="line"><code class="plain">swp30 : None</code></div>
<div class="line"><code class="plain">swp31 : None</code></div>
<div class="line"><code class="plain">swp32 : None</code></div>
</div>
    </div>
    <p  >To print the dependency list of a single interface, use:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ sudo ifquery --print-dependency=list br2001</code></div>
<div class="line"><code class="plain">br2001 : ['bond1.2001', 'bond2.2001']</code></div>
<div class="line"><code class="plain">bond1.2001 : ['bond1']</code></div>
<div class="line"><code class="plain">bond2.2001 : ['bond2']</code></div>
<div class="line"><code class="plain">bond1 : ['swp29', 'swp30']</code></div>
<div class="line"><code class="plain">bond2 : ['swp31', 'swp32']</code></div>
<div class="line"><code class="plain">swp29 : None</code></div>
<div class="line"><code class="plain">swp30 : None</code></div>
<div class="line"><code class="plain">swp31 : None</code></div>
<div class="line"><code class="plain">swp32 : None</code></div>
</div>
    </div>
    <p  >To print the dependency information of an interface in <tt class=" ">dot</tt> format:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ sudo ifquery --print-dependency=dot br2001</code></div>
<div class="line"><code class="plain">/* Generated by GvGen v.0.9 (http://software.inl.fr/trac/wiki/GvGen) */</code></div>
<div class="line"><code class="plain">digraph G {</code></div>
<div class="line"><code class="plain">    compound=true;</code></div>
<div class="line"><code class="plain">    node1 [label="br2001"];</code></div>
<div class="line"><code class="plain">    node2 [label="bond1.2001"];</code></div>
<div class="line"><code class="plain">    node3 [label="bond2.2001"];</code></div>
<div class="line"><code class="plain">    node4 [label="bond1"];</code></div>
<div class="line"><code class="plain">    node5 [label="bond2"];</code></div>
<div class="line"><code class="plain">    node6 [label="swp29"];</code></div>
<div class="line"><code class="plain">    node7 [label="swp30"];</code></div>
<div class="line"><code class="plain">    node8 [label="swp31"];</code></div>
<div class="line"><code class="plain">    node9 [label="swp32"];</code></div>
<div class="line"><code class="plain">    node1-&gt;node2;</code></div>
<div class="line"><code class="plain">    node1-&gt;node3;</code></div>
<div class="line"><code class="plain">    node2-&gt;node4;</code></div>
<div class="line"><code class="plain">    node3-&gt;node5;</code></div>
<div class="line"><code class="plain">    node4-&gt;node6;</code></div>
<div class="line"><code class="plain">    node4-&gt;node7;</code></div>
<div class="line"><code class="plain">    node5-&gt;node8;</code></div>
<div class="line"><code class="plain">    node5-&gt;node9;</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <p  >You can use <tt class=" ">dot</tt> to render the graph on an external system where <tt class=" ">dot</tt> is installed.    </p>
    <p  >    <img  class="confluence-embedded-image" src="images/download/attachments/5126993/interfaces.png" alt="images/download/attachments/5126993/interfaces.png"   />
        </p>
    <p  >To print the dependency information of the entire <tt class=" ">interfaces</tt> file:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ sudo ifquery --print-dependency=dot -a &gt;interfaces_all.dot</code></div>
</div>
    </div>
    <p  >    <img  class="confluence-embedded-image" src="images/download/attachments/5126993/interfaces_all.png" alt="images/download/attachments/5126993/interfaces_all.png" width="500"  />
        </p>
    <div class="section section-2" id="src-5126993_safe-id-SW50ZXJmYWNlQ29uZmlndXJhdGlvbmFuZE1hbmFnZW1lbnQtaWZ1cEhhbmRsaW5nb2ZVcHBlcihQYXJlbnQpSW50ZXJmYWNlcw">
        <h2 class="heading "><span>ifup Handling of Upper (Parent) Interfaces</span></h2>
    <p  >When you run <tt class=" ">ifup</tt><span id="src-5126993_indexterm-8779BF5902EC2DF7292EB96C977892F4"> on a </span>logical interface (like a bridge, bond or VLAN interface), if the <tt class=" ">ifup</tt> resulted in the creation of the logical interface, by default it implicitly tries to execute on the interface's upper (or parent) interfaces as well. This helps in most cases, especially when a bond is brought down and up, as in the example below. This section describes the behavior of bringing up the upper interfaces.    </p>
    <p  >Consider this example configuration:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">auto br100</code></div>
<div class="line"><code class="plain">iface br100</code></div>
<div class="line"><code class="plain">    bridge-ports bond1.100 bond2.100</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">auto bond1</code></div>
<div class="line"><code class="plain">iface bond1</code></div>
<div class="line"><code class="plain">    bond-slaves swp1 swp2</code></div>
</div>
    </div>
    <p  >If you run <tt class=" ">ifdown bond1</tt>, <tt class=" ">ifdown</tt> deletes bond1 and the VLAN interface on bond1 (bond1.100); it also removes bond1 from the bridge br100. Next, when you run <tt class=" ">ifup bond1</tt>, it creates bond1 and the VLAN interface on bond1 (bond1.100); it also executes <tt class=" ">ifup br100</tt> to add the bond VLAN interface (bond1.100) to the bridge br100.    </p>
    <p  >As you can see above, implicitly bringing up the upper interface helps, but there can be cases where an upper interface (like br100) is not in the right state, which can result in warnings. The warnings are mostly harmless.    </p>
    <p  >If you want to disable these warnings, you can disable the implicit upper interface handling by setting <tt class=" ">skip_upperifaces=1</tt> in <tt class=" ">/etc/network/ifupdown2/ifupdown2.conf</tt>.    </p>
    <p  >With <tt class=" ">skip_upperifaces=1</tt>, you will have to explicitly execute <tt class=" ">ifup</tt> on the upper interfaces. In this case, you will have to run <tt class=" ">ifup br100</tt> after an <tt class=" ">ifup bond1</tt> to add bond1 back to bridge br100.    </p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >Although specifying a subinterface like swp1.100 and then running <tt class=" ">ifup swp1.100</tt> will also result in the automatic creation of the swp1 interface in the kernel, Cumulus Networks recommends you specify the parent interface swp1 as well. A parent interface is one where any physical layer configuration can reside, such as <tt class=" ">link-speed 1000</tt> or <tt class=" ">link-duplex full</tt>.    </p>
    <p  >It's important to note that if you only create swp1.100 and not swp1, then you cannot run <tt class=" ">ifup swp1</tt> since you did not specify it.    </p>
        </div>
    </div>
    </div>
    </div>
    <div class="section section-1" id="src-5126993_InterfaceConfigurationandManagement-ipConfiguringIPAddresses">
        <h1 class="heading "><span id="src-5126993_InterfaceConfigurationandManagement-ip" class="confluence-anchor-link"></span><span>Configuring IP Addresses</span></h1>
    <p  >IP addresses are configured with the <tt class=" ">net add interface</tt> command.    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Example IP Address Configuration</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >The following commands configure three IP addresses for swp1: two IPv4 addresses, and one IPv6 address.    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ net add interface swp1 ip address 12.0.0.1/30</code></div>
<div class="line"><code class="plain">cumulus@switch:~$ net add interface swp1 ip address 12.0.0.2/30</code></div>
<div class="line"><code class="plain">cumulus@switch:~$ net add interface swp1 ipv6 address 2001:DB8::1/126</code></div>
<div class="line"><code class="plain">cumulus@switch:~$ net pending</code></div>
<div class="line"><code class="plain">cumulus@switch:~$ net commit</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >You can specify both IPv4 and IPv6 addresses for the same interface.    </p>
        </div>
    </div>
    <p  >These commands create the following code snippet:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">auto swp1</code></div>
<div class="line"><code class="plain">iface swp1</code></div>
<div class="line"><code class="plain">    address 12.0.0.1/30</code></div>
<div class="line"><code class="plain">    address 12.0.0.2/30</code></div>
<div class="line"><code class="plain">    address 2001:DB8::1/126</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >The address method and address family are added by NCLU when needed, specifically when you are creating DHCP or loopback interfaces.    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">auto lo</code></div>
<div class="line"><code class="plain">iface lo inet loopback</code></div>
</div>
    </div>
        </div>
    </div>
        </div>
    </div>
    <p  >To show the assigned address on an interface, use <tt class=" ">ip addr show</tt>:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ ip addr show dev swp1</code></div>
<div class="line"><code class="plain">3: swp1: &lt;BROADCAST,MULTICAST,SLAVE,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 500</code></div>
<div class="line"><code class="plain">    link/ether 44:38:39:00:03:c1 brd ff:ff:ff:ff:ff:ff</code></div>
<div class="line"><code class="plain">    inet 192.0.2.1/30 scope global swp1</code></div>
<div class="line"><code class="plain">	inet 192.0.2.2/30 scope global swp1</code></div>
<div class="line"><code class="plain">    inet6 2001:DB8::1/126 scope global tentative</code></div>
<div class="line"><code class="plain">       valid_lft forever preferred_lft forever</code></div>
</div>
    </div>
    <div class="section section-2" id="src-5126993_InterfaceConfigurationandManagement-SpecifyingIPAddressScope">
        <h2 class="heading "><span>Specifying IP Address Scope </span></h2>
    <p  ><tt class=" ">ifupdown2</tt> does not honor the configured IP address scope setting in <tt class=" ">/etc/network/interfaces</tt>, treating all addresses as global. It does not report an error. Consider this example configuration:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">auto swp2</code></div>
<div class="line"><code class="plain">iface swp2</code></div>
<div class="line"><code class="plain">    address 35.21.30.5/30</code></div>
<div class="line"><code class="plain">    address 3101:21:20::31/80</code></div>
<div class="line"><code class="plain">    scope link</code></div>
</div>
    </div>
    <p  >When you run <tt class=" ">ifreload -a</tt> on this configuration, <tt class=" ">ifupdown2</tt> considers all IP addresses as global.    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ ip addr show swp2</code></div>
<div class="line"><code class="plain">5: swp2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</code></div>
<div class="line"><code class="plain">link/ether 74:e6:e2:f5:62:82 brd ff:ff:ff:ff:ff:ff</code></div>
<div class="line"><code class="plain">inet 35.21.30.5/30 scope global swp2</code></div>
<div class="line"><code class="plain">valid_lft forever preferred_lft forever</code></div>
<div class="line"><code class="plain">inet6 3101:21:20::31/80 scope global </code></div>
<div class="line"><code class="plain">valid_lft forever preferred_lft forever</code></div>
<div class="line"><code class="plain">inet6 fe80::76e6:e2ff:fef5:6282/64 scope link </code></div>
<div class="line"><code class="plain">valid_lft forever preferred_lft forever</code></div>
</div>
    </div>
    <p  >To work around this issue, configure the IP address scope:    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Example post-up Configuration</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ net add interface swp6 post-up ip address add 71.21.21.20/32 dev swp6 scope site</code></div>
<div class="line"><code class="plain">cumulus@switch:~$ net pending</code></div>
<div class="line"><code class="plain">cumulus@switch:~$ net commit</code></div>
</div>
    </div>
    <p  >These commands create the following code snippet in the <tt class=" ">/etc/network/interfaces</tt> file:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">auto swp6</code></div>
<div class="line"><code class="plain">iface swp6</code></div>
<div class="line"><code class="plain">    post-up ip address add 71.21.21.20/32 dev swp6 scope site</code></div>
</div>
    </div>
        </div>
    </div>
    <p  >Now it has the correct scope:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ ip addr show swp6</code></div>
<div class="line"><code class="plain">9: swp6: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</code></div>
<div class="line"><code class="plain">link/ether 74:e6:e2:f5:62:86 brd ff:ff:ff:ff:ff:ff</code></div>
<div class="line"><code class="plain">inet 71.21.21.20/32 scope site swp6</code></div>
<div class="line"><code class="plain">valid_lft forever preferred_lft forever</code></div>
<div class="line"><code class="plain">inet6 fe80::76e6:e2ff:fef5:6286/64 scope link </code></div>
<div class="line"><code class="plain">valid_lft forever preferred_lft forever</code></div>
</div>
    </div>
    </div>
    <div class="section section-2" id="src-5126993_InterfaceConfigurationandManagement-PurgingExistingIPAddressesonanInterface">
        <h2 class="heading "><span>Purging Existing IP Addresses on an Interface</span></h2>
    <p  ><span id="src-5126993_indexterm-F13B8648840B48595BC36974C198268E">By </span>default, <tt class=" ">ifupdown2</tt><span id="src-5126993_indexterm-C73875EF08EE6642403ECD6136814DAC"> </span>purges existing IP addresses on an interface. If you have other processes that manage IP addresses for an interface, you can disable this feature including the <tt class=" ">address-purge</tt> setting in the interface's configuration.    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ net add interface swp1 address-purge no</code></div>
<div class="line"><code class="plain">cumulus@switch:~$ net pending</code></div>
<div class="line"><code class="plain">cumulus@switch:~$ net commit</code></div>
</div>
    </div>
    <p  >These commands create the following configuration snippet in the <tt class=" ">/etc/network/interfaces</tt> file:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">auto swp1</code></div>
<div class="line"><code class="plain">iface swp1</code></div>
<div class="line"><code class="plain">    address-purge no</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >Purging existing addresses on interfaces with multiple <tt class=" ">iface</tt> stanzas is not supported. Doing so can result in the configuration of multiple addresses for an interface after you change an interface address and reload the configuration with <tt class=" ">ifreload -a</tt>. If this happens, you must shut down and restart the interface with <tt class=" ">ifup</tt> and <tt class=" ">ifdown</tt>, or manually delete superfluous addresses with <tt class=" ">ip address delete specify.ip.address.here/mask dev DEVICE</tt>. See also the <a   href="#src-5126993_InterfaceConfigurationandManagement-caveats">Caveats and Errata</a> section below for some cautions about using multiple <tt class=" ">iface</tt> stanzas for the same interface.    </p>
        </div>
    </div>
    </div>
    </div>
    <div class="section section-1" id="src-5126993_InterfaceConfigurationandManagement-SpecifyingUserCommands">
        <h1 class="heading "><span>Specifying User Commands</span></h1>
    <p  ><span id="src-5126993_indexterm-9D4705EE8BC6B13CCD289A0A943C9DE4">You can specify additional </span>user commands in the <tt class=" ">interfaces</tt> file. As shown in the example below, the interface stanzas in <tt class=" ">/etc/network/interfaces</tt> can have a command that runs at pre-up, up, post-up, pre-down, down, and post-down:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ net add interface swp1 post-up /sbin/foo bar</code></div>
<div class="line"><code class="plain">cumulus@switch:~$ net add interface ip address 12.0.0.1/30</code></div>
<div class="line"><code class="plain">cumulus@switch:~$ net pending</code></div>
<div class="line"><code class="plain">cumulus@switch:~$ net commit</code></div>
</div>
    </div>
    <p  >These commands create the following configuration in the <tt class=" ">/etc/network/interfaces</tt> file:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">auto swp1</code></div>
<div class="line"><code class="plain">iface swp1</code></div>
<div class="line"><code class="plain">    address 12.0.0.1/30</code></div>
<div class="line"><code class="plain">    post-up /sbin/foo bar</code></div>
</div>
    </div>
    <p  >Any valid command can be hooked in the sequencing of bringing an interface up or down, although commands should be limited in scope to network-related commands associated with the particular interface.    </p>
    <p  >For example, it wouldn't make sense to install some Debian package on <tt class=" ">ifup</tt> of swp1, even though that is technically possible. See <tt class=" ">man interfaces</tt> for more details.    </p>
    <div  class="confbox admonition admonition-warning">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >If your <tt class=" ">post-up</tt> command also starts, restarts or reloads any <tt class=" ">systemd</tt> service, you must use the <tt class=" ">--no-block</tt> option with <tt class=" ">systemctl</tt>. Otherwise, that service or even the switch itself may hang after starting or restarting.    </p>
    <p  >For example, to restart the <tt class=" ">dhcrelay</tt> service after bringing up VLAN 100, first run:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ net add vlan 100 post-up systemctl --no-block restart dhcrelay.service</code></div>
</div>
    </div>
    <p  >This command creates the following configuration in the <tt class=" ">/etc/network/interfaces</tt> file:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">auto bridge</code></div>
<div class="line"><code class="plain">iface bridge</code></div>
<div class="line"><code class="plain">    bridge-vids 100</code></div>
<div class="line"><code class="plain">    bridge-vlan-aware yes</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">auto vlan100</code></div>
<div class="line"><code class="plain">iface vlan100</code></div>
<div class="line"><code class="plain">    post-up systemctl --no-block restart dhcrelay.service</code></div>
<div class="line"><code class="plain">    vlan-id 100</code></div>
<div class="line"><code class="plain">    vlan-raw-device bridge</code></div>
</div>
    </div>
        </div>
    </div>
    </div>
    <div class="section section-1" id="src-5126993_InterfaceConfigurationandManagement-SourcingInterfaceFileSnippets">
        <h1 class="heading "><span>Sourcing Interface File Snippets</span></h1>
    <p  >Sourcing interface files helps organize and manage the <tt class=" ">interfaces</tt> file. For example:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ cat /etc/network/interfaces</code></div>
<div class="line"><code class="plain"># The loopback network interface</code></div>
<div class="line"><code class="plain">auto lo</code></div>
<div class="line"><code class="plain">iface lo inet loopback</code></div>
<div class="line"> </div>
<div class="line"><code class="plain"># The primary network interface</code></div>
<div class="line"><code class="plain">auto eth0</code></div>
<div class="line"><code class="plain">iface eth0 inet dhcp</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">source /etc/network/interfaces.d/bond0</code></div>
</div>
    </div>
    <p  >The contents of the sourced file used above are:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ cat /etc/network/interfaces.d/bond0</code></div>
<div class="line"><code class="plain">auto bond0</code></div>
<div class="line"><code class="plain">iface bond0</code></div>
<div class="line"><code class="plain">    address 14.0.0.9/30</code></div>
<div class="line"><code class="plain">    address 2001:ded:beef:2::1/64</code></div>
<div class="line"><code class="plain">    bond-slaves swp25 swp26</code></div>
</div>
    </div>
    </div>
    <div class="section section-1" id="src-5126993_InterfaceConfigurationandManagement-UsingGlobsforPortLists">
        <h1 class="heading "><span>Using Globs for Port Lists</span></h1>
    <p  ><span id="src-5126993_indexterm-7FDEB45E64A4A95EE1A42794964CD5B8">NCLU supports </span><span id="src-5126993_indexterm-C2E367BC8CCC487A01495584E9483A19">globs to define </span>port lists (that is, a range of ports). The <tt class=" ">glob</tt> keyword is implied when you specify bridge ports and bond slaves:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ net add bridge bridge ports swp1-4,6,10-12</code></div>
<div class="line"><code class="plain">cumulus@switch:~$ net pending</code></div>
<div class="line"><code class="plain">cumulus@switch:~$ net commit</code></div>
</div>
    </div>
    <p  >These commands produce the following snippet in the <tt class=" ">/etc/network/interfaces</tt> file:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">...</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">auto swp1</code></div>
<div class="line"><code class="plain">iface swp1</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">auto swp2</code></div>
<div class="line"><code class="plain">iface swp2</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">auto swp3</code></div>
<div class="line"><code class="plain">iface swp3</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">auto swp4</code></div>
<div class="line"><code class="plain">iface swp4</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">auto swp6</code></div>
<div class="line"><code class="plain">iface swp6</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">auto swp10</code></div>
<div class="line"><code class="plain">iface swp10</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">auto swp11</code></div>
<div class="line"><code class="plain">iface swp11</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">auto swp12</code></div>
<div class="line"><code class="plain">iface swp12</code></div>
</div>
    </div>
    </div>
    <div class="section section-1" id="src-5126993_InterfaceConfigurationandManagement-UsingTemplates">
        <h1 class="heading "><span>Using Templates</span></h1>
    <p  ><tt class=" ">ifupdown2</tt><span id="src-5126993_indexterm-EC829873B78BCB6153F8C399DC58997F"> </span><span id="src-5126993_indexterm-135976E02ABF9A01BEACA85ADDE44710">supports </span><a  class="external-link" href="http://www.makotemplates.org/">Mako-style templates</a>. The Mako template engine is run over the <tt class=" ">interfaces</tt> file before parsing.    </p>
    <p  >Use the template to declare cookie-cutter bridges in the <tt class=" ">interfaces</tt> file:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">%for v in [11,12]:</code></div>
<div class="line"><code class="plain">auto vlan${v}</code></div>
<div class="line"><code class="plain">iface vlan${v}</code></div>
<div class="line"><code class="plain">    address 10.20.${v}.3/24</code></div>
<div class="line"><code class="plain">    bridge-ports glob swp19-20.${v}</code></div>
<div class="line"><code class="plain">    bridge-stp on</code></div>
<div class="line"><code class="plain">%endfor</code></div>
</div>
    </div>
    <p  >And use it to declare addresses in the <tt class=" ">interfaces</tt> file:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">%for i in [1,12]:</code></div>
<div class="line"><code class="plain">auto swp${i}</code></div>
<div class="line"><code class="plain">iface swp${i}</code></div>
<div class="line"><code class="plain">    address 10.20.${i}.3/24</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >Regarding Mako syntax, use square brackets (<tt class=" ">[1,12]</tt>) to specify a list of individual numbers (in this case, 1 and 12). Use <tt class=" ">range(1,12)</tt> to specify a range of interfaces.    </p>
        </div>
    </div>
    <div  class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >You can test your template and confirm it evaluates correctly by running <tt class=" ">mako-render /etc/network/interfaces</tt>.    </p>
        </div>
    </div>
    <div  class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >For more examples of configuring Mako templates, read this <a  class="external-link" href="https://support.cumulusnetworks.com/hc/en-us/articles/202868023">knowledge base article</a>.    </p>
        </div>
    </div>
    <div class="section section-2" id="src-5126993_InterfaceConfigurationandManagement-CommentingoutMakoTemplates">
        <h2 class="heading "><span>Commenting out Mako Templates</span></h2>
    <p  >To comment out content in Mako templates, use double hash marks (##). For example:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">## % </code><code class="keyword">for</code><code class="plain"> i in range(</code><code class="value">1</code><code class="plain">, </code><code class="value">4</code><code class="plain">):</code></div>
<div class="line"><code class="plain">## auto swp${i}</code></div>
<div class="line"><code class="plain">## iface swp${i}</code></div>
<div class="line"><code class="plain">## % endfor</code></div>
<div class="line"><code class="plain">##</code></div>
</div>
    </div>
    </div>
    </div>
    <div class="section section-1" id="src-5126993_InterfaceConfigurationandManagement-AddingDescriptionstoInterfaces">
        <h1 class="heading "><span>Adding Descriptions to Interfaces</span></h1>
    <p  >You can add descriptions to the interfaces configured in <tt class=" ">/etc/network/interfaces</tt> by using the <i class=" ">alias</i> keyword.    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Example Alias Configuration</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >The following commands create an alias for swp1:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ net add interface swp1 alias hypervisor_port_1</code></div>
<div class="line"><code class="plain">cumulus@switch:~$ net pending</code></div>
<div class="line"><code class="plain">cumulus@switch:~$ net commit</code></div>
</div>
    </div>
    <p  >These commands create the following code snippet:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">auto swp1</code></div>
<div class="line"><code class="plain">iface swp1</code></div>
<div class="line"><code class="plain">    alias hypervisor_port_1</code></div>
</div>
    </div>
        </div>
    </div>
    <p  >You can query the interface description using NCLU. The alias appears in the <strong class=" ">Name</strong> column after the actual interface name:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch$ net show interface swp1</code></div>
<div class="line"><code class="plain">    Name                      MAC                Speed      MTU  Mode</code></div>
<div class="line"><code class="plain">--  ------------------------  -----------------  -------  -----  ---------</code></div>
<div class="line"><code class="plain">UP  swp1 (hypervisor_port_1)  44:38:39:00:00:04  1G        1500  Access/L2</code></div>
</div>
    </div>
    <p  >Interface descriptions also appear in the <a   href="Monitoring_System_Hardware.html#src-5126776_MonitoringSystemHardware-snmp">SNMP OID</a> <a  class="external-link" href="http://www.net-snmp.org/docs/mibs/ifMIBObjects.html#ifAlias">IF-MIB::ifAlias</a>.    </p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >Aliases are limited to 256 characters.    </p>
        </div>
    </div>
    </div>
    <div class="section section-1" id="src-5126993_InterfaceConfigurationandManagement-caveatsCaveatsandErrata">
        <h1 class="heading "><span id="src-5126993_InterfaceConfigurationandManagement-caveats" class="confluence-anchor-link"></span><span>Caveats and Errata</span></h1>
    <p  >While <tt class=" ">ifupdown2</tt> supports the inclusion of multiple <tt class=" ">iface</tt> stanzas for the same interface, Cumulus Networks recommends you use a single <tt class=" ">iface</tt> stanza for each interface, if possible.    </p>
    <p  >There are cases where you must specify more than one <tt class=" ">iface</tt> stanza for the same interface. For example, the configuration for a single interface can come from many places, like a template or a sourced file.    </p>
    <p  >If you do specify multiple <tt class=" ">iface</tt> stanzas for the same interface, make sure the stanzas do not specify the same interface attributes. Otherwise, unexpected behavior can result.    </p>
    <p  >For example, swp1 is configured in two places:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ cat /etc/network/interfaces</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">source /etc/interfaces.d/speed_settings</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">auto swp1</code></div>
<div class="line"><code class="plain">iface swp1</code></div>
<div class="line"><code class="plain">  address 10.0.14.2/24</code></div>
</div>
    </div>
    <p  >As well as <tt class=" ">/etc/interfaces.d/speed_settings</tt>    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ cat /etc/interfaces.d/speed_settings</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">auto swp1</code></div>
<div class="line"><code class="plain">iface swp1</code></div>
<div class="line"><code class="plain">  link-speed 1000</code></div>
<div class="line"><code class="plain">  link-duplex full</code></div>
</div>
    </div>
    <p  ><tt class=" ">ifupdown2</tt> correctly parses a configuration like this because the same attributes are not specified in multiple <tt class=" ">iface</tt> stanzas.    </p>
    <p  >And, as stated in the note above, you cannot purge existing addresses on interfaces with multiple <tt class=" ">iface</tt> stanzas.    </p>
    </div>
    <div class="section section-1" id="src-5126993_InterfaceConfigurationandManagement-RelatedInformation">
        <h1 class="heading "><span>Related Information</span></h1>
<ul class=" "><li class=" ">    <p  ><a  class="external-link" href="http://wiki.debian.org/NetworkConfiguration">Debian - Network Configuration</a>    </p>
</li><li class=" ">    <p  ><a  class="external-link" href="http://www.linuxfoundation.org/collaborate/workgroups/networking/bonding">Linux Foundation - Bonds</a>    </p>
</li><li class=" ">    <p  ><a  class="external-link" href="http://www.linuxfoundation.org/collaborate/workgroups/networking/bridge">Linux Foundation - Bridges</a>    </p>
</li><li class=" ">    <p  ><a  class="external-link" href="http://www.linuxfoundation.org/collaborate/workgroups/networking/vlan">Linux Foundation - VLANs</a>    </p>
</li><li class=" ">    <p  >man ifdown(8)    </p>
</li><li class=" ">    <p  >man ifquery(8)    </p>
</li><li class=" ">    <p  >man ifreload    </p>
</li><li class=" ">    <p  >man ifup(8)    </p>
</li><li class=" ">    <p  >man ifupdown-addons-interfaces(5)    </p>
</li><li class=" ">    <p  >man interfaces(5)    </p>
</li></ul>    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="Configuring_a_Global_Proxy.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Configuring a Global Proxy</span>
        </a>
                <a href="Layer_1_and_Switch_Port_Attributes.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Layer 1 and Switch Port Attributes</span>
        </a>
    </nav>    
            
            <article id="html-search-results" class="ht-content" style="display: none;">
            <header class="ht-content-header">
                <div id="ht-spacetitle">
                    <ul>
                        <li><a href="Cumulus_Linux_User_Guide.html">Cumulus Linux 3.2.1</a></li>
                    </ul>
                </div>
                <h1>Search results</h1>
            </header>
            <div id="search-results"></div>
        </article>
    
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>


</body>
</html>
