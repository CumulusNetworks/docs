<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Monitoring and Troubleshooting - Cumulus Linux 3.2.1</title>

    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>


<link rel="stylesheet" href="assets/css/content-style.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

    </head>

<body pageid="5126727">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">CL321</span>
                    <img class="space-logo" src="spacelogo.png" />
                </h1>
                <a href="Cumulus_Linux_User_Guide.html" class="ht-space-link">
                    <h2>Cumulus Linux 3.2.1</h2>
                </a>
            </header>

            <nav class="ht-pages-nav">
                <ul class="ht-pages-nav-top">
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="Quick_Start_Guide.html">Quick Start Guide</a>

            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Installation_Management.html">Installation Management</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Managing_Cumulus_Linux_Disk_Images.html">Managing Cumulus Linux Disk Images</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Installing_a_New_Cumulus_Linux_Image.html">Installing a New Cumulus Linux Image</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Upgrading_Cumulus_Linux.html">Upgrading Cumulus Linux</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Using_Snapshots.html">Using Snapshots</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Adding_and_Updating_Packages.html">Adding and Updating Packages</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Zero_Touch_Provisioning_-_ZTP.html">Zero Touch Provisioning - ZTP</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="System_Configuration.html">System Configuration</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Network_Command_Line_Utility.html">Network Command Line Utility</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Setting_Date_and_Time.html">Setting Date and Time</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Authentication,_Authorization,_and_Accounting.html">Authentication, Authorization, and Accounting</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="SSH_for_Remote_Access.html">SSH for Remote Access</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="User_Accounts.html">User Accounts</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Using_sudo_to_Delegate_Privileges.html">Using sudo to Delegate Privileges</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="LDAP_Authentication_and_Authorization.html">LDAP Authentication and Authorization</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="TACACS_Plus.html">TACACS Plus</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Netfilter_-_ACLs.html">Netfilter - ACLs</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Default_Cumulus_Linux_ACL_Configuration.html">Default Cumulus Linux ACL Configuration</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Managing_Application_Daemons.html">Managing Application Daemons</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Configuring_switchd.html">Configuring switchd</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Power_over_Ethernet_-_PoE.html">Power over Ethernet - PoE</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Configuring_a_Global_Proxy.html">Configuring a Global Proxy</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Interface_Configuration_and_Management.html">Interface Configuration and Management</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Layer_1_and_Switch_Port_Attributes.html">Layer 1 and Switch Port Attributes</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Buffer_and_Queue_Management.html">Buffer and Queue Management</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Configuring_Hardware-enabled_DDOS_Protection.html">Configuring Hardware-enabled DDOS Protection</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Configuring_DHCP_Relays.html">Configuring DHCP Relays</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Configuring_DHCP_Servers.html">Configuring DHCP Servers</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Layer_One_and_Two.html">Layer One and Two</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Spanning_Tree_and_Rapid_Spanning_Tree.html">Spanning Tree and Rapid Spanning Tree</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Link_Layer_Discovery_Protocol.html">Link Layer Discovery Protocol</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Prescriptive_Topology_Manager_-_PTM.html">Prescriptive Topology Manager - PTM</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Bonding_-_Link_Aggregation.html">Bonding - Link Aggregation</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Ethernet_Bridging_-_VLANs.html">Ethernet Bridging - VLANs</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VLAN-aware_Bridge_Mode_for_Large-scale_Layer_2_Environments.html">VLAN-aware Bridge Mode for Large-scale Layer 2 Environments</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Traditional_Mode_Bridges.html">Traditional Mode Bridges</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VLAN_Tagging.html">VLAN Tagging</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Multi-Chassis_Link_Aggregation_-_MLAG.html">Multi-Chassis Link Aggregation - MLAG</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="LACP_Bypass.html">LACP Bypass</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Virtual_Router_Redundancy_-_VRR.html">Virtual Router Redundancy - VRR</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="ifplugd.html">ifplugd</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="IGMP_and_MLD_Snooping.html">IGMP and MLD Snooping</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Network_Virtualization.html">Network Virtualization</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Integrating_with_VMware_NSX.html">Integrating with VMware NSX</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Integrating_Hardware_VTEPs_with_Midokura_MidoNet_and_OpenStack.html">Integrating Hardware VTEPs with Midokura MidoNet and OpenStack</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Lightweight_Network_Virtualization_-_LNV_Overview.html">Lightweight Network Virtualization - LNV Overview</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="LNV_VXLAN_Active-Active_Mode.html">LNV VXLAN Active-Active Mode</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="LNV_Full_Example.html">LNV Full Example</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Static_MAC_Bindings_with_VXLAN.html">Static MAC Bindings with VXLAN</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Ethernet_Virtual_Private_Network_-_EVPN.html">Ethernet Virtual Private Network - EVPN</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VXLAN_Hyperloop.html">VXLAN Hyperloop</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Static_VXLAN_Tunnels.html">Static VXLAN Tunnels</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Layer_Three.html">Layer Three</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Routing.html">Routing</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Introduction_to_Routing_Protocols.html">Introduction to Routing Protocols</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Network_Topology.html">Network Topology</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Quagga_Overview.html">Quagga Overview</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Configuring_Quagga.html">Configuring Quagga</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Comparing_NCLU_and_vtysh_Commands.html">Comparing NCLU and vtysh Commands</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Open_Shortest_Path_First_-_OSPF_-_Protocol.html">Open Shortest Path First - OSPF - Protocol</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Open_Shortest_Path_First_v3_-_OSPFv3_-_Protocol.html">Open Shortest Path First v3 - OSPFv3 - Protocol</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Border_Gateway_Protocol_-_BGP.html">Border Gateway Protocol - BGP</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Bidirectional_Forwarding_Detection_-_BFD.html">Bidirectional Forwarding Detection - BFD</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Equal_Cost_Multipath_Load_Sharing_-_Hardware_ECMP.html">Equal Cost Multipath Load Sharing - Hardware ECMP</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Redistribute_Neighbor.html">Redistribute Neighbor</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Virtual_Routing_and_Forwarding_-_VRF.html">Virtual Routing and Forwarding - VRF</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Management_VRF.html">Management VRF</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Protocol_Independent_Multicast_-_PIM.html">Protocol Independent Multicast - PIM</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link current" href="Monitoring_and_Troubleshooting.html">Monitoring and Troubleshooting</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Single_User_Mode_-_Boot_Recovery.html">Single User Mode - Boot Recovery</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Resource_Diagnostics_Using_cl-resource-query.html">Resource Diagnostics Using cl-resource-query</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Monitoring_System_Hardware.html">Monitoring System Hardware</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Network_Switch_Port_LED_and_Status_LED_Guidelines.html">Network Switch Port LED and Status LED Guidelines</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Monitoring_Virtual_Device_Counters.html">Monitoring Virtual Device Counters</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Understanding_the_cl-support_Output_File.html">Understanding the cl-support Output File</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Troubleshooting_Log_Files.html">Troubleshooting Log Files</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Troubleshooting_the_etc_Directory.html">Troubleshooting the etc Directory</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Troubleshooting_Network_Interfaces.html">Troubleshooting Network Interfaces</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Monitoring_Interfaces_and_Transceivers_Using_ethtool.html">Monitoring Interfaces and Transceivers Using ethtool</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Network_Troubleshooting.html">Network Troubleshooting</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Using_NCLU_to_Troubleshoot_Your_Network_Configuration.html">Using NCLU to Troubleshoot Your Network Configuration</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Monitoring_System_Statistics_and_Network_Traffic_with_sFlow.html">Monitoring System Statistics and Network Traffic with sFlow</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Using_netq_to_Troubleshoot_the_Network.html">Using netq to Troubleshoot the Network</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="SNMP_Monitoring.html">SNMP Monitoring</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Using_Nutanix_Prism_as_a_Monitoring_Tool.html">Using Nutanix Prism as a Monitoring Tool</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Monitoring_Best_Practices.html">Monitoring Best Practices</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Network_Solutions.html">Network Solutions</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Data_Center_Host_to_ToR_Architecture.html">Data Center Host to ToR Architecture</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Cumulus_Networks_Services_Demos.html">Cumulus Networks Services Demos</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Docker_on_Cumulus_Linux.html">Docker on Cumulus Linux</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="OpenStack_Neutron_ML2_and_Cumulus_Linux.html">OpenStack Neutron ML2 and Cumulus Linux</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Anycast_Design_Guide.html">Anycast Design Guide</a>

            </li>
                            </ul>
            </li>
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="Cumulus_Linux_Index.html">Cumulus Linux Index</a>

            </li>
                                    </ul>
            </nav>
        </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Cumulus_Linux_User_Guide.html">Cumulus Linux 3.2.1</a></li>
                                                            </ul>
</div>            <h1 id="src-5126774"> <span>Monitoring and Troubleshooting</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

    <p  ><span id="src-5126774_indexterm-920EF1A7D22DC3E55C9FF5B3EE6FFB45">This chapter introduces </span><span id="src-5126774_indexterm-0EC9AD46F6F9656C4EC2C54F08861D0F">monitoring </span><span id="src-5126774_indexterm-BDFB5BC653C451DB13E9AF0BD87BDFF3">and </span><span id="src-5126774_indexterm-8390482DC5E79E22E4880D6EB9DA37B3">troubleshooting </span>Cumulus Linux.    </p>
    <div class="section section-1" id="src-5126774_MonitoringandTroubleshooting-Contents">
        <h1 class="heading "><span>Contents</span></h1>
    <p  class="expand-control-text">This chapter covers ...    </p>
    </div>
    <div class="section section-1" id="src-5126774_MonitoringandTroubleshooting-UsingtheSerialConsole">
        <h1 class="heading "><span>Using the Serial Console</span></h1>
    <p  >The serial console can be a useful tool for debugging issues, especially when you find yourself rebooting the switch often or if you don&rsquo;t have a reliable network connection.    </p>
    <p  >The default serial console baud rate is 115200, which is the baud rate <a  class="external-link" href="http://opencomputeproject.github.io/onie/">ONIE</a> uses.    </p>
    <div class="section section-2" id="src-5126774_MonitoringandTroubleshooting-ConfiguringtheSerialConsoleonARMSwitches">
        <h2 class="heading "><span>Configuring the Serial Console on ARM Switches</span></h2>
    <p  ><span id="src-5126774_indexterm-6230D3D2B20B460A5C510B3287063EB1">On ARM switches, the </span>U-Boot environment variable <tt class=" ">baudrate</tt> identifies the baud rate of the serial console. To change the <tt class=" ">baudrate</tt> variable, use the <tt class=" ">fw_setenv</tt> command:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo fw_setenv baudrate </code><code class="value">9600</code></div>
<div class="line"><code class="plain">Updating environment variable: `baudrate'</code></div>
<div class="line"><code class="plain">Proceed with update [N/y]? y</code></div>
</div>
    </div>
    <p  >You must reboot the switch for the <tt class=" ">baudrate</tt> change to take effect.    </p>
    <p  >The valid values for <tt class=" ">baudrate</tt> are:    </p>
<ul class=" "><li class=" ">    <p  >300    </p>
</li><li class=" ">    <p  >600    </p>
</li><li class=" ">    <p  >1200    </p>
</li><li class=" ">    <p  >2400    </p>
</li><li class=" ">    <p  >4800    </p>
</li><li class=" ">    <p  >9600    </p>
</li><li class=" ">    <p  >19200    </p>
</li><li class=" ">    <p  >38400    </p>
</li><li class=" ">    <p  >115200    </p>
</li></ul>    </div>
    <div class="section section-2" id="src-5126774_MonitoringandTroubleshooting-ConfiguringtheSerialConsoleonx86Switches">
        <h2 class="heading "><span>Configuring the Serial Console on x86 Switches</span></h2>
    <p  >On x86 switches, you configure serial console baud rate by editing <tt class=" ">grub</tt>.    </p>
    <div  class="confbox admonition admonition-warning">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >Incorrect configuration settings in <tt class=" ">grub</tt> can cause the switch to be inaccessible via the console. Grub changes should be carefully reviewed before implementation.    </p>
        </div>
    </div>
    <p  >The valid values for the baud rate are:    </p>
<ul class=" "><li class=" ">    <p  >300    </p>
</li><li class=" ">    <p  >600    </p>
</li><li class=" ">    <p  >1200    </p>
</li><li class=" ">    <p  >2400    </p>
</li><li class=" ">    <p  >4800    </p>
</li><li class=" ">    <p  >9600    </p>
</li><li class=" ">    <p  >19200    </p>
</li><li class=" ">    <p  >38400    </p>
</li><li class=" ">    <p  >115200    </p>
</li></ul>    <p  >To change the serial console baud rate:    </p>
<ol class=" "><li class=" ">    <p  >Edit <tt class=" ">/etc/default/grub</tt>. The two relevant lines in <tt class=" ">/etc/default/grub</tt> are as follows; replace the <i class=" ">115200</i> value with a valid value specified above in the <tt class=" ">--speed</tt> variable in the first line and in the <tt class=" ">console</tt> variable in the second line:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">GRUB_SERIAL_COMMAND=</code><code class="string">"serial --port=0x2f8 --speed=115200 --word=8 --parity=no --stop=1"</code><code class="plain">              </code></div>
<div class="line"><code class="plain">GRUB_CMDLINE_LINUX=</code><code class="string">"console=ttyS1,115200n8 cl_platform=accton_as5712_54x"</code></div>
</div>
    </div>
</li><li class=" ">    <p  >After you save your changes to the grub configuration, type the following at the command prompt:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ update-grub</code></div>
</div>
    </div>
</li><li class=" ">    <p  >If you plan on accessing your switch's BIOS over the serial console, you need to update the baud rate in the switch BIOS. For more information, see <a  class="external-link" href="https://support.cumulusnetworks.com/hc/en-us/articles/203884473">this knowledge base article</a>.    </p>
</li><li class=" ">    <p  >Reboot the switch.    </p>
</li></ol>    </div>
    </div>
    <div class="section section-1" id="src-5126774_MonitoringandTroubleshooting-GettingGeneralSystemInformation">
        <h1 class="heading "><span>Getting General System Information</span></h1>
    <p  >Two commands are helpful for getting general information about the switch and the version of Cumulus Linux you are running. These are helpful with system diagnostics and if you need to submit a support request to Cumulus Networks.    </p>
    <p  >For information about the version of Cumulus Linux running on the switch, run <tt class=" ">net show version</tt>, which displays the contents of <tt class=" ">/etc/lsb-release</tt>:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ net show version</code></div>
<div class="line"><code class="plain">NCLU_VERSION=1.0</code></div>
<div class="line"><code class="plain">DISTRIB_ID="Cumulus Linux"</code></div>
<div class="line"><code class="plain">DISTRIB_RELEASE=3.2.1~1484951197.337c36a</code></div>
<div class="line"><code class="plain">DISTRIB_DESCRIPTION="Cumulus Linux 3.2.1~1484951197.337c36a"</code></div>
</div>
    </div>
    <p  >For general information about the switch, run <tt class=" ">net show system</tt>, which gathers information about the switch from a number of files in the system:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ net show system</code></div>
<div class="line"><code class="plain">Cumulus 3.2.1~1484951197.337c36a</code></div>
<div class="line"><code class="plain">Build: Cumulus Linux 3.2.1~1484951197.337c36a</code></div>
<div class="line"><code class="plain">Uptime: 34 days, 4:31:46</code></div>
</div>
    </div>
    </div>
    <div class="section section-1" id="src-5126774_MonitoringandTroubleshooting-DiagnosticsUsingcl-support">
        <h1 class="heading "><span>Diagnostics Using cl-support</span></h1>
    <p  ><span id="src-5126774_indexterm-ED4C0A253CB69915A9A1F445B7EBF6E8">You can use </span><tt class=" ">cl-support</tt> to generate a single export file that contains various details and the configuration from a switch. This is useful for remote debugging and troubleshooting. For more information about <tt class=" ">cl-support</tt>, read <a   href="Understanding_the_cl-support_Output_File.html">Understanding the cl-support Output File</a>.    </p>
    <p  >You should run <tt class=" ">cl-support</tt> before you submit a support request to Cumulus Networks as this file helps in the investigation of issues.    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ sudo cl-support -h</code></div>
<div class="line"><code class="plain">Usage: cl-support [-h] [-s] [-t] [-v] [reason]...</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">Args:</code></div>
<div class="line"><code class="plain">[reason]: Optional reason to give for invoking cl-support.</code></div>
<div class="line"><code class="plain">         Saved into tarball's cmdline.args file.</code></div>
<div class="line"><code class="plain">Options:</code></div>
<div class="line"><code class="plain">-h: Print this usage statement</code></div>
<div class="line"><code class="plain">-s: Security sensitive collection</code></div>
<div class="line"><code class="plain">-t: User filename tag</code></div>
<div class="line"><code class="plain">-v: Verbose</code></div>
<div class="line"><code class="plain">-e MODULES: Enable modules. Comma separated module list (run with -e help for module names)</code></div>
<div class="line"><code class="plain">-d MODULES: Disable modules. Comma separated module list (run with -d help for module names)</code></div>
</div>
    </div>
    </div>
    <div class="section section-1" id="src-5126774_MonitoringandTroubleshooting-syslog_serverSendingLogFilestoasyslogServer">
        <h1 class="heading "><span id="src-5126774_MonitoringandTroubleshooting-syslog_server" class="confluence-anchor-link"></span><span>Sending Log Files to a syslog Server</span></h1>
    <p  ><span id="src-5126774_indexterm-A40EF5A7292BCDA010695FD298E887E5">Logging </span>on Cumulus Linux is done with <a  class="external-link" href="http://www.rsyslog.com/">rsyslog</a>. <tt class=" ">rsyslog</tt> provides both local logging to the <tt class=" ">syslog</tt> file as well as the ability to export logs to an external <tt class=" ">syslog</tt> server. High precision timestamps are enabled for all <tt class=" ">rsyslog</tt> log files; here's an example:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">2015-08-14T18:21:43.337804+00:00 cumulus switchd[3629]: switchd.c:1409 switchd version 1.0-cl2.5+5</code></div>
</div>
    </div>
    <p  >There are applications in Cumulus Linux that write directly to a log file without going through <tt class=" ">rsyslog</tt>. These files are typically located in <tt class=" ">/var/log/</tt>.    </p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >All Cumulus Linux rules are stored in separate files in <tt class=" ">/etc/rsyslog.d/</tt>, which are called at the end of the <tt class=" ">GLOBAL DIRECTIVES</tt> section of <tt class=" ">/etc/rsyslog.conf</tt>. As a result, the <tt class=" ">RULES</tt> section at the end of <tt class=" ">rsyslog.conf</tt> is ignored because the messages have to be processed by the rules in <tt class=" ">/etc/rsyslog.d</tt> and then dropped by the last line in <tt class=" ">/etc/rsyslog.d/99-syslog.conf</tt>.    </p>
        </div>
    </div>
    <div class="section section-2" id="src-5126774_MonitoringandTroubleshooting-LocalLogging">
        <h2 class="heading "><span>Local Logging</span></h2>
    <p  ><span id="src-5126774_indexterm-2422E44AF678682CC3F76CC79F6070B9">Most </span>logs within Cumulus Linux are sent through <tt class=" ">rsyslog</tt>, which then writes them to files in the <tt class=" ">/var/log</tt> directory. There are default rules in the <tt class=" ">/etc/rsyslog.d/</tt> directory that define where the logs are written:    </p>
    <div  class="tablewrap">
        <table class="confluenceTable">
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Rule    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Purpose    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >10-rules.conf    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Sets defaults for log messages, include log format and log rate limits.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >15-crit.conf    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Logs crit, alert or emerg log messages to <tt class=" ">/var/log/crit.log</tt> to ensure they are not rotated away rapidly.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >20-clagd.conf    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Logs <tt class=" ">clagd</tt> messages to <tt class=" ">/var/log/clagd.log</tt> for <a   href="Multi-Chassis_Link_Aggregation_-_MLAG.html">MLAG</a>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >25-switchd.conf    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Logs <tt class=" ">switchd</tt> messages to <tt class=" ">/var/log/switchd.log</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >30-ptmd.conf    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Logs <tt class=" ">ptmd</tt> messages to <tt class=" ">/var/log/ptmd.log</tt> for <a   href="Prescriptive_Topology_Manager_-_PTM.html">Prescription Topology Manager</a>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >35-rdnbrd.conf    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Logs <tt class=" ">rdnbrd</tt> messages to <tt class=" ">/var/log/rdnbrd.log</tt> for <a   href="Redistribute_Neighbor.html">redistribute neighbor</a>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >40-netd.conf    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Logs <tt class=" ">netd</tt> messages to <tt class=" ">/var/log/netd.log</tt> for <a   href="Network_Command_Line_Utility.html">NCLU</a>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >99-syslog.conf    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >All remaining processes that use <tt class=" ">rsyslog</tt> are sent to <tt class=" ">/var/log/syslog</tt>.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <p  >Log files that are rotated are compressed into an archive. Processes that do not use <tt class=" ">rsyslog</tt> write to their own log files within the <tt class=" ">/var/log</tt> directory. For more information on specific log files, see <a   href="Troubleshooting_Log_Files.html">Troubleshooting Log Files</a>.    </p>
    </div>
    <div class="section section-2" id="src-5126774_MonitoringandTroubleshooting-EnablingRemotesyslog">
        <h2 class="heading "><span>Enabling Remote syslog</span></h2>
    <p  >If you need to send other log files &mdash; such as <tt class=" ">switchd</tt> logs &mdash; to a <tt class=" ">syslog</tt> server, do the following:    </p>
<ol class=" "><li class=" ">    <p  >Create a file in <tt class=" ">/etc/rsyslog.d/</tt>. Make sure it starts with a number lower than 99 so that it executes before log messages are dropped in, such as <tt class=" ">20-clagd.conf</tt> or <tt class=" ">25-switchd.conf</tt>. Our example file is called <tt class=" ">/etc/rsyslog.d/11-remotesyslog.conf</tt>. Add content similar to the following:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">## Logging switchd messages to remote syslog server</code></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><code class="plain">if $programname == 'switchd' then @192.168.1.2:514</code></div>
</div>
    </div>
    <p  >This configuration sends log messages to a remote <tt class=" ">syslog</tt> server for the following processes: <tt class=" ">clagd</tt>, <tt class=" ">switchd</tt>, <tt class=" ">ptmd</tt>, <tt class=" ">rdnbrd</tt>, <tt class=" ">netd</tt> and <tt class=" ">syslog</tt>. The <tt class=" ">if $programname</tt> line sends the log files to the <tt class=" ">syslog</tt> server. It follows the same syntax as the <tt class=" ">/var/log/syslog</tt> file, where <i class=" ">@</i> indicates UDP, <i class=" ">192.168.1.2</i> is the IP address of the <tt class=" ">syslog</tt> server, and <i class=" ">514</i> is the UDP port.    </p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >For TCP-based syslog, use two @@ before the IP address: <i class=" ">@@192.168.1.2:514</i>.    </p>
    <p  >Running <tt class=" ">syslog</tt> over TCP places a burden on the switch to queue packets in the <tt class=" ">syslog</tt> buffer. This may cause detrimental effects if the remote <tt class=" ">syslog</tt> server becomes unavailable.    </p>
        </div>
    </div>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >The numbering of the files in <tt class=" ">/etc/rsyslog.d/</tt> dictates how the rules are installed into <tt class=" ">rsyslog.d</tt>. If you want to remotely log only the messages in <tt class=" ">/var/syslog</tt>, and not those in <tt class=" ">/var/log/clagd.log</tt> or <tt class=" ">/var/log/switchd.log</tt>, for instance, then name the file <tt class=" ">98-remotesyslog.conf</tt>, since it's lower than the <tt class=" ">/var/syslog</tt> file <tt class=" ">99-syslog.conf</tt> only.    </p>
        </div>
    </div>
</li><li class=" ">    <p  >Restart <tt class=" ">rsyslog</tt>.    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo systemctl restart rsyslog.service</code></div>
</div>
    </div>
</li></ol>    </div>
    <div class="section section-2" id="src-5126774_MonitoringandTroubleshooting-WritingtosyslogwithManagementVRFEnabled">
        <h2 class="heading "><span>Writing to syslog with Management VRF Enabled</span></h2>
    <p  >You can write to syslog with <a   href="Management_VRF.html">management VRF</a> enabled by applying the following configuration; this configuration is commented out in the <tt class=" ">/etc/rsyslog.d/99-syslog.conf</tt> file:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">## Copy all messages to the remote syslog server at 192.168.1.2 port 514</code></div>
<div class="line"><code class="plain">action(type="omfwd" Target="192.168.1.2" Device="mgmt" Port="514" Protocol="udp")</code></div>
</div>
    </div>
    </div>
    <div class="section section-2" id="src-5126774_MonitoringandTroubleshooting-AdvancedLogging">
        <h2 class="heading "><span>Advanced Logging</span></h2>
    <p  >Some applications bypass <tt class=" ">rsyslog</tt> and log to a file directly. For example, Quagga logs to <tt class=" ">syslog</tt> via the <tt class=" ">log syslog</tt> command, but can also log to a file directly. This section demonstrates how you can configure Cumulus Linux to read in from a flat log file and pass it through the <tt class=" ">rsyslog</tt> filter engine by using the <tt class=" ">imfile</tt> module.    </p>
    <div  class="confbox admonition admonition-warning">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >Never use the <tt class=" ">imfile</tt> module to read files that are written by <tt class=" ">rsyslog</tt>, as it can cause loops when reading and writing to the same log file.    </p>
        </div>
    </div>
    <p  class="expand-control-text">Configuring advanced logging ...    </p>
    <p  >Create a file and add content similar to the following:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">module(load="imfile")</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">input(type="imfile"</code></div>
<div class="line"><code class="plain">      stateFile="quagga-state"</code></div>
<div class="line"><code class="plain">      File="/var/log/quagga/Quagga.log"</code></div>
<div class="line"><code class="plain">      Severity="Warning"</code></div>
<div class="line"><code class="plain">      Tag="quagga-log:"</code></div>
<div class="line"><code class="plain">      Facility="local7")</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">if $syslogtag contains "quagga-log" then action(type="omfwd" Target="192.168.1.2" Port="514" Protocol="udp")</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >You can find more information in the <a  class="external-link" href="http://www.rsyslog.com/doc/v8-stable/configuration/modules/imfile.html">rsyslog documentation</a>.    </p>
        </div>
    </div>
    <p  >Then restart <tt class=" ">syslog</tt>:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus@switch:~$ sudo systemctl restart rsyslog.service</code></div>
</div>
    </div>
    <p  >In the above configuration, each setting is defined as follows:    </p>
    <div  class="tablewrap">
        <table class="confluenceTable">
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Setting    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Description    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >load    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Loads the <tt class=" ">rsyslog</tt> module to watch file contents.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >File    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >The file to be sent through the <tt class=" ">rsyslog</tt> rules engine. In the above example, any changes made are sent to <tt class=" ">/var/log/switchd.log</tt> to the <tt class=" ">syslog</tt> server.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >stateFile    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">rsyslog</tt> uses this to track the state of the file being monitored. This must be unique for each file being monitored.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tag    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Defines the <tt class=" ">syslog</tt> tag that precedes the <tt class=" ">syslog</tt> messages. In this example, all logs are prefaced with <i class=" ">quagga-log</i>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Severity    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Defines the logging severity level sent to the <tt class=" ">syslog</tt> server.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Facility    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Defines the logging format. <i class=" ">local7</i> is common.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-2" id="src-5126774_MonitoringandTroubleshooting-Rate-limitingsyslogMessages">
        <h2 class="heading "><span>Rate-limiting syslog Messages</span></h2>
    <p  >If you want to limit the number of <tt class=" ">syslog</tt> messages that can be written to the <tt class=" ">syslog</tt> file from individual processes, add the following configuration to <tt class=" ">/etc/rsyslog.conf</tt>. Adjust the interval and burst values to rate-limit messages to the appropriate levels required by your environment. For more information, read the <a  class="external-link" href="http://www.rsyslog.com/doc/v8-stable/configuration/modules/imuxsock.html">rsyslog documentation</a>.    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">module(load="imuxsock"</code></div>
<div class="line"><code class="plain">      SysSock.RateLimit.Interval="2" SysSock.RateLimit.Burst="50")</code></div>
</div>
    </div>
    <p  class="expand-control-text">The following test script shows an example of rate-limit output in Cumulus Linux ...    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">root@leaf1:mgmt-vrf:/home/cumulus# cat ./syslog.py </code></div>
<div class="line"><code class="plain">#!/usr/bin/python</code></div>
<div class="line"><code class="plain">import syslog</code></div>
<div class="line"><code class="plain">message_count=100</code></div>
<div class="line"><code class="plain">print "Sending %s Messages..."%(message_count)</code></div>
<div class="line"><code class="plain">for i in range(0,message_count):</code></div>
<div class="line"><code class="plain">syslog.syslog("Message Number:%s"%(i))</code></div>
<div class="line"><code class="plain">print "DONE."</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">root@leaf1:mgmt-vrf:/home/cumulus# ./syslog.py </code></div>
<div class="line"><code class="plain">Sending 100 Messages...</code></div>
<div class="line"><code class="plain">DONE.</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">root@leaf1:mgmt-vrf:/home/cumulus# tail -n 60 /var/log/syslog</code></div>
<div class="line"><code class="plain">2017-02-22T19:59:50.043342+00:00 leaf1 syslog.py[22830]: Message Number:0</code></div>
<div class="line"><code class="plain">2017-02-22T19:59:50.043723+00:00 leaf1 syslog.py[22830]: Message Number:1</code></div>
<div class="line"><code class="plain">2017-02-22T19:59:50.043941+00:00 leaf1 syslog.py[22830]: Message Number:2</code></div>
<div class="line"><code class="plain">2017-02-22T19:59:50.044565+00:00 leaf1 syslog.py[22830]: Message Number:3</code></div>
<div class="line"><code class="plain">2017-02-22T19:59:50.044830+00:00 leaf1 syslog.py[22830]: Message Number:4</code></div>
<div class="line"><code class="plain">2017-02-22T19:59:50.045680+00:00 leaf1 syslog.py[22830]: Message Number:5</code></div>
<div class="line"><code class="plain">&lt;...snip...&gt;</code></div>
<div class="line"><code class="plain">2017-02-22T19:59:50.056727+00:00 leaf1 syslog.py[22830]: Message Number:45</code></div>
<div class="line"><code class="plain">2017-02-22T19:59:50.057599+00:00 leaf1 syslog.py[22830]: Message Number:46</code></div>
<div class="line"><code class="plain">2017-02-22T19:59:50.057741+00:00 leaf1 syslog.py[22830]: Message Number:47</code></div>
<div class="line"><code class="plain">2017-02-22T19:59:50.057936+00:00 leaf1 syslog.py[22830]: Message Number:48</code></div>
<div class="line"><code class="plain">2017-02-22T19:59:50.058125+00:00 leaf1 syslog.py[22830]: Message Number:49</code></div>
<div class="line"><code class="plain">2017-02-22T19:59:50.058324+00:00 leaf1 rsyslogd-2177: imuxsock[pid 22830]: begin to drop messages due to rate-limiting</code></div>
</div>
    </div>
    </div>
    <div class="section section-2" id="src-5126774_safe-id-TW9uaXRvcmluZ2FuZFRyb3VibGVzaG9vdGluZy1IYXJtbGVzc3N5c2xvZ0Vycm9yOkZhaWxlZHRvcmVzZXRkZXZpY2VzLmxpc3Q">
        <h2 class="heading "><span>Harmless syslog Error: Failed to reset devices.list</span></h2>
    <p  >The following message gets logged to <tt class=" ">/var/log/syslog</tt> when you run <tt class=" ">systemctl daemon-reload</tt> and during system boot:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">systemd[1]: Failed to reset devices.list on /system.slice: Invalid argument</code></div>
</div>
    </div>
    <p  >This message is harmless, and can be ignored. It is logged when <tt class=" ">systemd</tt> attempts to change cgroup attributes that are read only. The upstream version of systemd has been modified to not log this message by default.    </p>
    <p  >The <tt class=" ">systemctl daemon-reload</tt> command is often issued when Debian packages are installed, so the message may be seen multiple times when upgrading packages.    </p>
    </div>
    </div>
    <div class="section section-1" id="src-5126774_MonitoringandTroubleshooting-NextSteps">
        <h1 class="heading "><span>Next Steps</span></h1>
    <p  >The links below discuss more specific monitoring topics.    </p>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="Single_User_Mode_-_Boot_Recovery.html">Single User Mode - Boot Recovery</a>    </p>
</li><li class=" ">    <p  ><a   href="Resource_Diagnostics_Using_cl-resource-query.html">Resource Diagnostics Using cl-resource-query</a>    </p>
</li><li class=" ">    <p  ><a   href="Monitoring_System_Hardware.html">Monitoring System Hardware</a>    </p>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="Network_Switch_Port_LED_and_Status_LED_Guidelines.html">Network Switch Port LED and Status LED Guidelines</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="Monitoring_Virtual_Device_Counters.html">Monitoring Virtual Device Counters</a>    </p>
</li><li class=" ">    <p  ><a   href="Understanding_the_cl-support_Output_File.html">Understanding the cl-support Output File</a>    </p>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="Troubleshooting_Log_Files.html">Troubleshooting Log Files</a>    </p>
</li><li class=" ">    <p  ><a   href="Troubleshooting_the_etc_Directory.html">Troubleshooting the etc Directory</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="Troubleshooting_Network_Interfaces.html">Troubleshooting Network Interfaces</a>    </p>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="Monitoring_Interfaces_and_Transceivers_Using_ethtool.html">Monitoring Interfaces and Transceivers Using ethtool</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="Network_Troubleshooting.html">Network Troubleshooting</a>    </p>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="Using_NCLU_to_Troubleshoot_Your_Network_Configuration.html">Using NCLU to Troubleshoot Your Network Configuration</a>    </p>
</li><li class=" ">    <p  ><a   href="Monitoring_System_Statistics_and_Network_Traffic_with_sFlow.html">Monitoring System Statistics and Network Traffic with sFlow</a>    </p>
</li><li class=" ">    <p  ><a   href="Using_netq_to_Troubleshoot_the_Network.html">Using netq to Troubleshoot the Network</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="SNMP_Monitoring.html">SNMP Monitoring</a>    </p>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="Using_Nutanix_Prism_as_a_Monitoring_Tool.html">Using Nutanix Prism as a Monitoring Tool</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="Monitoring_Best_Practices.html">Monitoring Best Practices</a>    </p>
</li></ul>    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="Protocol_Independent_Multicast_-_PIM.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Protocol Independent Multicast - PIM</span>
        </a>
                <a href="Single_User_Mode_-_Boot_Recovery.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Single User Mode - Boot Recovery</span>
        </a>
    </nav>    
            
            <article id="html-search-results" class="ht-content" style="display: none;">
            <header class="ht-content-header">
                <div id="ht-spacetitle">
                    <ul>
                        <li><a href="Cumulus_Linux_User_Guide.html">Cumulus Linux 3.2.1</a></li>
                    </ul>
                </div>
                <h1>Search results</h1>
            </header>
            <div id="search-results"></div>
        </article>
    
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>


</body>
</html>
