<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Network Troubleshooting - Cumulus Linux 3.2.1</title>

    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>


<link rel="stylesheet" href="assets/css/content-style.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

    </head>

<body pageid="5126727">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">CL321</span>
                    <img class="space-logo" src="spacelogo.png" />
                </h1>
                <a href="Cumulus_Linux_User_Guide.html" class="ht-space-link">
                    <h2>Cumulus Linux 3.2.1</h2>
                </a>
            </header>

            <nav class="ht-pages-nav">
                <ul class="ht-pages-nav-top">
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="Quick_Start_Guide.html">Quick Start Guide</a>

            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Installation_Management.html">Installation Management</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Managing_Cumulus_Linux_Disk_Images.html">Managing Cumulus Linux Disk Images</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Installing_a_New_Cumulus_Linux_Image.html">Installing a New Cumulus Linux Image</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Upgrading_Cumulus_Linux.html">Upgrading Cumulus Linux</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Using_Snapshots.html">Using Snapshots</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Adding_and_Updating_Packages.html">Adding and Updating Packages</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Zero_Touch_Provisioning_-_ZTP.html">Zero Touch Provisioning - ZTP</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="System_Configuration.html">System Configuration</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Network_Command_Line_Utility.html">Network Command Line Utility</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Setting_Date_and_Time.html">Setting Date and Time</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Authentication,_Authorization,_and_Accounting.html">Authentication, Authorization, and Accounting</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="SSH_for_Remote_Access.html">SSH for Remote Access</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="User_Accounts.html">User Accounts</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Using_sudo_to_Delegate_Privileges.html">Using sudo to Delegate Privileges</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="LDAP_Authentication_and_Authorization.html">LDAP Authentication and Authorization</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="TACACS_Plus.html">TACACS Plus</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Netfilter_-_ACLs.html">Netfilter - ACLs</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Default_Cumulus_Linux_ACL_Configuration.html">Default Cumulus Linux ACL Configuration</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Managing_Application_Daemons.html">Managing Application Daemons</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Configuring_switchd.html">Configuring switchd</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Power_over_Ethernet_-_PoE.html">Power over Ethernet - PoE</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Configuring_a_Global_Proxy.html">Configuring a Global Proxy</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Interface_Configuration_and_Management.html">Interface Configuration and Management</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Layer_1_and_Switch_Port_Attributes.html">Layer 1 and Switch Port Attributes</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Buffer_and_Queue_Management.html">Buffer and Queue Management</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Configuring_Hardware-enabled_DDOS_Protection.html">Configuring Hardware-enabled DDOS Protection</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Configuring_DHCP_Relays.html">Configuring DHCP Relays</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Configuring_DHCP_Servers.html">Configuring DHCP Servers</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Layer_One_and_Two.html">Layer One and Two</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Spanning_Tree_and_Rapid_Spanning_Tree.html">Spanning Tree and Rapid Spanning Tree</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Link_Layer_Discovery_Protocol.html">Link Layer Discovery Protocol</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Prescriptive_Topology_Manager_-_PTM.html">Prescriptive Topology Manager - PTM</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Bonding_-_Link_Aggregation.html">Bonding - Link Aggregation</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Ethernet_Bridging_-_VLANs.html">Ethernet Bridging - VLANs</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VLAN-aware_Bridge_Mode_for_Large-scale_Layer_2_Environments.html">VLAN-aware Bridge Mode for Large-scale Layer 2 Environments</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Traditional_Mode_Bridges.html">Traditional Mode Bridges</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VLAN_Tagging.html">VLAN Tagging</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Multi-Chassis_Link_Aggregation_-_MLAG.html">Multi-Chassis Link Aggregation - MLAG</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="LACP_Bypass.html">LACP Bypass</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Virtual_Router_Redundancy_-_VRR.html">Virtual Router Redundancy - VRR</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="ifplugd.html">ifplugd</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="IGMP_and_MLD_Snooping.html">IGMP and MLD Snooping</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Network_Virtualization.html">Network Virtualization</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Integrating_with_VMware_NSX.html">Integrating with VMware NSX</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Integrating_Hardware_VTEPs_with_Midokura_MidoNet_and_OpenStack.html">Integrating Hardware VTEPs with Midokura MidoNet and OpenStack</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Lightweight_Network_Virtualization_-_LNV_Overview.html">Lightweight Network Virtualization - LNV Overview</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="LNV_VXLAN_Active-Active_Mode.html">LNV VXLAN Active-Active Mode</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="LNV_Full_Example.html">LNV Full Example</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Static_MAC_Bindings_with_VXLAN.html">Static MAC Bindings with VXLAN</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Ethernet_Virtual_Private_Network_-_EVPN.html">Ethernet Virtual Private Network - EVPN</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VXLAN_Hyperloop.html">VXLAN Hyperloop</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Static_VXLAN_Tunnels.html">Static VXLAN Tunnels</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Layer_Three.html">Layer Three</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Routing.html">Routing</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Introduction_to_Routing_Protocols.html">Introduction to Routing Protocols</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Network_Topology.html">Network Topology</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Quagga_Overview.html">Quagga Overview</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Configuring_Quagga.html">Configuring Quagga</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Comparing_NCLU_and_vtysh_Commands.html">Comparing NCLU and vtysh Commands</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Open_Shortest_Path_First_-_OSPF_-_Protocol.html">Open Shortest Path First - OSPF - Protocol</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Open_Shortest_Path_First_v3_-_OSPFv3_-_Protocol.html">Open Shortest Path First v3 - OSPFv3 - Protocol</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Border_Gateway_Protocol_-_BGP.html">Border Gateway Protocol - BGP</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Bidirectional_Forwarding_Detection_-_BFD.html">Bidirectional Forwarding Detection - BFD</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Equal_Cost_Multipath_Load_Sharing_-_Hardware_ECMP.html">Equal Cost Multipath Load Sharing - Hardware ECMP</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Redistribute_Neighbor.html">Redistribute Neighbor</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Virtual_Routing_and_Forwarding_-_VRF.html">Virtual Routing and Forwarding - VRF</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Management_VRF.html">Management VRF</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Protocol_Independent_Multicast_-_PIM.html">Protocol Independent Multicast - PIM</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Monitoring_and_Troubleshooting.html">Monitoring and Troubleshooting</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Single_User_Mode_-_Boot_Recovery.html">Single User Mode - Boot Recovery</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Resource_Diagnostics_Using_cl-resource-query.html">Resource Diagnostics Using cl-resource-query</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Monitoring_System_Hardware.html">Monitoring System Hardware</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Network_Switch_Port_LED_and_Status_LED_Guidelines.html">Network Switch Port LED and Status LED Guidelines</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Monitoring_Virtual_Device_Counters.html">Monitoring Virtual Device Counters</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Understanding_the_cl-support_Output_File.html">Understanding the cl-support Output File</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Troubleshooting_Log_Files.html">Troubleshooting Log Files</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Troubleshooting_the_etc_Directory.html">Troubleshooting the etc Directory</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Troubleshooting_Network_Interfaces.html">Troubleshooting Network Interfaces</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Monitoring_Interfaces_and_Transceivers_Using_ethtool.html">Monitoring Interfaces and Transceivers Using ethtool</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link current" href="Network_Troubleshooting.html">Network Troubleshooting</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Using_NCLU_to_Troubleshoot_Your_Network_Configuration.html">Using NCLU to Troubleshoot Your Network Configuration</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Monitoring_System_Statistics_and_Network_Traffic_with_sFlow.html">Monitoring System Statistics and Network Traffic with sFlow</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Using_netq_to_Troubleshoot_the_Network.html">Using netq to Troubleshoot the Network</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="SNMP_Monitoring.html">SNMP Monitoring</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Using_Nutanix_Prism_as_a_Monitoring_Tool.html">Using Nutanix Prism as a Monitoring Tool</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Monitoring_Best_Practices.html">Monitoring Best Practices</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Network_Solutions.html">Network Solutions</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Data_Center_Host_to_ToR_Architecture.html">Data Center Host to ToR Architecture</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Cumulus_Networks_Services_Demos.html">Cumulus Networks Services Demos</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Docker_on_Cumulus_Linux.html">Docker on Cumulus Linux</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="OpenStack_Neutron_ML2_and_Cumulus_Linux.html">OpenStack Neutron ML2 and Cumulus Linux</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Anycast_Design_Guide.html">Anycast Design Guide</a>

            </li>
                            </ul>
            </li>
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="Cumulus_Linux_Index.html">Cumulus Linux Index</a>

            </li>
                                    </ul>
            </nav>
        </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Cumulus_Linux_User_Guide.html">Cumulus Linux 3.2.1</a></li>
                                                                                     <li><a href="Monitoring_and_Troubleshooting.html">Monitoring and Troubleshooting</a></li>
                                                            </ul>
</div>            <h1 id="src-5126778"> <span>Network Troubleshooting</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

    <p  >Cumulus Linux contains a number of command line and analytical tools to help you troubleshoot issues with your network.    </p>
    <div class="section section-1" id="src-5126778_NetworkTroubleshooting-Contents">
        <h1 class="heading "><span>Contents</span></h1>
    <p  class="expand-control-text">This chapter covers ...    </p>
    </div>
    <div class="section section-1" id="src-5126778_NetworkTroubleshooting-CheckingReachabilityUsingping">
        <h1 class="heading "><span>Checking Reachability Using ping</span></h1>
    <p  ><tt class=" ">ping</tt><span id="src-5126778_indexterm-6A679738BA44F8A40CA902480B12BC08"> </span>is used to check reachability of a host. <tt class=" ">ping</tt> also calculates the time it takes for packets to travel the round trip. See <tt class=" ">man ping</tt> for details.    </p>
    <p  >To test the connection to an IPv4 host:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ ping </code><code class="value">192.0</code><code class="plain">.</code><code class="value">2.45</code></div>
<div class="line"><code class="plain">PING </code><code class="value">192.0</code><code class="plain">.</code><code class="value">2.45</code><code class="plain"> (</code><code class="value">192.0</code><code class="plain">.</code><code class="value">2.45</code><code class="plain">) </code><code class="value">56</code><code class="plain">(</code><code class="value">84</code><code class="plain">) bytes of data.</code></div>
<div class="line"><code class="value">64</code><code class="plain"> bytes from </code><code class="value">192.0</code><code class="plain">.</code><code class="value">2.45</code><code class="plain">: icmp_req=</code><code class="value">1</code><code class="plain"> ttl=</code><code class="value">53</code><code class="plain"> time=</code><code class="value">40.4</code><code class="plain"> ms</code></div>
<div class="line"><code class="value">64</code><code class="plain"> bytes from </code><code class="value">192.0</code><code class="plain">.</code><code class="value">2.45</code><code class="plain">: icmp_req=</code><code class="value">2</code><code class="plain"> ttl=</code><code class="value">53</code><code class="plain"> time=</code><code class="value">39.6</code><code class="plain"> ms</code></div>
<div class="line"><code class="plain">...</code></div>
</div>
    </div>
    <p  >To test the connection to an IPv6 host:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ ping6 -I swp1 </code><code class="value">2001</code><code class="plain">::db8:ff:fe00:</code><code class="value">2</code></div>
<div class="line"><code class="plain">PING </code><code class="value">2001</code><code class="plain">::db8:ff:fe00:</code><code class="value">2</code><code class="plain">(</code><code class="value">2001</code><code class="plain">::db8:ff:fe00:</code><code class="value">2</code><code class="plain">) from </code><code class="value">2001</code><code class="plain">::db8:ff:fe00:</code><code class="value">1</code><code class="plain"> swp1: </code><code class="value">56</code><code class="plain"> data bytes</code></div>
<div class="line"><code class="value">64</code><code class="plain"> bytes from </code><code class="value">2001</code><code class="plain">::db8:ff:fe00:</code><code class="value">2</code><code class="plain">: icmp_seq=</code><code class="value">1</code><code class="plain"> ttl=</code><code class="value">64</code><code class="plain"> time=</code><code class="value">1.43</code><code class="plain"> ms</code></div>
<div class="line"><code class="value">64</code><code class="plain"> bytes from </code><code class="value">2001</code><code class="plain">::db8:ff:fe00:</code><code class="value">2</code><code class="plain">: icmp_seq=</code><code class="value">2</code><code class="plain"> ttl=</code><code class="value">64</code><code class="plain"> time=</code><code class="value">0.927</code><code class="plain"> ms</code></div>
</div>
    </div>
    </div>
    <div class="section section-1" id="src-5126778_NetworkTroubleshooting-PrintingRouteTraceUsingtraceroute">
        <h1 class="heading "><span>Printing Route Trace Using traceroute</span></h1>
    <p  ><tt class=" ">traceroute</tt><span id="src-5126778_indexterm-D15D21ADC34633B419FA172F6EA7F2A0"> </span>tracks the route that packets take from an IP network on their way to a given host. See <tt class=" ">man traceroute</tt> for details.    </p>
    <p  >To track the route to an IPv4 host:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ traceroute www.google.com</code></div>
<div class="line"><code class="plain">traceroute to www.google.com (</code><code class="value">74.125</code><code class="plain">.</code><code class="value">239.49</code><code class="plain">), </code><code class="value">30</code><code class="plain"> hops max, </code><code class="value">60</code><code class="plain"> </code><code class="keyword">byte</code><code class="plain"> packets</code></div>
<div class="line"><code class="value">1</code><code class="plain">  cumulusnetworks.com (</code><code class="value">192.168</code><code class="plain">.</code><code class="value">1.1</code><code class="plain">)  </code><code class="value">0.614</code><code class="plain"> ms  </code><code class="value">0.863</code><code class="plain"> ms  </code><code class="value">0.932</code><code class="plain"> ms</code></div>
<div class="line"><code class="plain">...</code></div>
<div class="line"><code class="value">5</code><code class="plain">  core2-</code><code class="value">1</code><code class="plain">-</code><code class="value">1</code><code class="plain">-</code><code class="value">0</code><code class="plain">.pao.net.google.com (</code><code class="value">198.32</code><code class="plain">.</code><code class="value">176.31</code><code class="plain">)  </code><code class="value">22.347</code><code class="plain"> ms  </code><code class="value">22.584</code><code class="plain"> ms  </code><code class="value">24.328</code><code class="plain"> ms</code></div>
<div class="line"><code class="value">6</code><code class="plain">  </code><code class="value">216.239</code><code class="plain">.</code><code class="value">49.250</code><code class="plain"> (</code><code class="value">216.239</code><code class="plain">.</code><code class="value">49.250</code><code class="plain">)  </code><code class="value">24.371</code><code class="plain"> ms  </code><code class="value">25.757</code><code class="plain"> ms  </code><code class="value">25.987</code><code class="plain"> ms</code></div>
<div class="line"><code class="value">7</code><code class="plain">  </code><code class="value">72.14</code><code class="plain">.</code><code class="value">232.35</code><code class="plain"> (</code><code class="value">72.14</code><code class="plain">.</code><code class="value">232.35</code><code class="plain">)  </code><code class="value">27.505</code><code class="plain"> ms  </code><code class="value">22.925</code><code class="plain"> ms  </code><code class="value">22.323</code><code class="plain"> ms</code></div>
<div class="line"><code class="value">8</code><code class="plain">  nuq04s19-in-f17.1e100.net (</code><code class="value">74.125</code><code class="plain">.</code><code class="value">239.49</code><code class="plain">)  </code><code class="value">23.544</code><code class="plain"> ms  </code><code class="value">21.851</code><code class="plain"> ms  </code><code class="value">22.604</code><code class="plain"> ms</code></div>
</div>
    </div>
    </div>
    <div class="section section-1" id="src-5126778_NetworkTroubleshooting-ManipulatingtheSystemARPCache">
        <h1 class="heading "><span>Manipulating the System ARP Cache</span></h1>
    <p  ><tt class=" ">arp</tt><span id="src-5126778_indexterm-AFAFF08F5758763F25847D4A727EEF7A"> </span>manipulates or displays the kernel&rsquo;s IPv4 network neighbor cache. See <tt class=" ">man arp</tt> for details.    </p>
    <p  >To display the ARP cache:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ arp -a</code></div>
<div class="line"><code class="plain">? (</code><code class="value">11.0</code><code class="plain">.</code><code class="value">2.2</code><code class="plain">) at </code><code class="value">00</code><code class="plain">:</code><code class="value">02</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">10</code><code class="plain"> [ether] on swp3</code></div>
<div class="line"><code class="plain">? (</code><code class="value">11.0</code><code class="plain">.</code><code class="value">3.2</code><code class="plain">) at </code><code class="value">00</code><code class="plain">:</code><code class="value">02</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">01</code><code class="plain"> [ether] on swp4</code></div>
<div class="line"><code class="plain">? (</code><code class="value">11.0</code><code class="plain">.</code><code class="value">0.2</code><code class="plain">) at </code><code class="value">44</code><code class="plain">:</code><code class="value">38</code><code class="plain">:</code><code class="value">39</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">01</code><code class="plain">:c1 [ether] on swp1</code></div>
</div>
    </div>
    <p  >To delete an ARP cache entry:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ arp -d </code><code class="value">11.0</code><code class="plain">.</code><code class="value">2.2</code></div>
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ arp -a</code></div>
<div class="line"><code class="plain">? (</code><code class="value">11.0</code><code class="plain">.</code><code class="value">2.2</code><code class="plain">) at &lt;incomplete&gt; on swp3</code></div>
<div class="line"><code class="plain">? (</code><code class="value">11.0</code><code class="plain">.</code><code class="value">3.2</code><code class="plain">) at </code><code class="value">00</code><code class="plain">:</code><code class="value">02</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">01</code><code class="plain"> [ether] on swp4</code></div>
<div class="line"><code class="plain">? (</code><code class="value">11.0</code><code class="plain">.</code><code class="value">0.2</code><code class="plain">) at </code><code class="value">44</code><code class="plain">:</code><code class="value">38</code><code class="plain">:</code><code class="value">39</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">01</code><code class="plain">:c1 [ether] on swp1</code></div>
</div>
    </div>
    <p  >To add a static ARP cache entry:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ arp -s </code><code class="value">11.0</code><code class="plain">.</code><code class="value">2.2</code><code class="plain"> </code><code class="value">00</code><code class="plain">:</code><code class="value">02</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">10</code></div>
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ arp -a</code></div>
<div class="line"><code class="plain">? (</code><code class="value">11.0</code><code class="plain">.</code><code class="value">2.2</code><code class="plain">) at </code><code class="value">00</code><code class="plain">:</code><code class="value">02</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">10</code><code class="plain"> [ether] PERM on swp3</code></div>
<div class="line"><code class="plain">? (</code><code class="value">11.0</code><code class="plain">.</code><code class="value">3.2</code><code class="plain">) at </code><code class="value">00</code><code class="plain">:</code><code class="value">02</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">01</code><code class="plain"> [ether] on swp4</code></div>
<div class="line"><code class="plain">? (</code><code class="value">11.0</code><code class="plain">.</code><code class="value">0.2</code><code class="plain">) at </code><code class="value">44</code><code class="plain">:</code><code class="value">38</code><code class="plain">:</code><code class="value">39</code><code class="plain">:</code><code class="value">00</code><code class="plain">:</code><code class="value">01</code><code class="plain">:c1 [ether] on swp1</code></div>
</div>
    </div>
    </div>
    <div class="section section-1" id="src-5126778_NetworkTroubleshooting-GeneratingTrafficUsingmz">
        <h1 class="heading "><span>Generating Traffic Using mz</span></h1>
    <p  ><tt class=" ">mz</tt><span id="src-5126778_indexterm-A5E664EB2B911D1D471F40CC04821B7C"> </span><span id="src-5126778_indexterm-DBCE86A63B6894B9910FC390B94886BD">is a fast </span>traffic generator. It can generate a large variety of packet types at high speed. See <tt class=" ">man mz</tt> for details.    </p>
    <p  >For example, to send two sets of packets to TCP port 23 and 24, with source IP 11.0.0.1 and destination 11.0.0.2, do the following:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo mz swp1 -A </code><code class="value">11.0</code><code class="plain">.</code><code class="value">0.1</code><code class="plain"> -B </code><code class="value">11.0</code><code class="plain">.</code><code class="value">0.2</code><code class="plain"> -c </code><code class="value">2</code><code class="plain"> -v -t tcp </code><code class="string">"dp=23-24"</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">Mausezahn </code><code class="value">0.40</code><code class="plain"> - (C) </code><code class="value">2007</code><code class="plain">-</code><code class="value">2010</code><code class="plain"> by Herbert Haas - http:</code><code class="comments">//www.perihel.at/sec/mz/</code></div>
<div class="line"><code class="plain">Use at your own risk and responsibility!</code></div>
<div class="line"><code class="plain">-- Verbose mode --</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">This system supports a high resolution clock.</code></div>
<div class="line"><code class="plain"> The clock resolution is </code><code class="value">4000250</code><code class="plain"> nanoseconds.</code></div>
<div class="line"><code class="plain">Mausezahn will send </code><code class="value">4</code><code class="plain"> frames...</code></div>
<div class="line"><code class="plain"> IP:  ver=</code><code class="value">4</code><code class="plain">, len=</code><code class="value">40</code><code class="plain">, tos=</code><code class="value">0</code><code class="plain">, id=</code><code class="value">0</code><code class="plain">, frag=</code><code class="value">0</code><code class="plain">, ttl=</code><code class="value">255</code><code class="plain">, proto=</code><code class="value">6</code><code class="plain">, sum=</code><code class="value">0</code><code class="plain">, SA=</code><code class="value">11.0</code><code class="plain">.</code><code class="value">0.1</code><code class="plain">, DA=</code><code class="value">11.0</code><code class="plain">.</code><code class="value">0.2</code><code class="plain">,</code></div>
<div class="line"><code class="plain">      payload=[see next layer]</code></div>
<div class="line"><code class="plain"> TCP: sp=</code><code class="value">0</code><code class="plain">, dp=</code><code class="value">23</code><code class="plain">, S=</code><code class="value">42</code><code class="plain">, A=</code><code class="value">42</code><code class="plain">, flags=</code><code class="value">0</code><code class="plain">, win=</code><code class="value">10000</code><code class="plain">, len=</code><code class="value">20</code><code class="plain">, sum=</code><code class="value">0</code><code class="plain">,</code></div>
<div class="line"><code class="plain">      payload=</code></div>
<div class="line"> </div>
<div class="line"><code class="plain"> IP:  ver=</code><code class="value">4</code><code class="plain">, len=</code><code class="value">40</code><code class="plain">, tos=</code><code class="value">0</code><code class="plain">, id=</code><code class="value">0</code><code class="plain">, frag=</code><code class="value">0</code><code class="plain">, ttl=</code><code class="value">255</code><code class="plain">, proto=</code><code class="value">6</code><code class="plain">, sum=</code><code class="value">0</code><code class="plain">, SA=</code><code class="value">11.0</code><code class="plain">.</code><code class="value">0.1</code><code class="plain">, DA=</code><code class="value">11.0</code><code class="plain">.</code><code class="value">0.2</code><code class="plain">,</code></div>
<div class="line"><code class="plain">      payload=[see next layer]</code></div>
<div class="line"><code class="plain"> TCP: sp=</code><code class="value">0</code><code class="plain">, dp=</code><code class="value">24</code><code class="plain">, S=</code><code class="value">42</code><code class="plain">, A=</code><code class="value">42</code><code class="plain">, flags=</code><code class="value">0</code><code class="plain">, win=</code><code class="value">10000</code><code class="plain">, len=</code><code class="value">20</code><code class="plain">, sum=</code><code class="value">0</code><code class="plain">,</code></div>
<div class="line"><code class="plain">      payload=</code></div>
<div class="line"> </div>
<div class="line"><code class="plain"> IP:  ver=</code><code class="value">4</code><code class="plain">, len=</code><code class="value">40</code><code class="plain">, tos=</code><code class="value">0</code><code class="plain">, id=</code><code class="value">0</code><code class="plain">, frag=</code><code class="value">0</code><code class="plain">, ttl=</code><code class="value">255</code><code class="plain">, proto=</code><code class="value">6</code><code class="plain">, sum=</code><code class="value">0</code><code class="plain">, SA=</code><code class="value">11.0</code><code class="plain">.</code><code class="value">0.1</code><code class="plain">, DA=</code><code class="value">11.0</code><code class="plain">.</code><code class="value">0.2</code><code class="plain">,</code></div>
<div class="line"><code class="plain">      payload=[see next layer]</code></div>
<div class="line"><code class="plain"> TCP: sp=</code><code class="value">0</code><code class="plain">, dp=</code><code class="value">23</code><code class="plain">, S=</code><code class="value">42</code><code class="plain">, A=</code><code class="value">42</code><code class="plain">, flags=</code><code class="value">0</code><code class="plain">, win=</code><code class="value">10000</code><code class="plain">, len=</code><code class="value">20</code><code class="plain">, sum=</code><code class="value">0</code><code class="plain">,</code></div>
<div class="line"><code class="plain">      payload=</code></div>
<div class="line"> </div>
<div class="line"><code class="plain"> IP:  ver=</code><code class="value">4</code><code class="plain">, len=</code><code class="value">40</code><code class="plain">, tos=</code><code class="value">0</code><code class="plain">, id=</code><code class="value">0</code><code class="plain">, frag=</code><code class="value">0</code><code class="plain">, ttl=</code><code class="value">255</code><code class="plain">, proto=</code><code class="value">6</code><code class="plain">, sum=</code><code class="value">0</code><code class="plain">, SA=</code><code class="value">11.0</code><code class="plain">.</code><code class="value">0.1</code><code class="plain">, DA=</code><code class="value">11.0</code><code class="plain">.</code><code class="value">0.2</code><code class="plain">,</code></div>
<div class="line"><code class="plain">      payload=[see next layer]</code></div>
<div class="line"><code class="plain"> TCP: sp=</code><code class="value">0</code><code class="plain">, dp=</code><code class="value">24</code><code class="plain">, S=</code><code class="value">42</code><code class="plain">, A=</code><code class="value">42</code><code class="plain">, flags=</code><code class="value">0</code><code class="plain">, win=</code><code class="value">10000</code><code class="plain">, len=</code><code class="value">20</code><code class="plain">, sum=</code><code class="value">0</code><code class="plain">,</code></div>
<div class="line"><code class="plain">      payload=</code></div>
</div>
    </div>
    </div>
    <div class="section section-1" id="src-5126778_NetworkTroubleshooting-counter_aclCreatingCounterACLRules">
        <h1 class="heading "><span id="src-5126778_NetworkTroubleshooting-counter_acl" class="confluence-anchor-link"></span><span>Creating Counter ACL Rules</span></h1>
    <p  ><span id="src-5126778_indexterm-228B18A7A1BBE879DB2EBD8E1660876C">In Linux, all </span>ACL rules are always counted. To create an ACL rule for counting purposes only, set the rule action to ACCEPT. See the <a   href="Netfilter_-_ACLs.html">Netfilter</a> chapter for details on how to use <tt class=" ">cl-acltool</tt> to set up iptables-/ip6tables-/ebtables-based ACLs.    </p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >Always place your rules files under <tt class=" ">/etc/cumulus/acl/policy.d/</tt>.    </p>
        </div>
    </div>
    <p  >To count all packets going to a Web server:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ cat sample_count.rules</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">[iptables]</code></div>
<div class="line"><code class="plain">-A FORWARD -p tcp --dport </code><code class="value">80</code><code class="plain"> -j ACCEPT</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo cl-acltool -i -p sample_count.rules</code></div>
<div class="line"><code class="plain">Using user provided rule file sample_count.rules</code></div>
<div class="line"><code class="plain">Reading rule file sample_count.rules ...</code></div>
<div class="line"><code class="plain">Processing rules in file sample_count.rules ...</code></div>
<div class="line"><code class="plain">Installing acl policy... done.</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo iptables -L -v</code></div>
<div class="line"><code class="plain">Chain INPUT (policy ACCEPT </code><code class="value">16</code><code class="plain"> packets, </code><code class="value">2224</code><code class="plain"> bytes)</code></div>
<div class="line"><code class="plain">pkts bytes target     prot opt in     out     source               destination</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">Chain FORWARD (policy ACCEPT </code><code class="value">0</code><code class="plain"> packets, </code><code class="value">0</code><code class="plain"> bytes)</code></div>
<div class="line"><code class="plain">pkts bytes target     prot opt in     out     source               destination</code></div>
<div class="line"><code class="plain">   </code><code class="value">2</code><code class="plain">   </code><code class="value">156</code><code class="plain"> ACCEPT     tcp  --  any    any     anywhere             anywhere             tcp dpt:http</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">Chain OUTPUT (policy ACCEPT </code><code class="value">44</code><code class="plain"> packets, </code><code class="value">8624</code><code class="plain"> bytes)</code></div>
<div class="line"><code class="plain">pkts bytes target     prot opt in     out     source               destination</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-warning">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >The <tt class=" ">-p</tt> option clears out all other rules, and the <tt class=" ">-i</tt> option is used to reinstall all the rules.    </p>
        </div>
    </div>
    </div>
    <div class="section section-1" id="src-5126778_NetworkTroubleshooting-spanConfiguringSPANandERSPAN">
        <h1 class="heading "><span id="src-5126778_NetworkTroubleshooting-span" class="confluence-anchor-link"></span><span>Configuring SPAN and ERSPAN</span></h1>
    <p  ><span id="src-5126778_indexterm-35B12EAF5471DAC46B14BB473257D237">SPAN (Switched Port Analyzer) </span>provides for the mirroring of all packets coming in from or going out of an interface (the <i class=" ">SPAN source</i>), and being copied and transmitted out of a local port (the <i class=" ">SPAN destination</i>) for monitoring. The SPAN destination port is also referred to as a mirror-to-port (MTP). The original packet is still switched, while a mirrored copy of the packet is sent out of the MTP.    </p>
    <p  ><span id="src-5126778_indexterm-A77DCC6DB36A78B68A35A1A75D335149">ERSPAN (Encapsulated Remote SPAN) </span>enables the mirrored packets to be sent to a monitoring node located anywhere across the routed network. The switch finds the outgoing port of the mirrored packets by doing a lookup of the destination IP address in its routing table. The original L2 packet is encapsulated with GRE for IP delivery. The encapsulated packets have the following format:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain"> ----------------------------------------------------------</code></div>
<div class="line"><code class="plain">| MAC_HEADER | IP_HEADER | GRE_HEADER | L2_Mirrored_Packet |</code></div>
<div class="line"><code class="plain"> ----------------------------------------------------------</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >Mirrored traffic is not guaranteed. If the MTP is congested, mirrored packets may be discarded.    </p>
        </div>
    </div>
    <p  >SPAN and ERSPAN are configured via <tt class=" ">cl-acltool</tt>, the <a   href="Netfilter_-_ACLs.html">same utility for security ACL configuration</a>. The match criteria for SPAN and ERSPAN is usually an interface; for more granular match terms, use <a   href="#src-5126778_NetworkTroubleshooting-selective_spanning">selective spanning</a>. The SPAN source interface can be a port, a subinterface or a bond interface. Both ingress and egress traffic on interfaces can be matched.    </p>
    <p  >Cumulus Linux supports a maximum of 2 SPAN destinations. Multiple rules (SPAN sources) can point to the same SPAN destination, although a given SPAN source cannot specify 2 SPAN destinations. The SPAN destination (MTP) interface can be a physical port, a subinterface, or a bond interface. The SPAN/ERSPAN action is independent of security ACL actions. If packets match both a security ACL rule and a SPAN rule, both actions will be carried out.    </p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >Always place your rules files under <tt class=" ">/etc/cumulus/acl/policy.d/</tt>.    </p>
        </div>
    </div>
    <div class="section section-2" id="src-5126778_NetworkTroubleshooting-ConfiguringSPANforSwitchPorts">
        <h2 class="heading "><span>Configuring SPAN for Switch Ports</span></h2>
    <p  >This section describes how to set up, install, verify and uninstall SPAN rules. In the examples that follow, you will span (mirror) switch port swp4 input traffic and swp4 output traffic to destination switch port swp19.    </p>
    <p  >First, create a rules file in <tt class=" ">/etc/cumulus/acl/policy.d/</tt>:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo bash -c 'cat &lt;&lt;EOF &gt; /etc/cumulus/acl/policy.d/span.rules </code></div>
<div class="line"><code class="plain">[iptables]</code></div>
<div class="line"><code class="plain">-A FORWARD --in-</code><code class="keyword">interface</code><code class="plain"> swp4 -j SPAN --dport swp19</code></div>
<div class="line"><code class="plain">-A FORWARD --out-</code><code class="keyword">interface</code><code class="plain"> swp4 -j SPAN --dport swp19</code></div>
<div class="line"><code class="plain">EOF'</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >Using <tt class=" ">cl-acltool</tt> with the <tt class=" ">--out-interface</tt> rule applies to transit traffic only; it does not apply to traffic sourced from the switch.    </p>
        </div>
    </div>
    <p  >Next, verify all the rules that are currently installed:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo iptables -L -v</code></div>
<div class="line"><code class="plain">Chain INPUT (policy ACCEPT </code><code class="value">0</code><code class="plain"> packets, </code><code class="value">0</code><code class="plain"> bytes)</code></div>
<div class="line"><code class="plain"> pkts bytes target     prot opt in     out     source               destination         </code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> DROP       all  --  swp+   any     </code><code class="value">240.0</code><code class="plain">.</code><code class="value">0.0</code><code class="plain">/</code><code class="value">5</code><code class="plain">          anywhere            </code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> DROP       all  --  swp+   any     loopback/</code><code class="value">8</code><code class="plain">           anywhere            </code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> DROP       all  --  swp+   any     base-address.mcast.net/</code><code class="value">8</code><code class="plain">  anywhere            </code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> DROP       all  --  swp+   any     </code><code class="value">255.255</code><code class="plain">.</code><code class="value">255.255</code><code class="plain">      anywhere            </code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> SETCLASS   ospf --  swp+   any     anywhere             anywhere             SETCLASS  </code><code class="keyword">class</code><code class="plain">:</code><code class="value">7</code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> POLICE     ospf --  any    any     anywhere             anywhere             POLICE  mode:pkt rate:</code><code class="value">2000</code><code class="plain"> burst:</code><code class="value">2000</code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> SETCLASS   tcp  --  swp+   any     anywhere             anywhere             tcp dpt:bgp SETCLASS  </code><code class="keyword">class</code><code class="plain">:</code><code class="value">7</code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> POLICE     tcp  --  any    any     anywhere             anywhere             tcp dpt:bgp POLICE  mode:pkt rate:</code><code class="value">2000</code><code class="plain"> burst:</code><code class="value">2000</code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> SETCLASS   tcp  --  swp+   any     anywhere             anywhere             tcp spt:bgp SETCLASS  </code><code class="keyword">class</code><code class="plain">:</code><code class="value">7</code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> POLICE     tcp  --  any    any     anywhere             anywhere             tcp spt:bgp POLICE  mode:pkt rate:</code><code class="value">2000</code><code class="plain"> burst:</code><code class="value">2000</code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> SETCLASS   tcp  --  swp+   any     anywhere             anywhere             tcp dpt:</code><code class="value">5342</code><code class="plain"> SETCLASS  </code><code class="keyword">class</code><code class="plain">:</code><code class="value">7</code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> POLICE     tcp  --  any    any     anywhere             anywhere             tcp dpt:</code><code class="value">5342</code><code class="plain"> POLICE  mode:pkt rate:</code><code class="value">2000</code><code class="plain"> burst:</code><code class="value">2000</code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> SETCLASS   tcp  --  swp+   any     anywhere             anywhere             tcp spt:</code><code class="value">5342</code><code class="plain"> SETCLASS  </code><code class="keyword">class</code><code class="plain">:</code><code class="value">7</code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> POLICE     tcp  --  any    any     anywhere             anywhere             tcp spt:</code><code class="value">5342</code><code class="plain"> POLICE  mode:pkt rate:</code><code class="value">2000</code><code class="plain"> burst:</code><code class="value">2000</code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> SETCLASS   icmp --  swp+   any     anywhere             anywhere             SETCLASS  </code><code class="keyword">class</code><code class="plain">:</code><code class="value">2</code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> POLICE     icmp --  any    any     anywhere             anywhere             POLICE  mode:pkt rate:</code><code class="value">100</code><code class="plain"> burst:</code><code class="value">40</code></div>
<div class="line"><code class="plain">   </code><code class="value">15</code><code class="plain">  </code><code class="value">5205</code><code class="plain"> SETCLASS   udp  --  swp+   any     anywhere             anywhere             udp dpts:bootps:bootpc SETCLASS  </code><code class="keyword">class</code><code class="plain">:</code><code class="value">2</code></div>
<div class="line"><code class="plain">   </code><code class="value">11</code><code class="plain">  </code><code class="value">3865</code><code class="plain"> POLICE     udp  --  any    any     anywhere             anywhere             udp dpt:bootps POLICE  mode:pkt rate:</code><code class="value">100</code><code class="plain"> burst:</code><code class="value">100</code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> POLICE     udp  --  any    any     anywhere             anywhere             udp dpt:bootpc POLICE  mode:pkt rate:</code><code class="value">100</code><code class="plain"> burst:</code><code class="value">100</code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> SETCLASS   tcp  --  swp+   any     anywhere             anywhere             tcp dpts:bootps:bootpc SETCLASS  </code><code class="keyword">class</code><code class="plain">:</code><code class="value">2</code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> POLICE     tcp  --  any    any     anywhere             anywhere             tcp dpt:bootps POLICE  mode:pkt rate:</code><code class="value">100</code><code class="plain"> burst:</code><code class="value">100</code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> POLICE     tcp  --  any    any     anywhere             anywhere             tcp dpt:bootpc POLICE  mode:pkt rate:</code><code class="value">100</code><code class="plain"> burst:</code><code class="value">100</code></div>
<div class="line"><code class="plain">   </code><code class="value">17</code><code class="plain">  </code><code class="value">1088</code><code class="plain"> SETCLASS   igmp --  swp+   any     anywhere             anywhere             SETCLASS  </code><code class="keyword">class</code><code class="plain">:</code><code class="value">6</code></div>
<div class="line"><code class="plain">   </code><code class="value">17</code><code class="plain">  </code><code class="value">1156</code><code class="plain"> POLICE     igmp --  any    any     anywhere             anywhere             POLICE  mode:pkt rate:</code><code class="value">300</code><code class="plain"> burst:</code><code class="value">100</code></div>
<div class="line"><code class="plain">  </code><code class="value">394</code><code class="plain"> </code><code class="value">41060</code><code class="plain"> POLICE     all  --  swp+   any     anywhere             anywhere             ADDRTYPE match dst-type LOCAL POLICE  mode:pkt rate:</code><code class="value">1000</code><code class="plain"> burst:</code><code class="value">1000</code><code class="plain"> </code><code class="keyword">class</code><code class="plain">:</code><code class="value">0</code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> POLICE     all  --  swp+   any     anywhere             anywhere             ADDRTYPE match dst-type IPROUTER POLICE  mode:pkt rate:</code><code class="value">400</code><code class="plain"> burst:</code><code class="value">100</code><code class="plain"> </code><code class="keyword">class</code><code class="plain">:</code><code class="value">0</code></div>
<div class="line"><code class="plain">  </code><code class="value">988</code><code class="plain">  279K SETCLASS   all  --  swp+   any     anywhere             anywhere             SETCLASS  </code><code class="keyword">class</code><code class="plain">:</code><code class="value">0</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">Chain FORWARD (policy ACCEPT </code><code class="value">0</code><code class="plain"> packets, </code><code class="value">0</code><code class="plain"> bytes)</code></div>
<div class="line"><code class="plain"> pkts bytes target     prot opt in     out     source               destination         </code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> DROP       all  --  swp+   any     </code><code class="value">240.0</code><code class="plain">.</code><code class="value">0.0</code><code class="plain">/</code><code class="value">5</code><code class="plain">          anywhere            </code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> DROP       all  --  swp+   any     loopback/</code><code class="value">8</code><code class="plain">           anywhere            </code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> DROP       all  --  swp+   any     base-address.mcast.net/</code><code class="value">8</code><code class="plain">  anywhere            </code></div>
<div class="line"><code class="plain">    </code><code class="value">0</code><code class="plain">     </code><code class="value">0</code><code class="plain"> DROP       all  --  swp+   any     </code><code class="value">255.255</code><code class="plain">.</code><code class="value">255.255</code><code class="plain">      anywhere            </code></div>
<div class="line"><code class="value">26864</code><code class="plain"> 4672K SPAN       all  --  swp4   any     anywhere             anywhere             dport:swp19  &lt;---- input packets on swp4</code></div>
<div class="line"> </div>
<div class="line"><code class="value">40722</code><code class="plain">   47M SPAN       all  --  any    swp4    anywhere             anywhere             dport:swp19  &lt;---- output packets on swp4</code></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><code class="plain">Chain OUTPUT (policy ACCEPT </code><code class="value">67398</code><code class="plain"> packets, 5757K bytes)</code></div>
<div class="line"><code class="plain"> pkts bytes target     prot opt in     out     source               destination</code></div>
</div>
    </div>
    <p  >Install the rules:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo cl-acltool -i </code></div>
<div class="line"><code class="plain">[sudo] password </code><code class="keyword">for</code><code class="plain"> cumulus:</code></div>
<div class="line"><code class="plain">Reading rule file /etc/cumulus/acl/policy.d/00control_plane.rules ...</code></div>
<div class="line"><code class="plain">Processing rules in file /etc/cumulus/acl/policy.d/00control_plane.rules ...</code></div>
<div class="line"><code class="plain">Reading rule file /etc/cumulus/acl/policy.d/99control_plane_catch_all.rules ...</code></div>
<div class="line"><code class="plain">Processing rules in file /etc/cumulus/acl/policy.d/99control_plane_catch_all.rules ...</code></div>
<div class="line"><code class="plain">Reading rule file /etc/cumulus/acl/policy.d/span.rules ...</code></div>
<div class="line"><code class="plain">Processing rules in file /etc/cumulus/acl/policy.d/span.rules ...</code></div>
<div class="line"><code class="plain">Installing acl policy</code></div>
<div class="line"><code class="plain">done.</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-warning">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >Running the following command is incorrect and will remove <strong class=" ">all</strong> existing control-plane rules or other installed rules and only install the rules defined in <tt class=" ">span.rules</tt>:    </p>
<pre class=" ">cumulus@switch:~$ sudo cl-acltool -i  -P /etc/cumulus/acl/policy.d/span.rules</pre>        </div>
    </div>
    <p  >Verify that the SPAN rules were installed:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo cl-acltool -L all | grep SPAN</code></div>
<div class="line"><code class="value">38025</code><code class="plain"> 7034K SPAN       all  --  swp4   any     anywhere             anywhere             dport:swp19</code></div>
<div class="line"><code class="value">50832</code><code class="plain">   55M SPAN       all  --  any    swp4    anywhere             anywhere             dport:swp19</code></div>
</div>
    </div>
    </div>
    <div class="section section-2" id="src-5126778_NetworkTroubleshooting-ConfiguringSPANforBonds">
        <h2 class="heading "><span>Configuring SPAN for Bonds</span></h2>
    <p  >This section describes how to configure SPAN for all packets going out of <tt class=" ">bond0</tt> locally to <tt class=" ">bond1</tt>.    </p>
    <p  >First, create a rules file in <tt class=" ">/etc/cumulus/acl/policy.d/</tt>:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo bash -c 'cat &lt;&lt;EOF &gt; /etc/cumulus/acl/policy.d/span_bond.rules </code></div>
<div class="line"><code class="plain">[iptables]</code></div>
<div class="line"><code class="plain">-A FORWARD --out-</code><code class="keyword">interface</code><code class="plain"> bond0 -j SPAN --dport bond1</code></div>
<div class="line"><code class="plain">EOF'</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >Using <tt class=" ">cl-acltool</tt> with the <tt class=" ">--out-interface</tt> rule applies to transit traffic only; it does not apply to traffic sourced from the switch.    </p>
        </div>
    </div>
    <p  >Install the rules:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo cl-acltool -i </code></div>
<div class="line"><code class="plain">[sudo] password </code><code class="keyword">for</code><code class="plain"> cumulus:</code></div>
<div class="line"><code class="plain">Reading rule file /etc/cumulus/acl/policy.d/00control_plane.rules ...</code></div>
<div class="line"><code class="plain">Processing rules in file /etc/cumulus/acl/policy.d/00control_plane.rules ...</code></div>
<div class="line"><code class="plain">Reading rule file /etc/cumulus/acl/policy.d/99control_plane_catch_all.rules ...</code></div>
<div class="line"><code class="plain">Processing rules in file /etc/cumulus/acl/policy.d/99control_plane_catch_all.rules ...</code></div>
<div class="line"><code class="plain">Reading rule file /etc/cumulus/acl/policy.d/span_bond.rules ...</code></div>
<div class="line"><code class="plain">Processing rules in file /etc/cumulus/acl/policy.d/span_bond.rules ...</code></div>
<div class="line"><code class="plain">Installing acl policy</code></div>
<div class="line"><code class="plain">done.</code></div>
</div>
    </div>
    <p  >Verify that the SPAN rules were installed:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo iptables -L -v | grep SPAN</code></div>
<div class="line"><code class="plain">   </code><code class="value">19</code><code class="plain">  </code><code class="value">1938</code><code class="plain"> SPAN       all  --  any    bond0   anywhere             anywhere             dport:bond1</code></div>
</div>
    </div>
    </div>
    <div class="section section-2" id="src-5126778_NetworkTroubleshooting-ConfiguringERSPAN">
        <h2 class="heading "><span>Configuring ERSPAN</span></h2>
    <p  >This section describes how to configure ERSPAN for all packets coming in from <tt class=" ">swp1</tt> to 12.0.0.2:    </p>
    <p  >First, create a rules file in <tt class=" ">/etc/cumulus/acl/policy.d/</tt>:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo bash -c 'cat &lt;&lt;EOF &gt; /etc/cumulus/acl/policy.d/erspan.rules </code></div>
<div class="line"><code class="plain">[iptables]</code></div>
<div class="line"><code class="plain">-A FORWARD --in-</code><code class="keyword">interface</code><code class="plain"> swp1 -j ERSPAN --src-ip </code><code class="value">12.0</code><code class="plain">.</code><code class="value">0.1</code><code class="plain"> --dst-ip </code><code class="value">12.0</code><code class="plain">.</code><code class="value">0.2</code><code class="plain">  --ttl </code><code class="value">64</code></div>
<div class="line"><code class="plain">EOF'</code></div>
</div>
    </div>
    <p  >Install the rules:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo cl-acltool -i</code></div>
<div class="line"><code class="plain">Reading rule file /etc/cumulus/acl/policy.d/00control_plane.rules ...</code></div>
<div class="line"><code class="plain">Processing rules in file /etc/cumulus/acl/policy.d/00control_plane.rules ...</code></div>
<div class="line"><code class="plain">Reading rule file /etc/cumulus/acl/policy.d/99control_plane_catch_all.rules ...</code></div>
<div class="line"><code class="plain">Processing rules in file /etc/cumulus/acl/policy.d/99control_plane_catch_all.rules ...</code></div>
<div class="line"><code class="plain">Reading rule file /etc/cumulus/acl/policy.d/erspan.rules ...</code></div>
<div class="line"><code class="plain">Processing rules in file /etc/cumulus/acl/policy.d/erspan.rules ...</code></div>
<div class="line"><code class="plain">Installing acl policy</code></div>
<div class="line"><code class="plain">done.</code></div>
</div>
    </div>
    <p  >Verify that the ERSPAN rules were installed:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo iptables -L -v | grep SPAN</code></div>
<div class="line"><code class="plain">   </code><code class="value">69</code><code class="plain">  </code><code class="value">6804</code><code class="plain"> ERSPAN     all  --  swp1   any     anywhere             anywhere             ERSPAN src-ip:</code><code class="value">12.0</code><code class="plain">.</code><code class="value">0.1</code><code class="plain"> dst-ip:</code><code class="value">12.0</code><code class="plain">.</code><code class="value">0.2</code></div>
</div>
    </div>
    <p  >The <tt class=" ">src-ip</tt> option can be any IP address, whether it exists in the routing table or not. The <tt class=" ">dst-ip</tt> option must be an IP address reachable via the routing table. The destination IP address must be reachable from a front-panel port, and not the management port. Use <tt class=" ">ping</tt> or <tt class=" ">ip route get &lt;ip&gt;</tt> to verify that the destination IP address is reachable. Setting the <tt class=" ">--ttl</tt> option is recommended.    </p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >When using <a  class="external-link" href="https://www.wireshark.org">Wireshark</a> to review the ERSPAN output, Wireshark may report the message &quot;Unknown version, please report or test to use fake ERSPAN preference&quot;, and the trace is unreadable. To resolve this, go into the General preferences for Wireshark, then go to <strong class=" ">Protocols</strong> &gt; <strong class=" ">ERSPAN</strong> and check the <strong class=" ">Force to decode fake ERSPAN frame</strong> option.    </p>
        </div>
    </div>
    </div>
    <div class="section section-2" id="src-5126778_NetworkTroubleshooting-selective_spanningSelectiveSpanning">
        <h2 class="heading "><span id="src-5126778_NetworkTroubleshooting-selective_spanning" class="confluence-anchor-link"></span><span>Selective Spanning</span></h2>
    <p  >SPAN/ERSPAN traffic rules can be configured to limit the traffic that is spanned, to reduce the volume of copied data.    </p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >Cumulus Linux 3.2 supports selective spanning for <tt class=" ">iptables</tt> only. <tt class=" ">ip6tables</tt> and <tt class=" ">ebtables</tt> are not supported.    </p>
        </div>
    </div>
    <p  >The following matching fields are supported:    </p>
<ul class=" "><li class=" ">    <p  >IPv4 SIP/DIP    </p>
</li><li class=" ">    <p  >IP protocol    </p>
</li><li class=" ">    <p  >L4 (TCP/UDP) src/dst port    </p>
</li><li class=" ">    <p  >TCP flags    </p>
</li><li class=" ">    <p  >An ingress port/wildcard (swp+) can be specified in addition    </p>
</li></ul>    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >With ERSPAN, a maximum of two <tt class=" ">--src-ip --dst-ip</tt> pairs are supported. Exceeding this limit produces an error when you install the rules with <tt class=" ">cl-acltool</tt>.    </p>
        </div>
    </div>
    <div class="section section-3" id="src-5126778_NetworkTroubleshooting-SPANExamples">
        <h3 class="heading "><span>SPAN Examples</span></h3>
<ul class=" "><li class=" ">    <p  >To mirror forwarded packets from all ports matching SIP 20.0.1.0 and DIP 20.0.1.2 to port swp1s1:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">-A FORWARD --in-</code><code class="keyword">interface</code><code class="plain"> swp+ -s </code><code class="value">20.0</code><code class="plain">.</code><code class="value">0.2</code><code class="plain"> -d </code><code class="value">20.0</code><code class="plain">.</code><code class="value">1.2</code><code class="plain"> -j SPAN --dport swp1s2</code></div>
</div>
    </div>
</li><li class=" ">    <p  >To mirror icmp packets from all ports to swp1s2:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">-A FORWARD --in-</code><code class="keyword">interface</code><code class="plain"> swp+ -s </code><code class="value">20.0</code><code class="plain">.</code><code class="value">0.2</code><code class="plain"> -p icmp -j SPAN --dport swp1s2</code></div>
</div>
    </div>
</li><li class=" ">    <p  >To mirror forwarded UDP packets received from port swp1s0, towards DIP 20.0.1.2 and destination port 53:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">-A FORWARD --in-</code><code class="keyword">interface</code><code class="plain"> swp1s0 -d </code><code class="value">20.0</code><code class="plain">.</code><code class="value">1.2</code><code class="plain"> -p udp --dport </code><code class="value">53</code><code class="plain"> -j SPAN --dport swp1s2</code></div>
</div>
    </div>
</li><li class=" ">    <p  >To mirror all forwarded TCP packets with only SYN set:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">-A FORWARD --in-</code><code class="keyword">interface</code><code class="plain"> swp+ -p tcp --tcp-flags ALL SYN -j SPAN --dport swp1s2</code></div>
</div>
    </div>
</li><li class=" ">    <p  >To mirror all forwarded TCP packets with only FIN set:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">-A FORWARD --in-</code><code class="keyword">interface</code><code class="plain"> swp+ -p tcp --tcp-flags ALL FIN -j SPAN --dport swp1s2</code></div>
</div>
    </div>
</li></ul>    </div>
    <div class="section section-3" id="src-5126778_NetworkTroubleshooting-ERSPANExamples">
        <h3 class="heading "><span>ERSPAN Examples</span></h3>
<ul class=" "><li class=" ">    <p  >To mirror forwarded packets from all ports matching SIP 20.0.1.0 and DIP 20.0.1.2:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">-A FORWARD --in-</code><code class="keyword">interface</code><code class="plain"> swp+ -s </code><code class="value">20.0</code><code class="plain">.</code><code class="value">0.2</code><code class="plain"> -d </code><code class="value">20.0</code><code class="plain">.</code><code class="value">1.2</code><code class="plain"> -j ERSPAN --src-ip </code><code class="value">90.0</code><code class="plain">.</code><code class="value">0.1</code><code class="plain"> --dst-ip </code><code class="value">20.0</code><code class="plain">.</code><code class="value">2.2</code></div>
</div>
    </div>
</li><li class=" ">    <p  >To mirror ICMP packets from all ports:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">-A FORWARD --in-</code><code class="keyword">interface</code><code class="plain"> swp+ -s </code><code class="value">20.0</code><code class="plain">.</code><code class="value">0.2</code><code class="plain"> -p icmp -j ERSPAN --src-ip </code><code class="value">90.0</code><code class="plain">.</code><code class="value">0.1</code><code class="plain"> --dst-ip </code><code class="value">20.0</code><code class="plain">.</code><code class="value">2.2</code></div>
</div>
    </div>
</li><li class=" ">    <p  >To mirror forwarded UDP packets received from port swp1s0, towards DIP 20.0.1.2 and destination port 53:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">-A FORWARD --in-</code><code class="keyword">interface</code><code class="plain"> swp1s0 -d </code><code class="value">20.0</code><code class="plain">.</code><code class="value">1.2</code><code class="plain"> -p udp --dport </code><code class="value">53</code><code class="plain"> -j ERSPAN --src-ip </code><code class="value">90.0</code><code class="plain">.</code><code class="value">0.1</code><code class="plain"> --dst-ip </code><code class="value">20.0</code><code class="plain">.</code><code class="value">2.2</code></div>
</div>
    </div>
</li><li class=" ">    <p  >To mirror all forwarded TCP packets with only SYN set:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">-A FORWARD --in-</code><code class="keyword">interface</code><code class="plain"> swp+ -p tcp --tcp-flags ALL SYN -j ERSPAN --src-ip </code><code class="value">90.0</code><code class="plain">.</code><code class="value">0.1</code><code class="plain"> --dst-ip </code><code class="value">20.0</code><code class="plain">.</code><code class="value">2.2</code></div>
</div>
    </div>
</li><li class=" ">    <p  >To mirror all forwarded TCP packets with only FIN set:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">-A FORWARD --in-</code><code class="keyword">interface</code><code class="plain"> swp+ -p tcp --tcp-flags ALL FIN -j ERSPAN --src-ip </code><code class="value">90.0</code><code class="plain">.</code><code class="value">0.1</code><code class="plain"> --dst-ip </code><code class="value">20.0</code><code class="plain">.</code><code class="value">2.2</code></div>
</div>
    </div>
</li></ul>    </div>
    </div>
    <div class="section section-2" id="src-5126778_NetworkTroubleshooting-RemovingSPANRules">
        <h2 class="heading "><span>Removing SPAN Rules</span></h2>
    <p  >To remove your SPAN rules, run:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">#Remove rules file:</code></div>
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo rm  /etc/cumulus/acl/policy.d/span.rules</code></div>
<div class="line"><code class="plain">#Reload the </code><code class="keyword">default</code><code class="plain"> rules</code></div>
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo cl-acltool -i</code></div>
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$</code></div>
</div>
    </div>
    <p  >To verify that the SPAN rules were removed:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo cl-acltool -L all | grep SPAN</code></div>
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$</code></div>
</div>
    </div>
    </div>
    </div>
    <div class="section section-1" id="src-5126778_NetworkTroubleshooting-MonitoringControlPlaneTrafficwithtcpdump">
        <h1 class="heading "><span>Monitoring Control Plane Traffic with tcpdump</span></h1>
    <p  >You can use <tt class=" ">tcpdump</tt><span id="src-5126778_indexterm-284111AB8FC2FEFAD309779007309285"> to </span><span id="src-5126778_indexterm-2EF9B641EA45241EEAEAEFE216466610">monitor </span><span id="src-5126778_indexterm-0459B65AC7920BCB65D4A3466D58AFD9">control </span>plane traffic &mdash; traffic sent to and coming from the switch CPUs. <tt class=" ">tcpdump</tt> does <strong class=" ">not</strong> monitor data plane traffic; use <tt class=" ">cl-acltool</tt> instead (see above).    </p>
    <p  >For more information on tcpdump, read <a  class="external-link" href="http://www.tcpdump.org/#documentation">the <tt class=" ">tcpdump</tt> documentation</a> and the <a  class="external-link" href="http://www.tcpdump.org/manpages/tcpdump.1.html"><tt class=" ">tcpdump</tt> man page</a>.    </p>
    <p  >The following example incorporates a few <tt class=" ">tcpdump</tt> options:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">-i bond0</tt>, which captures packets from bond0 to the CPU and from the CPU to bond0    </p>
</li><li class=" ">    <p  ><tt class=" ">host 169.254.0.2</tt>, which filters for this IP address    </p>
</li><li class=" ">    <p  ><tt class=" ">-c 10</tt>, which captures 10 packets then stops    </p>
</li></ul>    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">cumulus</code><code class="color1">@switch</code><code class="plain">:~$ sudo tcpdump -i bond0 host </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.2</code><code class="plain"> -c </code><code class="value">10</code></div>
<div class="line"><code class="plain">tcpdump: WARNING: bond0: no IPv4 address assigned</code></div>
<div class="line"><code class="plain">tcpdump: verbose output suppressed, use -v or -vv </code><code class="keyword">for</code><code class="plain"> full protocol decode</code></div>
<div class="line"><code class="plain">listening on bond0, link-type EN10MB (Ethernet), capture size </code><code class="value">65535</code><code class="plain"> bytes</code></div>
<div class="line"><code class="value">16</code><code class="plain">:</code><code class="value">24</code><code class="plain">:</code><code class="value">42.532473</code><code class="plain"> IP </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.2</code><code class="plain"> &gt; </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.1</code><code class="plain">: ICMP echo request, id </code><code class="value">27785</code><code class="plain">, seq </code><code class="value">6</code><code class="plain">, length </code><code class="value">64</code></div>
<div class="line"><code class="value">16</code><code class="plain">:</code><code class="value">24</code><code class="plain">:</code><code class="value">42.532534</code><code class="plain"> IP </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.1</code><code class="plain"> &gt; </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.2</code><code class="plain">: ICMP echo reply, id </code><code class="value">27785</code><code class="plain">, seq </code><code class="value">6</code><code class="plain">, length </code><code class="value">64</code></div>
<div class="line"><code class="value">16</code><code class="plain">:</code><code class="value">24</code><code class="plain">:</code><code class="value">42.804155</code><code class="plain"> IP </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.2</code><code class="plain">.</code><code class="value">40210</code><code class="plain"> &gt; </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.1</code><code class="plain">.</code><code class="value">5342</code><code class="plain">: Flags [.], seq </code><code class="value">266275591</code><code class="plain">:</code><code class="value">266277039</code><code class="plain">, ack </code><code class="value">3813627681</code><code class="plain">, win </code><code class="value">58</code><code class="plain">, options [nop,nop,TS val </code><code class="value">590400681</code><code class="plain"> ecr </code><code class="value">530346691</code><code class="plain">], length </code><code class="value">1448</code></div>
<div class="line"><code class="value">16</code><code class="plain">:</code><code class="value">24</code><code class="plain">:</code><code class="value">42.804228</code><code class="plain"> IP </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.1</code><code class="plain">.</code><code class="value">5342</code><code class="plain"> &gt; </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.2</code><code class="plain">.</code><code class="value">40210</code><code class="plain">: Flags [.], ack </code><code class="value">1448</code><code class="plain">, win </code><code class="value">166</code><code class="plain">, options [nop,nop,TS val </code><code class="value">530348721</code><code class="plain"> ecr </code><code class="value">590400681</code><code class="plain">], length </code><code class="value">0</code></div>
<div class="line"><code class="value">16</code><code class="plain">:</code><code class="value">24</code><code class="plain">:</code><code class="value">42.804267</code><code class="plain"> IP </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.2</code><code class="plain">.</code><code class="value">40210</code><code class="plain"> &gt; </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.1</code><code class="plain">.</code><code class="value">5342</code><code class="plain">: Flags [P.], seq </code><code class="value">1448</code><code class="plain">:</code><code class="value">1836</code><code class="plain">, ack </code><code class="value">1</code><code class="plain">, win </code><code class="value">58</code><code class="plain">, options [nop,nop,TS val </code><code class="value">590400681</code><code class="plain"> ecr </code><code class="value">530346691</code><code class="plain">], length </code><code class="value">388</code></div>
<div class="line"><code class="value">16</code><code class="plain">:</code><code class="value">24</code><code class="plain">:</code><code class="value">42.804293</code><code class="plain"> IP </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.1</code><code class="plain">.</code><code class="value">5342</code><code class="plain"> &gt; </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.2</code><code class="plain">.</code><code class="value">40210</code><code class="plain">: Flags [.], ack </code><code class="value">1836</code><code class="plain">, win </code><code class="value">165</code><code class="plain">, options [nop,nop,TS val </code><code class="value">530348721</code><code class="plain"> ecr </code><code class="value">590400681</code><code class="plain">], length </code><code class="value">0</code></div>
<div class="line"><code class="value">16</code><code class="plain">:</code><code class="value">24</code><code class="plain">:</code><code class="value">43.532389</code><code class="plain"> IP </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.2</code><code class="plain"> &gt; </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.1</code><code class="plain">: ICMP echo request, id </code><code class="value">27785</code><code class="plain">, seq </code><code class="value">7</code><code class="plain">, length </code><code class="value">64</code></div>
<div class="line"><code class="value">16</code><code class="plain">:</code><code class="value">24</code><code class="plain">:</code><code class="value">43.532447</code><code class="plain"> IP </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.1</code><code class="plain"> &gt; </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.2</code><code class="plain">: ICMP echo reply, id </code><code class="value">27785</code><code class="plain">, seq </code><code class="value">7</code><code class="plain">, length </code><code class="value">64</code></div>
<div class="line"><code class="value">16</code><code class="plain">:</code><code class="value">24</code><code class="plain">:</code><code class="value">43.838652</code><code class="plain"> IP </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.1</code><code class="plain">.</code><code class="value">59951</code><code class="plain"> &gt; </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.2</code><code class="plain">.</code><code class="value">5342</code><code class="plain">: Flags [.], seq </code><code class="value">2555144343</code><code class="plain">:</code><code class="value">2555145791</code><code class="plain">, ack </code><code class="value">2067274882</code><code class="plain">, win </code><code class="value">58</code><code class="plain">, options [nop,nop,TS val </code><code class="value">530349755</code><code class="plain"> ecr </code><code class="value">590399688</code><code class="plain">], length </code><code class="value">1448</code></div>
<div class="line"><code class="value">16</code><code class="plain">:</code><code class="value">24</code><code class="plain">:</code><code class="value">43.838692</code><code class="plain"> IP </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.1</code><code class="plain">.</code><code class="value">59951</code><code class="plain"> &gt; </code><code class="value">169.254</code><code class="plain">.</code><code class="value">0.2</code><code class="plain">.</code><code class="value">5342</code><code class="plain">: Flags [P.], seq </code><code class="value">1448</code><code class="plain">:</code><code class="value">1838</code><code class="plain">, ack </code><code class="value">1</code><code class="plain">, win </code><code class="value">58</code><code class="plain">, options [nop,nop,TS val </code><code class="value">530349755</code><code class="plain"> ecr </code><code class="value">590399688</code><code class="plain">], length </code><code class="value">390</code></div>
<div class="line"><code class="value">10</code><code class="plain"> packets captured</code></div>
<div class="line"><code class="value">12</code><code class="plain"> packets received by filter</code></div>
<div class="line"><code class="value">0</code><code class="plain"> packets dropped by kernel</code></div>
</div>
    </div>
    </div>
    <div class="section section-1" id="src-5126778_NetworkTroubleshooting-CaveatsandErrata">
        <h1 class="heading "><span>Caveats and Errata</span></h1>
<ul class=" "><li class=" ">    <p  >SPAN rules cannot match outgoing subinterfaces.    </p>
</li><li class=" ">    <p  >ERSPAN rules must include <tt class=" ">ttl</tt> for versions 1.5.1 and earlier.    </p>
</li></ul>    </div>
    <div class="section section-1" id="src-5126778_NetworkTroubleshooting-RelatedInformation">
        <h1 class="heading "><span>Related Information</span></h1>
<ul class=" "><li class=" ">    <p  ><a  class="external-link" href="http://www.perihel.at/sec/mz/mzguide.html">www.perihel.at/sec/mz/mzguide.html</a>    </p>
</li><li class=" ">    <p  ><a  class="external-link" href="http://en.wikipedia.org/wiki/Ping">en.wikipedia.org/wiki/Ping</a>    </p>
</li><li class=" ">    <p  ><a  class="external-link" href="http://www.tcpdump.org">www.tcpdump.org</a>    </p>
</li><li class=" ">    <p  ><a  class="external-link" href="https://en.wikipedia.org/wiki/Traceroute">en.wikipedia.org/wiki/Traceroute</a>    </p>
</li></ul>    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="Monitoring_Interfaces_and_Transceivers_Using_ethtool.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Monitoring Interfaces and Transceivers Using ethtool</span>
        </a>
                <a href="Using_NCLU_to_Troubleshoot_Your_Network_Configuration.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Using NCLU to Troubleshoot Your Network Configuration</span>
        </a>
    </nav>    
            
            <article id="html-search-results" class="ht-content" style="display: none;">
            <header class="ht-content-header">
                <div id="ht-spacetitle">
                    <ul>
                        <li><a href="Cumulus_Linux_User_Guide.html">Cumulus Linux 3.2.1</a></li>
                    </ul>
                </div>
                <h1>Search results</h1>
            </header>
            <div id="search-results"></div>
        </article>
    
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>


</body>
</html>
