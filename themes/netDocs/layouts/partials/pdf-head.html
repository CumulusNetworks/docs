<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>


<script>
    var tabs_finished = false;
    var urls_finished = false;
    var debug = false;

    function replace_url() {
        var elems = document.getElementsByTagName("a");
        for (var i = 0; i < elems.length; i++) {
            path = elems[i]["href"];

            // skip <a> elements without a href link to read
            if(path == ""){
                continue;
            }

            if(debug){
                console.log("Index " + i + ": " + path);
            }

            path_parts = path.split("/");

            // Does the URL have our same product (i.e., /cumulus-linux-43/)? If not, skip this link.
            if(path_parts[3] != "{{.Section}}"){
                if(debug){
                    console.log(path + " is not part of {{.Section}}");
                }
                continue;
            }

            last_section = path_parts[path_parts.length - 1];

            if(debug){
                console.log("working with " + last_section);
            }

            // If it's a normal URL that ends in a #, ignore it (i.e., "http://localhost:1313/cumulus-linux-43/Layer-3/FRRouting/#")
            if(last_section == "#" && last_section.length == 1){
                last_section = path_parts[path_parts.length - 2];
                if(debug){
                    console.log("ignoring ending #");
                }
            }

            // Deal with links with anchors by leaving just the anchor
            // (i.e.,http://localhost:1313/cumulus-linux-43/Layer-3/Border-Gateway-Protocol-BGP/Optional-BGP-Configuration/#graceful-bgp-restart")
            if(last_section.charAt(0) == "#"){
                if(debug){
                    console.log("Processing Existing anchor");
                }

                elems[i]["href"] = last_section;
                continue;
            }

            if(debug){
                console.log("rewriting to #" + last_section);
            }

            elems[i]["href"] = "#" + last_section;
        }
    }

    function expand_tabs() {
        // Break tabs into separate sections
        $.each( $('.book-tabs'), function() {
            var html = $(this).html();
            var htmlDelimited = html.replace('</div><input type="radio"', '</div>ยง<input type="radio"');
            var htmlSeparated = htmlDelimited.split('ยง');
            for (let i in htmlSeparated) {
            htmlSeparated[i] = '<div class="book-tabs">' + htmlSeparated[i] + '</div>';
            }
            $(this).replaceWith(htmlSeparated);
        });
        // Loop through .book-tabs again; adjust CSS where needed and replace input.name attribute values with a random hash
        $.each( $('.book-tabs'), function() {
            $(this).find('input[type=radio]:checked+label').css('border-bottom', '0');
            $(this).find('.book-tabs-content').show();
            $(this).find('input[type="radio"]').attr('name', Math.floor(Math.random() * 100000000000000));
        });
        tabs_finished = true;
    }

    function docraptorJavaScriptFinished(){
        return tabs_finished && urls_finished;
    }

    window.onload = function() {
        replace_url();
        expand_tabs();
        // Auto expand all of the code folding "<details>" tags.
        //$( "details" ).attr("open", "true");
    }
</script>
<meta name="author" content="Cumulus Networks" />
<meta name="keywords" content="COMMIT_INFO" />
<meta name="search_visibility" content="hidden" />

<style type="text/css">
    @page {
      /* NetQ docs contain long outputs.
      Use landscape style to help fit */
      {{ if eq .Page.Params.product "Cumulus NetQ" }}
          size: A4 landscape;
      {{ else }}
          size: A4 portrait;
      {{ end }}

      @bottom {
          padding-top: 0;
          margin: 10pt 0 30pt 0;
          border-top: .25pt solid #36424a;
      }
      @top-right {
        border-bottom: .25pt solid #36424a;
      }

  }

  @page:right {
      @bottom {
          content: {{.Site.Params.baseURL}}
      }

      @bottom-right {
          padding-top: 0;
          margin: 10pt 0 30pt 0;
          border-top: .25pt solid #36424a;
          content: counter(page);
      }

      @bottom-left {
          padding-top: 0;
          margin: 10pt 0 30pt 0;
          border-top: .25pt solid #36424a;
      }

      @top-right {
          padding-bottom: 0;
          margin: 10pt 0 30pt 0;
          border-bottom: .25pt solid #36424a;
          content: "{{.Page.Params.product}} v{{.Page.Params.version}} User Documentation";
      }

      @top-left {
          padding-bottom: 0;
          margin: 10pt 0 30pt 0;
          content: string(chapter-title);
          border-bottom: .25pt solid #36424a;
      }
  }

  @page:left {
      @bottom {
          content: "{{.Site.Params.BaseURL}}"
      }

      @bottom-right {
          padding-top: 0;
          margin: 10pt 0 30pt 0;
          border-top: .25pt solid #36424a;
      }

      @bottom-left {
          padding-top: 0;
          margin: 10pt 0 30pt 0;
          border-top: .25pt solid #36424a;
          content: counter(page);
      }

      @top-right {
          padding-bottom: 0;
          margin: 10pt 0 30pt 0;
          border-bottom: .25pt solid #36424a;
          content: string(chapter-title);
      }

      @top-left {
          padding-bottom: 0;
          margin: 10pt 0 30pt 0;
          border-bottom: .25pt solid #36424a;
          content: "{{.Page.Params.product}} v{{.Page.Params.version}} User Documentation";
      }

  }

  @page:first {
      @bottom-right {
          content: normal;
      }
      @bottom-left {
          content: normal;
      }
      @bottom {
          content: normal;
      }
      @top-right {
          content: normal;
      }
      @top-left {
          content: normal;
      }
      @top {
          content: normal;
      }
  }
  .book-page {
      counter-reset: page 1
  }

  #cover {
      width: 100%;
      text-align: center;
      break-after: always;
  }

  #centered {
      break-after: always;
      margin: 0 auto;
      display: inline-block;
      padding: 3px;
  }

  #centered h1 {
      color: #36424a;
      font-size: 2rem;
      font-weight: 300;
      letter-spacing: -.7px;
      line-height: 3rem;
      margin-top: 0;
      margin-bottom: 1.1rem
  }

  #centered img {
      display: block;
      page-break-inside: avoid;
      width: 500px;
      height: auto;
      margin: auto;
  }

  img {
    padding-bottom: 30px;
  }

  .markdown {
      page-break-after: always;
  }

  .markdown code {
    font-size: .8rem;
  }

  .markdown pre {
    white-space: pre-wrap;
    overflow-x: auto;
    overflow-wrap: anywhere;
  }
  .toc1 {
      prince-bookmark-level: 1;
  }

  .toc2 {
      prince-bookmark-level: 2;
      string-set: chapter-title content()
  }

  .toc3 {
      prince-bookmark-level: 3;
  }

  h1 {
      prince-bookmark-level: none;
  }

  h2 {
      prince-bookmark-level: none;
  }

  h3 {
      prince-bookmark-level: none;
  }

  h4 {
      prince-bookmark-level: none;
  }
</style>