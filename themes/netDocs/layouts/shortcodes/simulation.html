{{ if .Parent }}
  {{ $simName := .Get "name" }}
  {{ $autoLoad := default "all" (.Get "showNodes") }}
  <head>
    <script src="https://www.google.com/recaptcha/api.js"></script>
    <script type="text/javascript" id="sim-script-{{ $simName }}">
    let button = document.getElementById("button");
    button.addEventListener('click', const sim = new Simulation('{{ $simName }}', '{{ $autoLoad }}');
    button.addEventListener('click', sim.initHandler(document.getElementById('sim-script-{{ $simName }}').parentElement.previousElementSibling));
    button.addEventListener('click', alert("click registered");
    </script>
    <script type="text/javascript">
      function recaptcha_callback(){
        $('.button').prop("disabled", false);
      }
  </script>
  </head>
<body>
  <div class="g-recaptcha" data-callback="recaptcha_callback" data-sitekey="6LerLacfAAAAAKg8VWyDZrhsBK3tIkO41fswN2k_"></div>
  <button id="button" class="button" disabled>Launch Simulation</button>

  <iframe name="loading-container-{{ $simName }}" class="terminal-iframe loading-container"></iframe>
  <iframe name="console-container-{{ $simName }}" class="terminal-iframe terminal-hidden"></iframe>
  
</body>

{{ end }}